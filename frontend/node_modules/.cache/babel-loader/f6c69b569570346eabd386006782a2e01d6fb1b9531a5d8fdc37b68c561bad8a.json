{"ast":null,"code":"import UserAvatarContent from \"@/components/UserAvatarContent\";\nimport { mapState, mapMutations } from \"vuex\";\nimport { post, isPhone } from \"@/utils\";\nimport TeamsNotReadyDialog from \"./TeamsNotReadyDialog.vue\";\nexport default {\n  name: \"AuthUserMenu\",\n  components: {\n    UserAvatarContent,\n    TeamsNotReadyDialog\n  },\n  data() {\n    return {\n      showTeamsNotReadyDialog: false\n    };\n  },\n  computed: {\n    ...mapState([\"authUser\"]),\n    isPhone() {\n      return isPhone(this.$vuetify);\n    },\n    size() {\n      return this.isPhone ? 32 : 42;\n    },\n    showFeedbackBtn() {\n      return !(!this.isPhone || this.$route.name === \"home\");\n    }\n  },\n  methods: {\n    ...mapMutations([\"setAuthUser\"]),\n    async signOut() {\n      await post(\"/auth/sign-out\");\n      this.setAuthUser(null);\n      this.$posthog?.reset();\n      location.reload();\n    },\n    goToSettings() {\n      this.$router.replace({\n        name: \"settings\"\n      });\n    },\n    addTeamMember() {\n      this.$posthog?.capture(\"add_team_member_clicked\");\n      this.showTeamsNotReadyDialog = true;\n    }\n  }\n};","map":{"version":3,"names":["UserAvatarContent","mapState","mapMutations","post","isPhone","TeamsNotReadyDialog","name","components","data","showTeamsNotReadyDialog","computed","$vuetify","size","showFeedbackBtn","$route","methods","signOut","setAuthUser","$posthog","reset","location","reload","goToSettings","$router","replace","addTeamMember","capture"],"sources":["src/components/AuthUserMenu.vue"],"sourcesContent":["<!-- Displays auth user's avatar, which displays a menu when clicked -->\n<template>\n  <span>\n    <v-menu v-if=\"authUser\" offset-y left>\n      <template v-slot:activator=\"{ on }\">\n        <v-btn id=\"user-menu-btn\" icon :width=\"size\" :height=\"size\" v-on=\"on\">\n          <v-avatar :size=\"size\">\n            <UserAvatarContent :user=\"authUser\" :size=\"size\" />\n          </v-avatar>\n        </v-btn>\n      </template>\n      <v-list class=\"py-0\" :dense=\"isPhone\">\n        <v-list-item>\n          <v-list-item-title>\n            <strong>{{ `${authUser.firstName} ${authUser.lastName}` }}</strong>\n          </v-list-item-title>\n        </v-list-item>\n        <v-list-item id=\"add-team-member-btn\" @click=\"addTeamMember\">\n          <v-list-item-title class=\"tw-flex tw-items-center tw-gap-1\">\n            <v-icon class=\"tw-mr-1\" small color=\"black\"\n              >mdi-account-plus</v-icon\n            >\n            Add team member\n          </v-list-item-title>\n        </v-list-item>\n        <v-list-item\n          v-if=\"showFeedbackBtn\"\n          id=\"feedback-btn\"\n          href=\"https://forms.gle/9AgRy4PQfWfVuBnw8\"\n          target=\"_blank\"\n        >\n          <v-list-item-title class=\"tw-flex tw-items-center tw-gap-1\">\n            <v-icon class=\"tw-mr-1\" small color=\"black\">mdi-message</v-icon>\n            反馈建议\n          </v-list-item-title>\n        </v-list-item>\n        <v-list-item id=\"settings-btn\" @click=\"goToSettings\">\n          <v-list-item-title class=\"tw-flex tw-items-center tw-gap-1\">\n            <v-icon class=\"tw-mr-1\" small color=\"black\">mdi-cog</v-icon>\n            Settings\n          </v-list-item-title>\n        </v-list-item>\n        <v-divider></v-divider>\n        <v-list-item id=\"sign-out-btn\" @click=\"signOut\">\n          <v-list-item-title class=\"red--text tw-flex tw-items-center tw-gap-1\">\n            <v-icon class=\"tw-mr-1\" small color=\"red\">mdi-logout</v-icon>\n            Sign Out\n          </v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-menu>\n    <TeamsNotReadyDialog v-model=\"showTeamsNotReadyDialog\" />\n  </span>\n</template>\n\n<script>\nimport UserAvatarContent from \"@/components/UserAvatarContent\"\nimport { mapState, mapMutations } from \"vuex\"\nimport { post, isPhone } from \"@/utils\"\nimport TeamsNotReadyDialog from \"./TeamsNotReadyDialog.vue\"\n\nexport default {\n  name: \"AuthUserMenu\",\n\n  components: {\n    UserAvatarContent,\n    TeamsNotReadyDialog,\n  },\n\n  data() {\n    return {\n      showTeamsNotReadyDialog: false,\n    }\n  },\n\n  computed: {\n    ...mapState([\"authUser\"]),\n    isPhone() {\n      return isPhone(this.$vuetify)\n    },\n    size() {\n      return this.isPhone ? 32 : 42\n    },\n    showFeedbackBtn() {\n      return !(!this.isPhone || this.$route.name === \"home\")\n    },\n  },\n\n  methods: {\n    ...mapMutations([\"setAuthUser\"]),\n    async signOut() {\n      await post(\"/auth/sign-out\")\n      this.setAuthUser(null)\n      this.$posthog?.reset()\n      location.reload()\n    },\n    goToSettings() {\n      this.$router.replace({ name: \"settings\" })\n    },\n    addTeamMember() {\n      this.$posthog?.capture(\"add_team_member_clicked\")\n      this.showTeamsNotReadyDialog = true\n    },\n  },\n}\n</script>\n"],"mappings":"AAwDA,OAAAA,iBAAA;AACA,SAAAC,QAAA,EAAAC,YAAA;AACA,SAAAC,IAAA,EAAAC,OAAA;AACA,OAAAC,mBAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAP,iBAAA;IACAK;EACA;EAEAG,KAAA;IACA;MACAC,uBAAA;IACA;EACA;EAEAC,QAAA;IACA,GAAAT,QAAA;IACAG,QAAA;MACA,OAAAA,OAAA,MAAAO,QAAA;IACA;IACAC,KAAA;MACA,YAAAR,OAAA;IACA;IACAS,gBAAA;MACA,eAAAT,OAAA,SAAAU,MAAA,CAAAR,IAAA;IACA;EACA;EAEAS,OAAA;IACA,GAAAb,YAAA;IACA,MAAAc,QAAA;MACA,MAAAb,IAAA;MACA,KAAAc,WAAA;MACA,KAAAC,QAAA,EAAAC,KAAA;MACAC,QAAA,CAAAC,MAAA;IACA;IACAC,aAAA;MACA,KAAAC,OAAA,CAAAC,OAAA;QAAAlB,IAAA;MAAA;IACA;IACAmB,cAAA;MACA,KAAAP,QAAA,EAAAQ,OAAA;MACA,KAAAjB,uBAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}