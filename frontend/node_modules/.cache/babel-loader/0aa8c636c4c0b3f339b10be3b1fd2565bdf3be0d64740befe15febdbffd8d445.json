{"ast":null,"code":"import { mapActions } from \"vuex\";\nimport { isPhone, put } from \"@/utils\";\nexport default {\n  name: \"EventDescription\",\n  props: {\n    event: {\n      type: Object,\n      required: true\n    },\n    canEdit: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data() {\n    return {\n      isEditing: false,\n      newDescription: this.event.description ?? \"\",\n      lineHeight: 28\n    };\n  },\n  computed: {\n    isPhone() {\n      return isPhone(this.$vuetify);\n    },\n    showDescription() {\n      return this.event.description && !this.isEditing;\n    }\n  },\n  methods: {\n    ...mapActions([\"showError\"]),\n    saveDescription() {\n      const oldEvent = {\n        ...this.event\n      };\n      const newEvent = {\n        ...this.event,\n        description: this.newDescription\n      };\n      const eventPayload = {\n        name: this.event.name,\n        duration: this.event.duration,\n        dates: this.event.dates,\n        type: this.event.type,\n        description: this.newDescription\n      };\n      this.$emit(\"update:event\", newEvent);\n      this.isEditing = false;\n      put(`/events/${this.event._id}`, eventPayload).catch(err => {\n        console.error(err);\n        this.showError(\"Failed to save description! Please try again later.\");\n        this.$emit(\"update:event\", {\n          ...oldEvent\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapActions","isPhone","put","name","props","event","type","Object","required","canEdit","Boolean","data","isEditing","newDescription","description","lineHeight","computed","$vuetify","showDescription","methods","saveDescription","oldEvent","newEvent","eventPayload","duration","dates","$emit","_id","catch","err","console","error","showError"],"sources":["src/components/event/EventDescription.vue"],"sourcesContent":["<template>\n  <div class=\"tw-mt-1 tw-max-w-full sm:tw-mt-2 sm:tw-max-w-[calc(100%-236px)]\">\n    <div\n      v-if=\"showDescription\"\n      class=\"tw-flex tw-w-full tw-cursor-pointer tw-items-center tw-gap-2 tw-rounded-md tw-border tw-border-light-gray-stroke tw-bg-light-gray tw-p-2 tw-text-xs tw-font-normal tw-text-very-dark-gray hover:tw-bg-[#eeeeee] sm:tw-text-sm\"\n    >\n      <div class=\"tw-grow tw-space-y-1\">\n        <div\n          class=\"tw-min-h-6 tw-leading-6\"\n          v-for=\"(line, i) in event.description.split('\\n')\"\n          :key=\"i\"\n        >\n          {{ line }}\n        </div>\n      </div>\n      <v-btn\n        v-if=\"canEdit\"\n        key=\"edit-description-btn\"\n        class=\"-tw-my-1\"\n        icon\n        small\n        @click=\"isEditing = true\"\n      >\n        <v-icon small>mdi-pencil</v-icon>\n      </v-btn>\n    </div>\n\n    <v-btn\n      v-else-if=\"canEdit && !isEditing\"\n      text\n      class=\"-tw-ml-2 tw-mt-0 tw-w-min tw-px-2 tw-text-dark-gray\"\n      @click=\"isEditing = true\"\n    >\n      + Add description\n    </v-btn>\n    <div\n      :class=\"\n        canEdit && !showDescription && isEditing\n          ? ''\n          : 'tw-absolute tw-opacity-0'\n      \"\n    >\n      <div\n        class=\"-tw-mt-[6px] tw-flex tw-w-full tw-flex-grow tw-items-center tw-gap-2\"\n      >\n        <v-textarea\n          v-model=\"newDescription\"\n          placeholder=\"Enter a description...\"\n          class=\"tw-flex-grow tw-p-2 tw-text-xs sm:tw-text-sm\"\n          autofocus\n          :rows=\"1\"\n          auto-grow\n          hide-details\n        ></v-textarea>\n        <v-btn\n          icon\n          :small=\"isPhone\"\n          @click=\"\n            newDescription = event.description\n            isEditing = false\n          \"\n        >\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n        <v-btn icon :small=\"isPhone\" color=\"primary\" @click=\"saveDescription\"\n          ><v-icon>mdi-check</v-icon></v-btn\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\"\nimport { isPhone, put } from \"@/utils\"\n\nexport default {\n  name: \"EventDescription\",\n\n  props: {\n    event: {\n      type: Object,\n      required: true,\n    },\n    canEdit: {\n      type: Boolean,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      isEditing: false,\n      newDescription: this.event.description ?? \"\",\n      lineHeight: 28,\n    }\n  },\n\n  computed: {\n    isPhone() {\n      return isPhone(this.$vuetify)\n    },\n    showDescription() {\n      return this.event.description && !this.isEditing\n    },\n  },\n\n  methods: {\n    ...mapActions([\"showError\"]),\n    saveDescription() {\n      const oldEvent = { ...this.event }\n\n      const newEvent = {\n        ...this.event,\n        description: this.newDescription,\n      }\n\n      const eventPayload = {\n        name: this.event.name,\n        duration: this.event.duration,\n        dates: this.event.dates,\n        type: this.event.type,\n        description: this.newDescription,\n      }\n      \n      this.$emit(\"update:event\", newEvent)\n      this.isEditing = false\n      put(`/events/${this.event._id}`, eventPayload).catch((err) => {\n        console.error(err)\n        this.showError(\"Failed to save description! Please try again later.\")\n        this.$emit(\"update:event\", {\n          ...oldEvent,\n        })\n      })\n    },\n  },\n}\n</script>\n"],"mappings":"AAyEA,SAAAA,UAAA;AACA,SAAAC,OAAA,EAAAC,GAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,OAAA;MACAH,IAAA,EAAAI,OAAA;MACAF,QAAA;IACA;EACA;EAEAG,KAAA;IACA;MACAC,SAAA;MACAC,cAAA,OAAAR,KAAA,CAAAS,WAAA;MACAC,UAAA;IACA;EACA;EAEAC,QAAA;IACAf,QAAA;MACA,OAAAA,OAAA,MAAAgB,QAAA;IACA;IACAC,gBAAA;MACA,YAAAb,KAAA,CAAAS,WAAA,UAAAF,SAAA;IACA;EACA;EAEAO,OAAA;IACA,GAAAnB,UAAA;IACAoB,gBAAA;MACA,MAAAC,QAAA;QAAA,QAAAhB;MAAA;MAEA,MAAAiB,QAAA;QACA,QAAAjB,KAAA;QACAS,WAAA,OAAAD;MACA;MAEA,MAAAU,YAAA;QACApB,IAAA,OAAAE,KAAA,CAAAF,IAAA;QACAqB,QAAA,OAAAnB,KAAA,CAAAmB,QAAA;QACAC,KAAA,OAAApB,KAAA,CAAAoB,KAAA;QACAnB,IAAA,OAAAD,KAAA,CAAAC,IAAA;QACAQ,WAAA,OAAAD;MACA;MAEA,KAAAa,KAAA,iBAAAJ,QAAA;MACA,KAAAV,SAAA;MACAV,GAAA,iBAAAG,KAAA,CAAAsB,GAAA,IAAAJ,YAAA,EAAAK,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;QACA,KAAAG,SAAA;QACA,KAAAN,KAAA;UACA,GAAAL;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}