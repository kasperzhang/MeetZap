{"ast":null,"code":"import { mapState } from \"vuex\";\nimport { isPhone } from \"@/utils\";\nimport { get } from \"@/utils\";\nimport { guestUserId } from \"@/constants\";\nexport default {\n  name: \"Advertisement\",\n  props: {\n    ownerId: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data: () => ({\n    link: \"https://tomotime.app\",\n    eduOnly: true,\n    owner: null\n  }),\n  async mounted() {\n    if (this.ownerId !== guestUserId) this.owner = await get(`/users/${this.ownerId}`);\n  },\n  computed: {\n    isPhone() {\n      return isPhone(this.$vuetify);\n    }\n  },\n  methods: {\n    navigateToAd() {\n      this.$posthog?.capture(\"Clicked ad\", {\n        link: this.link\n      });\n      window.open(this.link, \"_blank\");\n    },\n    isEduEmail(email) {\n      const split = email.split(\".\");\n      return split[split.length - 1] === \"edu\";\n    }\n  },\n  watch: {},\n  computed: {\n    ...mapState([\"authUser\"]),\n    isPhone() {\n      return isPhone(this.$vuetify);\n    },\n    showAd() {\n      if (this.eduOnly) {\n        return this.authUser && this.isEduEmail(this.authUser.email) || this.owner && this.isEduEmail(this.owner.email);\n      } else {\n        return true;\n      }\n    }\n  },\n  components: {}\n};","map":{"version":3,"names":["mapState","isPhone","get","guestUserId","name","props","ownerId","type","String","default","data","link","eduOnly","owner","mounted","computed","$vuetify","methods","navigateToAd","$posthog","capture","window","open","isEduEmail","email","split","length","watch","showAd","authUser","components"],"sources":["src/components/event/Advertisement.vue"],"sourcesContent":["<template>\n  <div v-if=\"showAd\" class=\"tw-flex tw-cursor-pointer\" @click=\"navigateToAd\">\n    <v-img\n      alt=\"tomotime ad\"\n      :src=\"\n        isPhone\n          ? require('@/assets/ads/tomotime_mobile.png')\n          : require('@/assets/ads/tomotime.png')\n      \"\n      width=\"0\"\n      transition=\"fade-transition\"\n      class=\"tw-relative tw-shadow-md sm:tw-shadow-none\"\n      ><div\n        class=\"tw-absolute tw-left-0 tw-top-0 tw-ml-0 tw-mt-0 tw-flex tw-h-8 tw-w-8 tw-items-center tw-justify-center tw-rounded-br-lg tw-bg-gray tw-bg-opacity-60 tw-text-xs sm:tw-ml-[6px] sm:tw-mt-[5px] sm:tw-h-10 sm:tw-w-10 sm:tw-rounded-tl-lg\"\n      >\n        AD\n      </div></v-img\n    >\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\"\nimport { isPhone } from \"@/utils\"\nimport { get } from \"@/utils\"\nimport { guestUserId } from \"@/constants\"\n\nexport default {\n  name: \"Advertisement\",\n\n  props: {\n    ownerId: { type: String, default: \"\" },\n  },\n\n  data: () => ({\n    link: \"https://tomotime.app\",\n    eduOnly: true,\n    owner: null,\n  }),\n\n  async mounted() {\n    if (this.ownerId !== guestUserId)\n      this.owner = await get(`/users/${this.ownerId}`)\n  },\n\n  computed: {\n    isPhone() {\n      return isPhone(this.$vuetify)\n    },\n  },\n\n  methods: {\n    navigateToAd() {\n      this.$posthog?.capture(\"Clicked ad\", {\n        link: this.link,\n      })\n      window.open(this.link, \"_blank\")\n    },\n    isEduEmail(email) {\n      const split = email.split(\".\")\n      return split[split.length - 1] === \"edu\"\n    },\n  },\n\n  watch: {},\n\n  computed: {\n    ...mapState([\"authUser\"]),\n    isPhone() {\n      return isPhone(this.$vuetify)\n    },\n    showAd() {\n      if (this.eduOnly) {\n        return (\n          (this.authUser && this.isEduEmail(this.authUser.email)) ||\n          (this.owner && this.isEduEmail(this.owner.email))\n        )\n      } else {\n        return true\n      }\n    },\n  },\n\n  components: {},\n}\n</script>\n"],"mappings":"AAsBA,SAAAA,QAAA;AACA,SAAAC,OAAA;AACA,SAAAC,GAAA;AACA,SAAAC,WAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACAC,OAAA;MAAAC,IAAA,EAAAC,MAAA;MAAAC,OAAA;IAAA;EACA;EAEAC,IAAA,EAAAA,CAAA;IACAC,IAAA;IACAC,OAAA;IACAC,KAAA;EACA;EAEA,MAAAC,QAAA;IACA,SAAAR,OAAA,KAAAH,WAAA,EACA,KAAAU,KAAA,SAAAX,GAAA,gBAAAI,OAAA;EACA;EAEAS,QAAA;IACAd,QAAA;MACA,OAAAA,OAAA,MAAAe,QAAA;IACA;EACA;EAEAC,OAAA;IACAC,aAAA;MACA,KAAAC,QAAA,EAAAC,OAAA;QACAT,IAAA,OAAAA;MACA;MACAU,MAAA,CAAAC,IAAA,MAAAX,IAAA;IACA;IACAY,WAAAC,KAAA;MACA,MAAAC,KAAA,GAAAD,KAAA,CAAAC,KAAA;MACA,OAAAA,KAAA,CAAAA,KAAA,CAAAC,MAAA;IACA;EACA;EAEAC,KAAA;EAEAZ,QAAA;IACA,GAAAf,QAAA;IACAC,QAAA;MACA,OAAAA,OAAA,MAAAe,QAAA;IACA;IACAY,OAAA;MACA,SAAAhB,OAAA;QACA,OACA,KAAAiB,QAAA,SAAAN,UAAA,MAAAM,QAAA,CAAAL,KAAA,KACA,KAAAX,KAAA,SAAAU,UAAA,MAAAV,KAAA,CAAAW,KAAA;MAEA;QACA;MACA;IACA;EACA;EAEAM,UAAA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}