{"ast":null,"code":"import { post } from \"@/utils\";\nimport { mapActions } from \"vuex\";\nimport { errors } from \"@/constants\";\nexport default {\n  name: \"AppleCredentials\",\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      loading: false\n    };\n  },\n  computed: {\n    enableSubmit() {\n      return this.email && this.password;\n    }\n  },\n  methods: {\n    ...mapActions([\"showError\", \"refreshAuthUser\"]),\n    submit() {\n      this.loading = true;\n      post(`/user/add-apple-calendar-account`, {\n        email: this.email,\n        password: this.password\n      }).then(async () => {\n        await this.refreshAuthUser();\n        this.$emit(\"addedAppleCalendar\");\n        this.$posthog.capture(\"Apple Calendar Added\");\n      }).catch(err => {\n        if (err.error === errors.InvalidCredentials) {\n          this.showError(\"Your Apple ID or app password is incorrect.\");\n        } else {\n          this.showError(\"An error occurred while adding your Apple Calendar! Please try again later.\");\n        }\n      }).finally(() => {\n        this.loading = false;\n      });\n    }\n  }\n};","map":{"version":3,"names":["post","mapActions","errors","name","data","email","password","loading","computed","enableSubmit","methods","submit","then","refreshAuthUser","$emit","$posthog","capture","catch","err","error","InvalidCredentials","showError","finally"],"sources":["src/components/calendar_permission_dialogs/AppleCredentials.vue"],"sourcesContent":["<template>\n  <div class=\"tw-flex tw-flex-col tw-gap-6\">\n    <div class=\"tw-flex tw-flex-col tw-gap-3\">\n      <div\n        class=\"tw-text-md tw-flex tw-flex-row tw-items-center tw-justify-start tw-gap-2 tw-font-medium\"\n      >\n        Connect your\n        <div class=\"tw-flex tw-items-center tw-gap-1\">\n          <v-img\n            class=\"-tw-mt-1 tw-flex-initial\"\n            width=\"15\"\n            height=\"15\"\n            src=\"@/assets/apple_logo.svg\"\n          />\n          <span class=\"tw-font-medium\">Apple Calendar</span>\n        </div>\n      </div>\n      <div class=\"tw-flex tw-flex-col tw-gap-2\">\n        <div class=\"tw-text-sm tw-text-very-dark-gray\">\n          Generate an\n          <span class=\"tw-font-medium tw-text-black\"\n            >app-specific password</span\n          >\n          to use with Schej at\n          <a\n            href=\"https://appleid.apple.com/account/manage\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            >https://appleid.apple.com/account/manage</a\n          >. Copy and paste the generated app password below.\n        </div>\n        <div class=\"tw-text-sm tw-text-very-dark-gray\">\n          Your credentials will be stored and encrypted.\n        </div>\n      </div>\n    </div>\n    <div class=\"tw-flex tw-flex-col tw-gap-3\">\n      <v-text-field solo placeholder=\"Apple ID\" hide-details v-model=\"email\" />\n      <v-text-field\n        solo\n        placeholder=\"App password\"\n        hide-details\n        v-model=\"password\"\n        type=\"password\"\n      />\n      <div class=\"tw-flex tw-items-center tw-gap-2\">\n        <v-btn text class=\"tw-grow\" @click=\"$emit('back')\">Back</v-btn>\n        <v-btn\n          :disabled=\"!enableSubmit\"\n          color=\"primary\"\n          class=\"tw-grow\"\n          :loading=\"loading\"\n          @click=\"submit\"\n          >Submit</v-btn\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { post } from \"@/utils\"\nimport { mapActions } from \"vuex\"\nimport { errors } from \"@/constants\"\n\nexport default {\n  name: \"AppleCredentials\",\n\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      loading: false,\n    }\n  },\n\n  computed: {\n    enableSubmit() {\n      return this.email && this.password\n    },\n  },\n\n  methods: {\n    ...mapActions([\"showError\", \"refreshAuthUser\"]),\n    submit() {\n      this.loading = true\n      post(`/user/add-apple-calendar-account`, {\n        email: this.email,\n        password: this.password,\n      })\n        .then(async () => {\n          await this.refreshAuthUser()\n          this.$emit(\"addedAppleCalendar\")\n\n          this.$posthog.capture(\"Apple Calendar Added\")\n        })\n        .catch((err) => {\n          if (err.error === errors.InvalidCredentials) {\n            this.showError(\"Your Apple ID or app password is incorrect.\")\n          } else {\n            this.showError(\n              \"An error occurred while adding your Apple Calendar! Please try again later.\"\n            )\n          }\n        })\n        .finally(() => {\n          this.loading = false\n        })\n    },\n  },\n}\n</script>\n"],"mappings":"AA6DA,SAAAA,IAAA;AACA,SAAAC,UAAA;AACA,SAAAC,MAAA;AAEA;EACAC,IAAA;EAEAC,KAAA;IACA;MACAC,KAAA;MACAC,QAAA;MACAC,OAAA;IACA;EACA;EAEAC,QAAA;IACAC,aAAA;MACA,YAAAJ,KAAA,SAAAC,QAAA;IACA;EACA;EAEAI,OAAA;IACA,GAAAT,UAAA;IACAU,OAAA;MACA,KAAAJ,OAAA;MACAP,IAAA;QACAK,KAAA,OAAAA,KAAA;QACAC,QAAA,OAAAA;MACA,GACAM,IAAA;QACA,WAAAC,eAAA;QACA,KAAAC,KAAA;QAEA,KAAAC,QAAA,CAAAC,OAAA;MACA,GACAC,KAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,KAAA,KAAAjB,MAAA,CAAAkB,kBAAA;UACA,KAAAC,SAAA;QACA;UACA,KAAAA,SAAA,CACA,6EACA;QACA;MACA,GACAC,OAAA;QACA,KAAAf,OAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}