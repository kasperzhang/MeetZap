function t(t,e,i,r,n,o,s){try{var a=t[o](s),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(r,n)}function e(e){return function(){var i=this,r=arguments;return new Promise((function(n,o){var s=e.apply(i,r);function a(e){t(s,n,o,a,l,"next",e)}function l(e){t(s,n,o,a,l,"throw",e)}a(void 0)}))}}function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},i.apply(this,arguments)}function r(t,e){if(null==t)return{};var i,r,n={},o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],e.indexOf(i)>=0||(n[i]=t[i]);return n}var n,o=["type"],s=Object.defineProperty,a=(t,e,i)=>((t,e,i)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),l=Object.defineProperty,u=(t,e,i)=>((t,e,i)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),h=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(h||{}),c={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},d={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]};var v={};function f(t){if(v[t])return v[t];var e=function(t){var e,i=null==globalThis||null==(e=globalThis.Zone)||null==e.__symbol__?void 0:e.__symbol__(t);return i&&globalThis[i]?globalThis[i]:void 0}(t)||globalThis[t],i=e.prototype,r=t in c?c[t]:void 0,n=Boolean(r&&r.every((t=>{var e,r;return Boolean(null==(r=null==(e=Object.getOwnPropertyDescriptor(i,t))?void 0:e.get)?void 0:r.toString().includes("[native code]"))}))),o=t in d?d[t]:void 0,s=Boolean(o&&o.every((t=>{var e;return"function"==typeof i[t]&&(null==(e=i[t])?void 0:e.toString().includes("[native code]"))})));if(n&&s)return v[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var u=l[t].prototype;return document.body.removeChild(a),u?v[t]=u:e.prototype}catch(t){return e.prototype}}var p={};function g(t,e,i){var r,n=t+"."+String(i);if(p[n])return p[n].call(e);var o=f(t),s=null==(r=Object.getOwnPropertyDescriptor(o,i))?void 0:r.get;return s?(p[n]=s,s.call(e)):e[i]}var m={};function b(t,e,i){var r=t+"."+String(i);if(m[r])return m[r].bind(e);var n=f(t)[i];return"function"!=typeof n?e[i]:(m[r]=n,n.bind(e))}var y={childNodes:function(t){return g("Node",t,"childNodes")},parentNode:function(t){return g("Node",t,"parentNode")},parentElement:function(t){return g("Node",t,"parentElement")},textContent:function(t){return g("Node",t,"textContent")},contains:function(t,e){return b("Node",t,"contains")(e)},getRootNode:function(t){return b("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?g("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?g("Element",t,"shadowRoot"):null},querySelector:function(t,e){return g("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return g("Element",t,"querySelectorAll")(e)},mutationObserver:function(){return f("MutationObserver").constructor}};function _(t){return t.nodeType===t.ELEMENT_NODE}function w(t){var e=t&&"host"in t&&"mode"in t&&y.host(t)||null;return Boolean(e&&"shadowRoot"in e&&y.shadowRoot(e)===t)}function C(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function I(t){try{var e=t.rules||t.cssRules;if(!e)return null;var i=Array.from(e,(e=>S(e,t.href))).join("");return(r=i).includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),r}catch(t){return null}var r}function S(t,e){if(function(t){return"styleSheet"in t}(t)){var i;try{i=I(t.styleSheet)||function(t){var{cssText:e}=t;if(e.split('"').length<3)return e;var i=["@import","url("+JSON.stringify(t.href)+")"];return""===t.layerName?i.push("layer"):t.layerName&&i.push("layer("+t.layerName+")"),t.supportsText&&i.push("supports("+t.supportsText+")"),t.media.length&&i.push(t.media.mediaText),i.join(" ")+";"}(t)}catch(e){i=t.cssText}return t.styleSheet.href?L(i,t.styleSheet.href):i}var r,n=t.cssText;return function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":")&&(r=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,n=n.replace(r,"$1\\$2")),e?L(n,e):n}function k(t,e){return Array.from(t.styleSheets).find((t=>t.href===e))}let x=class{constructor(){u(this,"idNodeMap",new Map),u(this,"nodeMetaMap",new WeakMap)}getId(t){var e;if(!t)return-1;var i=null==(e=this.getMeta(t))?void 0:e.id;return null!=i?i:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){var e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){var i=e.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,e)}replace(t,e){var i=this.getNode(t);if(i){var r=this.nodeMetaMap.get(i);r&&this.nodeMetaMap.set(e,r)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function A(t){var{element:e,maskInputOptions:i,tagName:r,type:n,value:o,maskInputFn:s}=t,a=o||"",l=n&&T(n);return(i[r.toLowerCase()]||l&&i[l])&&(a=s?s(a,e):"*".repeat(a.length)),a}function T(t){return t.toLowerCase()}var M="__rrweb_original__";function N(t){var e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?T(e):null}function R(t,e){var i,r;try{r=new URL(t,null!=e?e:window.location.href)}catch(t){return null}var n=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(i=null==n?void 0:n[1])&&void 0!==i?i:null}var E=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,F=/^(?:[a-z+]+:)?\/\//i,O=/^www\..*/i,P=/^(data:)([^,]*),(.*)/i;function L(t,e){return(t||"").replace(E,((t,i,r,n,o,s)=>{var a,l=r||o||s,u=i||n||"";if(!l)return t;if(F.test(l)||O.test(l))return"url("+u+l+u+")";if(P.test(l))return"url("+u+l+u+")";if("/"===l[0])return"url("+u+(((a=e).indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+l)+u+")";var h=e.split("/"),c=l.split("/");for(var d of(h.pop(),c))"."!==d&&(".."===d?h.pop():h.push(d));return"url("+u+h.join("/")+u+")"}))}var D,B,$=1,Z=new RegExp("[^a-z0-9-_:]"),q=-2;function H(){return $++}var V=/^[^ \t\n\r\u000c]+/,j=/^[, \t\n\r\u000c]+/;var Y=new WeakMap;function G(t,e){return e&&""!==e.trim()?z(t,e):e}function W(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function z(t,e){var i=Y.get(t);if(i||(i=t.createElement("a"),Y.set(t,i)),e){if(e.startsWith("blob:")||e.startsWith("data:"))return e}else e="";return i.setAttribute("href",e),i.href}function U(t,e,i,r){return r?"src"===i||"href"===i&&("use"!==e||"#"!==r[0])||"xlink:href"===i&&"#"!==r[0]?G(t,r):"background"!==i||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===i?function(t,e){if(""===e.trim())return e;var i=0;function r(t){var r,n=t.exec(e.substring(i));return n?(r=n[0],i+=r.length,r):""}for(var n=[];r(j),!(i>=e.length);){var o=r(V);if(","===o.slice(-1))o=G(t,o.substring(0,o.length-1)),n.push(o);else{var s="";o=G(t,o);for(var a=!1;;){var l=e.charAt(i);if(""===l){n.push((o+s).trim());break}if(a)")"===l&&(a=!1);else{if(","===l){i+=1,n.push((o+s).trim());break}"("===l&&(a=!0)}s+=l,i+=1}}}return n.join(", ")}(t,r):"style"===i?L(r,z(t)):"object"===e&&"data"===i?G(t,r):r:G(t,r):r}function X(t,e,i){return("video"===t||"audio"===t)&&"autoplay"===e}function J(t,e,i){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!i&&J(y.parentNode(t),e,i);for(var r=t.classList.length;r--;){var n=t.classList[r];if(e.test(n))return!0}return!!i&&J(y.parentNode(t),e,i)}function K(t,e,i,r){var n;if(_(t)){if(n=t,!y.childNodes(n).length)return!1}else{if(null===y.parentElement(t))return!1;n=y.parentElement(t)}try{if("string"==typeof e){if(r){if(n.closest("."+e))return!0}else if(n.classList.contains(e))return!0}else if(J(n,e,r))return!0;if(i)if(r){if(n.closest(i))return!0}else if(n.matches(i))return!0}catch(t){}return!1}function Q(t,e){var{doc:i,mirror:r,blockClass:n,blockSelector:o,needsMask:s,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:u,maskInputFn:c,dataURLOptions:d={},inlineImages:v,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:g=!1}=e,m=function(t,e){if(!e.hasNode(t))return;var i=e.getId(t);return 1===i?void 0:i}(i,r);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:h.Document,childNodes:[],compatMode:t.compatMode}:{type:h.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:h.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:m};case t.ELEMENT_NODE:return function(t,e){for(var i,{doc:r,blockClass:n,blockSelector:o,inlineStylesheet:s,maskInputOptions:a={},maskInputFn:l,dataURLOptions:u={},inlineImages:c,recordCanvas:d,keepIframeSrcFn:v,newlyAddedElement:f=!1,rootId:p}=e,g=function(t,e,i){try{if("string"==typeof e){if(t.classList.contains(e))return!0}else for(var r=t.classList.length;r--;){var n=t.classList[r];if(e.test(n))return!0}if(i)return t.matches(i)}catch(t){}return!1}(t,n,o),m=function(t){if(t instanceof HTMLFormElement)return"form";var e=T(t.tagName);return Z.test(e)?"div":e}(t),b={},_=t.attributes.length,w=0;w<_;w++){var C=t.attributes[w];X(m,C.name,C.value)||(b[C.name]=U(r,m,T(C.name),C.value))}if("link"===m&&s){var S=function(t){return null==t?void 0:t.href}(t);if(S){var x=k(r,S);if(!x&&S.includes(".css"))x=k(r,window.location.origin+"/"+S.replace(window.location.href,""));var R=null;x&&(R=I(x)),R&&(delete b.rel,delete b.href,b._cssText=R)}}if("style"===m&&t.sheet&&!(t.innerText||y.textContent(t)||"").trim().length){var E=I(t.sheet);E&&(b._cssText=E)}if("input"===m||"textarea"===m||"select"===m){var F=t.value,O=t.checked;"radio"!==b.type&&"checkbox"!==b.type&&"submit"!==b.type&&"button"!==b.type&&F?b.value=A({element:t,type:N(t),tagName:m,value:F,maskInputOptions:a,maskInputFn:l}):O&&(b.checked=O)}"option"===m&&(t.selected&&!a.select?b.selected=!0:delete b.selected);if("dialog"===m&&t.open)try{b.rr_open_mode=t.matches("dialog:modal")?"modal":"non-modal"}catch(t){b.rr_open_mode="modal",b.ph_rr_could_not_detect_modal=!0}if("canvas"===m&&d)if("2d"===t.__context)(function(t){var e=t.getContext("2d");if(!e)return!0;for(var i=0;i<t.width;i+=50)for(var r=0;r<t.height;r+=50){var n=e.getImageData,o=M in n?n[M]:n;if(new Uint32Array(o.call(e,i,r,Math.min(50,t.width-i),Math.min(50,t.height-r)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(b.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){var P=t.toDataURL(u.type,u.quality),L=r.createElement("canvas");L.width=t.width,L.height=t.height,P!==L.toDataURL(u.type,u.quality)&&(b.rr_dataURL=P)}if("img"===m&&c){D||(D=r.createElement("canvas"),B=D.getContext("2d"));var $=t,q=$.currentSrc||$.getAttribute("src")||"<unknown-src>",H=$.crossOrigin,V=()=>{$.removeEventListener("load",V);try{D.width=$.naturalWidth,D.height=$.naturalHeight,B.drawImage($,0,0),b.rr_dataURL=D.toDataURL(u.type,u.quality)}catch(t){if("anonymous"!==$.crossOrigin)return $.crossOrigin="anonymous",void($.complete&&0!==$.naturalWidth?V():$.addEventListener("load",V));console.warn("Cannot inline img src="+q+"! Error: "+t)}"anonymous"===$.crossOrigin&&(H?b.crossOrigin=H:$.removeAttribute("crossorigin"))};$.complete&&0!==$.naturalWidth?V():$.addEventListener("load",V)}if("audio"===m||"video"===m){var j=b;j.rr_mediaState=t.paused?"paused":"played",j.rr_mediaCurrentTime=t.currentTime,j.rr_mediaPlaybackRate=t.playbackRate,j.rr_mediaMuted=t.muted,j.rr_mediaLoop=t.loop,j.rr_mediaVolume=t.volume}f||(t.scrollLeft&&(b.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(b.rr_scrollTop=t.scrollTop));if(g){var{width:Y,height:G}=t.getBoundingClientRect();b={class:b.class,rr_width:Y+"px",rr_height:G+"px"}}"iframe"!==m||v(b.src)||(t.contentDocument||(b.rr_src=b.src),delete b.src);try{customElements.get(m)&&(i=!0)}catch(t){}return{type:h.Element,tagName:m,attributes:b,childNodes:[],isSVG:W(t)||void 0,needBlock:g,rootId:p,isCustom:i}}(t,{doc:i,blockClass:n,blockSelector:o,inlineStylesheet:a,maskInputOptions:l,maskInputFn:c,dataURLOptions:d,inlineImages:v,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:g,rootId:m});case t.TEXT_NODE:return function(t,e){var i,{needsMask:r,maskTextFn:n,rootId:o}=e,s=y.parentNode(t),a=s&&s.tagName,l=y.textContent(t),u="STYLE"===a||void 0,c="SCRIPT"===a||void 0;if(u&&l){try{t.nextSibling||t.previousSibling||(null==(i=s.sheet)?void 0:i.cssRules)&&(l=I(s.sheet))}catch(e){console.warn("Cannot get CSS styles from text's parentNode. Error: "+e,t)}l=L(l,z(e.doc))}c&&(l="SCRIPT_PLACEHOLDER");!u&&!c&&l&&r&&(l=n?n(l,y.parentElement(t)):l.replace(/[\S]/g,"*"));return{type:h.Text,textContent:l||"",isStyle:u,rootId:o}}(t,{doc:i,needsMask:s,maskTextFn:u,rootId:m});case t.CDATA_SECTION_NODE:return{type:h.CDATA,textContent:"",rootId:m};case t.COMMENT_NODE:return{type:h.Comment,textContent:y.textContent(t)||"",rootId:m};default:return!1}}function tt(t){return null==t?"":t.toLowerCase()}function et(t,e){var{doc:i,mirror:r,blockClass:n,blockSelector:o,maskTextClass:s,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:c={},maskTextFn:d,maskInputFn:v,slimDOMOptions:f,dataURLOptions:p={},inlineImages:g=!1,recordCanvas:m=!1,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:S=5e3,onStylesheetLoad:k,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:A=(()=>!1),newlyAddedElement:T=!1}=e,{needsMask:M}=e,{preserveWhiteSpace:N=!0}=e;M||(M=K(t,s,a,void 0===M));var E,F=Q(t,{doc:i,mirror:r,blockClass:n,blockSelector:o,needsMask:M,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:v,dataURLOptions:p,inlineImages:g,recordCanvas:m,keepIframeSrcFn:A,newlyAddedElement:T});if(!F)return console.warn(t,"not serialized"),null;E=r.hasNode(t)?r.getId(t):!function(t,e){if(e.comment&&t.type===h.Comment)return!0;if(t.type===h.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&"js"===R(t.attributes.href)))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(tt(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===tt(t.attributes.name)||"icon"===tt(t.attributes.rel)||"apple-touch-icon"===tt(t.attributes.rel)||"shortcut icon"===tt(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&tt(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(tt(t.attributes.property).match(/^(og|twitter|fb):/)||tt(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===tt(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===tt(t.attributes.name)||"googlebot"===tt(t.attributes.name)||"bingbot"===tt(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===tt(t.attributes.name)||"generator"===tt(t.attributes.name)||"framework"===tt(t.attributes.name)||"publisher"===tt(t.attributes.name)||"progid"===tt(t.attributes.name)||tt(t.attributes.property).match(/^article:/)||tt(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===tt(t.attributes.name)||"yandex-verification"===tt(t.attributes.name)||"csrf-token"===tt(t.attributes.name)||"p:domain_verify"===tt(t.attributes.name)||"verify-v1"===tt(t.attributes.name)||"verification"===tt(t.attributes.name)||"shopify-checkout-api-token"===tt(t.attributes.name)))return!0}}return!1}(F,f)&&(N||F.type!==h.Text||F.isStyle||F.textContent.replace(/^\s+|\s+$/gm,"").length)?H():q;var O=Object.assign(F,{id:E});if(r.add(t,O),E===q)return null;b&&b(t);var P=!l;if(O.type===h.Element){P=P&&!O.needBlock,delete O.needBlock;var L=y.shadowRoot(t);L&&C(L)&&(O.isShadowHost=!0)}if((O.type===h.Document||O.type===h.Element)&&P){f.headWhitespace&&O.type===h.Element&&"head"===O.tagName&&(N=!1);var D={doc:i,mirror:r,blockClass:n,blockSelector:o,needsMask:M,maskTextClass:s,maskTextSelector:a,skipChild:l,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:v,slimDOMOptions:f,dataURLOptions:p,inlineImages:g,recordCanvas:m,preserveWhiteSpace:N,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:S,onStylesheetLoad:k,stylesheetLoadTimeout:x,keepIframeSrcFn:A};if(O.type===h.Element&&"textarea"===O.tagName&&void 0!==O.attributes.value);else for(var B of Array.from(y.childNodes(t))){var $=et(B,D);$&&O.childNodes.push($)}var Z=null;if(_(t)&&(Z=y.shadowRoot(t)))for(var V of Array.from(y.childNodes(Z))){var j=et(V,D);j&&(C(Z)&&(j.isShadow=!0),O.childNodes.push(j))}}var Y=y.parentNode(t);return Y&&w(Y)&&C(Y)&&(O.isShadow=!0),O.type===h.Element&&"iframe"===O.tagName&&function(t,e,i){var r=t.contentWindow;if(r){var n,o=!1;try{n=r.document.readyState}catch(t){return}if("complete"===n){var s="about:blank";if(r.location.href!==s||t.src===s||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}else{var a=setTimeout((()=>{o||(e(),o=!0)}),i);t.addEventListener("load",(()=>{clearTimeout(a),o=!0,e()}))}}}(t,(()=>{var e=t.contentDocument;if(e&&I){var i=et(e,{doc:e,mirror:r,blockClass:n,blockSelector:o,needsMask:M,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:v,slimDOMOptions:f,dataURLOptions:p,inlineImages:g,recordCanvas:m,preserveWhiteSpace:N,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:S,onStylesheetLoad:k,stylesheetLoadTimeout:x,keepIframeSrcFn:A});i&&I(t,i)}}),S),O.type===h.Element&&"link"===O.tagName&&"string"==typeof O.attributes.rel&&("stylesheet"===O.attributes.rel||"preload"===O.attributes.rel&&"string"==typeof O.attributes.href&&"css"===R(O.attributes.href))&&function(t,e,i){var r,n=!1;try{r=t.sheet}catch(t){return}if(!r){var o=setTimeout((()=>{n||(e(),n=!0)}),i);t.addEventListener("load",(()=>{clearTimeout(o),n=!0,e()}))}}(t,(()=>{if(k){var e=et(t,{doc:i,mirror:r,blockClass:n,blockSelector:o,needsMask:M,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:d,maskInputFn:v,slimDOMOptions:f,dataURLOptions:p,inlineImages:g,recordCanvas:m,preserveWhiteSpace:N,onSerialize:b,onIframeLoad:I,iframeLoadTimeout:S,onStylesheetLoad:k,stylesheetLoadTimeout:x,keepIframeSrcFn:A});e&&k(t,e)}}),x),O}let it=class t{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){for(var t=[],e=this.firstChild;e;)t.push(e),e=e.nextSibling;return t}contains(e){if(!(e instanceof t))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,e){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var rt={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},nt={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]};var ot={};function st(t){if(ot[t])return ot[t];var e=function(t){var e,i=null==globalThis||null==(e=globalThis.Zone)||null==e.__symbol__?void 0:e.__symbol__(t);return i&&globalThis[i]?globalThis[i]:void 0}(t)||globalThis[t],i=e.prototype,r=t in rt?rt[t]:void 0,n=Boolean(r&&r.every((t=>{var e,r;return Boolean(null==(r=null==(e=Object.getOwnPropertyDescriptor(i,t))?void 0:e.get)?void 0:r.toString().includes("[native code]"))}))),o=t in nt?nt[t]:void 0,s=Boolean(o&&o.every((t=>{var e;return"function"==typeof i[t]&&(null==(e=i[t])?void 0:e.toString().includes("[native code]"))})));if(n&&s)return ot[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var u=l[t].prototype;return document.body.removeChild(a),u?ot[t]=u:i}catch(t){return i}}var at={};function lt(t,e,i){var r,n=t+"."+String(i);if(at[n])return at[n].call(e);var o=st(t),s=null==(r=Object.getOwnPropertyDescriptor(o,i))?void 0:r.get;return s?(at[n]=s,s.call(e)):e[i]}var ut={};function ht(t,e,i){var r=t+"."+String(i);if(ut[r])return ut[r].bind(e);var n=st(t)[i];return"function"!=typeof n?e[i]:(ut[r]=n,n.bind(e))}function ct(){return st("MutationObserver").constructor}var dt={childNodes:function(t){return lt("Node",t,"childNodes")},parentNode:function(t){return lt("Node",t,"parentNode")},parentElement:function(t){return lt("Node",t,"parentElement")},textContent:function(t){return lt("Node",t,"textContent")},contains:function(t,e){return ht("Node",t,"contains")(e)},getRootNode:function(t){return ht("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?lt("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?lt("Element",t,"shadowRoot"):null},querySelector:function(t,e){return lt("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return lt("Element",t,"querySelectorAll")(e)},mutationObserver:ct};function vt(t,e,i){void 0===i&&(i=document);var r={capture:!0,passive:!0};return i.addEventListener(t,e,r),()=>i.removeEventListener(t,e,r)}var ft="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",pt={map:{},getId:()=>(console.error(ft),-1),getNode:()=>(console.error(ft),null),removeNodeFromMap(){console.error(ft)},has:()=>(console.error(ft),!1),reset(){console.error(ft)}};function gt(t,e,i){void 0===i&&(i={});var r=null,n=0;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=Date.now();n||!1!==i.leading||(n=l);var u=e-(l-n),h=this;u<=0||u>e?(r&&(clearTimeout(r),r=null),n=l,t.apply(h,s)):r||!1===i.trailing||(r=setTimeout((()=>{n=!1===i.leading?0:Date.now(),r=null,t.apply(h,s)}),u))}}function mt(t,e,i,r,n){void 0===n&&(n=window);var o=n.Object.getOwnPropertyDescriptor(t,e);return n.Object.defineProperty(t,e,r?i:{set(t){setTimeout((()=>{i.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>mt(t,e,o||{},!0)}function bt(t,e,i){try{if(!(e in t))return()=>{};var r=t[e],n=i(r);return"function"==typeof n&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=n,()=>{t[e]=r}}catch(t){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(pt=new Proxy(pt,{get:(t,e,i)=>("map"===e&&console.error(ft),Reflect.get(t,e,i))}));var yt=Date.now;function _t(t){var e,i,r,n,o=t.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(e=dt.parentElement(o.body))?void 0:e.scrollLeft)||(null==(i=null==o?void 0:o.body)?void 0:i.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(r=dt.parentElement(o.body))?void 0:r.scrollTop)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollTop)||0}}function wt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ct(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function It(t){return t?t.nodeType===t.ELEMENT_NODE?t:dt.parentElement(t):null}function St(t,e,i,r){if(!t)return!1;var n=It(t);if(!n)return!1;try{if("string"==typeof e){if(n.classList.contains(e))return!0;if(r&&null!==n.closest("."+e))return!0}else if(J(n,e,r))return!0}catch(t){}if(i){if(n.matches(i))return!0;if(r&&null!==n.closest(i))return!0}return!1}function kt(t,e,i){return!("TITLE"!==t.tagName||!i.headTitleMutations)||e.getId(t)===q}function xt(t,e){if(w(t))return!1;var i=e.getId(t);if(!e.has(i))return!0;var r=dt.parentNode(t);return(!r||r.nodeType!==t.DOCUMENT_NODE)&&(!r||xt(r,e))}function At(t){return Boolean(t.changedTouches)}function Tt(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function Mt(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function Nt(t){return!!t&&(t instanceof it&&"shadowRoot"in t?Boolean(t.shadowRoot):Boolean(dt.shadowRoot(t)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(yt=()=>(new Date).getTime());let Rt=class{constructor(){a(this,"id",1),a(this,"styleIDMap",new WeakMap),a(this,"idStyleMap",new Map)}getId(t){var e;return null!==(e=this.styleIDMap.get(t))&&void 0!==e?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){return this.has(t)?this.getId(t):(i=void 0===e?this.id++:e,this.styleIDMap.set(t,i),this.idStyleMap.set(i,t),i);var i}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Et(t){var e,i=null;return"getRootNode"in t&&(null==(e=dt.getRootNode(t))?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&dt.host(dt.getRootNode(t))&&(i=dt.host(dt.getRootNode(t))),i}function Ft(t){var e=t.ownerDocument;if(!e)return!1;var i=function(t){for(var e,i=t;e=Et(i);)i=e;return i}(t);return dt.contains(e,i)}function Ot(t){var e=t.ownerDocument;return!!e&&(dt.contains(e,t)||Ft(t))}var Pt=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Pt||{}),Lt=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Lt||{}),Dt=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Dt||{}),Bt=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Bt||{}),$t=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))($t||{}),Zt=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Zt||{});function qt(t){return"__ln"in t}class Ht{constructor(){a(this,"length",0),a(this,"head",null),a(this,"tail",null)}get(t){if(t>=this.length)throw new Error("Position outside of list range");for(var e=this.head,i=0;i<t;i++)e=(null==e?void 0:e.next)||null;return e}addNode(t){var e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&qt(t.previousSibling)){var i=t.previousSibling.__ln.next;e.next=i,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,i&&(i.previous=e)}else if(t.nextSibling&&qt(t.nextSibling)&&t.nextSibling.__ln.previous){var r=t.nextSibling.__ln.previous;e.previous=r,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,r&&(r.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(t){var e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}var Vt,jt=(t,e)=>t+"@"+e;class Yt{constructor(){a(this,"frozen",!1),a(this,"locked",!1),a(this,"texts",[]),a(this,"attributes",[]),a(this,"attributeMap",new WeakMap),a(this,"removes",[]),a(this,"mapRemoves",[]),a(this,"movedMap",{}),a(this,"addedSet",new Set),a(this,"movedSet",new Set),a(this,"droppedSet",new Set),a(this,"mutationCb"),a(this,"blockClass"),a(this,"blockSelector"),a(this,"maskTextClass"),a(this,"maskTextSelector"),a(this,"inlineStylesheet"),a(this,"maskInputOptions"),a(this,"maskTextFn"),a(this,"maskInputFn"),a(this,"keepIframeSrcFn"),a(this,"recordCanvas"),a(this,"inlineImages"),a(this,"slimDOMOptions"),a(this,"dataURLOptions"),a(this,"doc"),a(this,"mirror"),a(this,"iframeManager"),a(this,"stylesheetManager"),a(this,"shadowDomManager"),a(this,"canvasManager"),a(this,"processedNodeManager"),a(this,"unattachedDoc"),a(this,"processMutations",(t=>{t.forEach(this.processMutation),this.emit()})),a(this,"emit",(()=>{if(!this.frozen&&!this.locked){for(var t=[],e=new Set,i=new Ht,r=t=>{for(var e=t,i=q;i===q;)i=(e=e&&e.nextSibling)&&this.mirror.getId(e);return i},n=n=>{var o=dt.parentNode(n);if(o&&Ot(n)&&"TEXTAREA"!==o.tagName){var s=w(o)?this.mirror.getId(Et(n)):this.mirror.getId(o),a=r(n);if(-1===s||-1===a)return i.addNode(n);var l=et(n,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{Tt(t,this.mirror)&&this.iframeManager.addIframe(t),Mt(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),Nt(n)&&this.shadowDomManager.addShadowRoot(dt.shadowRoot(n),this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});l&&(t.push({parentId:s,nextId:a,node:l}),e.add(l.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var o of this.movedSet)Wt(this.removes,o,this.mirror)&&!this.movedSet.has(dt.parentNode(o))||n(o);for(var s of this.addedSet)zt(this.droppedSet,s)||Wt(this.removes,s,this.mirror)?zt(this.movedSet,s)?n(s):this.droppedSet.add(s):n(s);for(var a=null;i.length;){var l=null;if(a){var u=this.mirror.getId(dt.parentNode(a.value)),h=r(a.value);-1!==u&&-1!==h&&(l=a)}if(!l)for(var c=i.tail;c;){var d=c;if(c=c.previous,d){var v=this.mirror.getId(dt.parentNode(d.value));if(-1===r(d.value))continue;if(-1!==v){l=d;break}var f=d.value,p=dt.parentNode(f);if(p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var g=dt.host(p);if(-1!==this.mirror.getId(g)){l=d;break}}}}if(!l){for(;i.head;)i.removeNode(i.head.value);break}a=l.previous,i.removeNode(l.value),n(l.value)}var m={texts:this.texts.map((t=>{var e=t.node,i=dt.parentNode(e);return i&&"TEXTAREA"===i.tagName&&this.genTextAreaValueMutation(i),{id:this.mirror.getId(e),value:t.value}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>{var{attributes:e}=t;if("string"==typeof e.style){var i=JSON.stringify(t.styleDiff),r=JSON.stringify(t._unchangedStyles);i.length<e.style.length&&(i+r).split("var(").length===e.style.split("var(").length&&(e.style=t.styleDiff)}return{id:this.mirror.getId(t.node),attributes:e}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(m.texts.length||m.attributes.length||m.removes.length||m.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(m))}})),a(this,"genTextAreaValueMutation",(t=>{var e=this.attributeMap.get(t);e||(e={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(e),this.attributeMap.set(t,e)),e.attributes.value=Array.from(dt.childNodes(t),(t=>dt.textContent(t)||"")).join("")})),a(this,"processMutation",(t=>{if(!kt(t.target,this.mirror,this.slimDOMOptions))switch(t.type){case"characterData":var e=dt.textContent(t.target);St(t.target,this.blockClass,this.blockSelector,!1)||e===t.oldValue||this.texts.push({value:K(t.target,this.maskTextClass,this.maskTextSelector,!0)&&e?this.maskTextFn?this.maskTextFn(e,It(t.target)):e.replace(/[\S]/g,"*"):e,node:t.target});break;case"attributes":var i=t.target,r=t.attributeName,n=t.target.getAttribute(r);if("value"===r){var o=N(i);n=A({element:i,maskInputOptions:this.maskInputOptions,tagName:i.tagName,type:o,value:n,maskInputFn:this.maskInputFn})}if(St(t.target,this.blockClass,this.blockSelector,!1)||n===t.oldValue)return;var s=this.attributeMap.get(t.target);if("IFRAME"===i.tagName&&"src"===r&&!this.keepIframeSrcFn(n)){if(i.contentDocument)return;r="rr_src"}if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),"type"===r&&"INPUT"===i.tagName&&"password"===(t.oldValue||"").toLowerCase()&&i.setAttribute("data-rr-is-password","true"),!X(i.tagName,r))if(s.attributes[r]=U(this.doc,T(i.tagName),T(r),n),"style"===r){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}var a=this.unattachedDoc.createElement("span");for(var l of(t.oldValue&&a.setAttribute("style",t.oldValue),Array.from(i.style))){var u=i.style.getPropertyValue(l),h=i.style.getPropertyPriority(l);u!==a.style.getPropertyValue(l)||h!==a.style.getPropertyPriority(l)?s.styleDiff[l]=""===h?u:[u,h]:s._unchangedStyles[l]=[u,h]}for(var c of Array.from(a.style))""===i.style.getPropertyValue(c)&&(s.styleDiff[c]=!1)}else"open"===r&&"DIALOG"===i.tagName&&(i.matches("dialog:modal")?s.attributes.rr_open_mode="modal":s.attributes.rr_open_mode="non-modal");break;case"childList":if(St(t.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===t.target.tagName)return void this.genTextAreaValueMutation(t.target);t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{var i=this.mirror.getId(e),r=w(t.target)?this.mirror.getId(dt.host(t.target)):this.mirror.getId(t.target);St(t.target,this.blockClass,this.blockSelector,!1)||kt(e,this.mirror,this.slimDOMOptions)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(Gt(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===i||xt(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[jt(i,r)]?Gt(this.movedSet,e):this.removes.push({parentId:r,id:i,isShadow:!(!w(t.target)||!C(t.target))||void 0})),this.mapRemoves.push(e))}))}})),a(this,"genAdds",((t,e)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(kt(t,this.mirror,this.slimDOMOptions))return;this.movedSet.add(t);var i=null;e&&this.mirror.hasNode(e)&&(i=this.mirror.getId(e)),i&&-1!==i&&(this.movedMap[jt(this.mirror.getId(t),i)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);St(t,this.blockClass,this.blockSelector,!1)||(dt.childNodes(t).forEach((t=>this.genAdds(t))),Nt(t)&&dt.childNodes(dt.shadowRoot(t)).forEach((e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)})))}}))}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Gt(t,e){t.delete(e),dt.childNodes(e).forEach((e=>Gt(t,e)))}function Wt(t,e,i){return 0!==t.length&&function(t,e,i){var r=dt.parentNode(e),n=function(){var e=i.getId(r);if(t.some((t=>t.id===e)))return{v:!0};r=dt.parentNode(r)};for(;r;){var o=n();if("object"==typeof o)return o.v}return!1}(t,e,i)}function zt(t,e){return 0!==t.size&&Ut(t,e)}function Ut(t,e){var i=dt.parentNode(e);return!!i&&(!!t.has(i)||Ut(t,i))}var Xt=t=>{if(!Vt)return t;return function(){try{return t(...arguments)}catch(t){if(Vt&&!0===Vt(t))return;throw t}}},Jt=[];function Kt(t){try{if("composedPath"in t){var e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(t){}return t&&t.target}function Qt(t,e){var i=new Yt;Jt.push(i),i.init(t);var r=new(ct())(Xt(i.processMutations.bind(i)));return r.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function te(t){var{mouseInteractionCb:e,doc:r,mirror:n,blockClass:o,blockSelector:s,sampling:a}=t;if(!1===a.mouseInteraction)return()=>{};var l=!0===a.mouseInteraction||void 0===a.mouseInteraction?{}:a.mouseInteraction,u=[],h=null;return Object.keys(Dt).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==l[t])).forEach((t=>{var a=T(t),l=(t=>r=>{var a=Kt(r);if(!St(a,o,s,!0)){var l=null,u=t;if("pointerType"in r){switch(r.pointerType){case"mouse":l=Bt.Mouse;break;case"touch":l=Bt.Touch;break;case"pen":l=Bt.Pen}l===Bt.Touch?Dt[t]===Dt.MouseDown?u="TouchStart":Dt[t]===Dt.MouseUp&&(u="TouchEnd"):Bt.Pen}else At(r)&&(l=Bt.Touch);null!==l?(h=l,(u.startsWith("Touch")&&l===Bt.Touch||u.startsWith("Mouse")&&l===Bt.Mouse)&&(l=null)):Dt[t]===Dt.Click&&(l=h,h=null);var c=At(r)?r.changedTouches[0]:r;if(c){var d=n.getId(a),{clientX:v,clientY:f}=c;Xt(e)(i({type:Dt[u],id:d,x:v,y:f},null!==l&&{pointerType:l}))}}})(t);if(window.PointerEvent)switch(Dt[t]){case Dt.MouseDown:case Dt.MouseUp:a=a.replace("mouse","pointer");break;case Dt.TouchStart:case Dt.TouchEnd:return}u.push(vt(a,l,r))})),Xt((()=>{u.forEach((t=>t()))}))}function ee(t){var{scrollCb:e,doc:i,mirror:r,blockClass:n,blockSelector:o,sampling:s}=t;return vt("scroll",Xt(gt(Xt((t=>{var s=Kt(t);if(s&&!St(s,n,o,!0)){var a=r.getId(s);if(s===i&&i.defaultView){var l=_t(i.defaultView);e({id:a,x:l.left,y:l.top})}else e({id:a,x:s.scrollLeft,y:s.scrollTop})}})),s.scroll||100)),i)}var ie=["INPUT","TEXTAREA","SELECT"],re=new WeakMap;function ne(t){return function(t,e){if(le("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||le("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||le("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||le("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){var i=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(i)}else if(t.parentStyleSheet){var r=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(r)}return e}(t,[])}function oe(t,e,i){var r,n;return t?(t.ownerNode?r=e.getId(t.ownerNode):n=i.getId(t),{styleId:n,id:r}):{}}function se(t,e){var i,r,n,{mirror:o,stylesheetManager:s}=t,a=null;a="#document"===e.nodeName?o.getId(e):o.getId(dt.host(e));var l="#document"===e.nodeName?null==(i=e.defaultView)?void 0:i.Document:null==(n=null==(r=e.ownerDocument)?void 0:r.defaultView)?void 0:n.ShadowRoot,u=(null==l?void 0:l.prototype)?Object.getOwnPropertyDescriptor(null==l?void 0:l.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&l&&u?(Object.defineProperty(e,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var t;return null==(t=u.get)?void 0:t.call(this)},set(t){var e,i=null==(e=u.set)?void 0:e.call(this,t);if(null!==a&&-1!==a)try{s.adoptStyleSheets(t,a)}catch(t){}return i}}),Xt((()=>{Object.defineProperty(e,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})}))):()=>{}}function ae(t,e){void 0===e&&(e={});var r,n=t.doc.defaultView;if(!n)return()=>{};!function(t,e){var{mutationCb:i,mousemoveCb:r,mouseInteractionCb:n,scrollCb:o,viewportResizeCb:s,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:u,styleDeclarationCb:h,canvasMutationCb:c,fontCb:d,selectionCb:v,customElementCb:f}=t;t.mutationCb=function(){e.mutation&&e.mutation(...arguments),i(...arguments)},t.mousemoveCb=function(){e.mousemove&&e.mousemove(...arguments),r(...arguments)},t.mouseInteractionCb=function(){e.mouseInteraction&&e.mouseInteraction(...arguments),n(...arguments)},t.scrollCb=function(){e.scroll&&e.scroll(...arguments),o(...arguments)},t.viewportResizeCb=function(){e.viewportResize&&e.viewportResize(...arguments),s(...arguments)},t.inputCb=function(){e.input&&e.input(...arguments),a(...arguments)},t.mediaInteractionCb=function(){e.mediaInteaction&&e.mediaInteaction(...arguments),l(...arguments)},t.styleSheetRuleCb=function(){e.styleSheetRule&&e.styleSheetRule(...arguments),u(...arguments)},t.styleDeclarationCb=function(){e.styleDeclaration&&e.styleDeclaration(...arguments),h(...arguments)},t.canvasMutationCb=function(){e.canvasMutation&&e.canvasMutation(...arguments),c(...arguments)},t.fontCb=function(){e.font&&e.font(...arguments),d(...arguments)},t.selectionCb=function(){e.selection&&e.selection(...arguments),v(...arguments)},t.customElementCb=function(){e.customElement&&e.customElement(...arguments),f(...arguments)}}(t,e),t.recordDOM&&(r=Qt(t,t.doc));var o=function(t){var{mousemoveCb:e,sampling:i,doc:r,mirror:n}=t;if(!1===i.mousemove)return()=>{};var o,s="number"==typeof i.mousemove?i.mousemove:50,a="number"==typeof i.mousemoveCallback?i.mousemoveCallback:500,l=[],u=gt(Xt((t=>{var i=Date.now()-o;e(l.map((t=>(t.timeOffset-=i,t))),t),l=[],o=null})),a),h=Xt(gt(Xt((t=>{var e=Kt(t),{clientX:i,clientY:r}=At(t)?t.changedTouches[0]:t;o||(o=yt()),l.push({x:i,y:r,id:n.getId(e),timeOffset:yt()-o}),u("undefined"!=typeof DragEvent&&t instanceof DragEvent?Lt.Drag:t instanceof MouseEvent?Lt.MouseMove:Lt.TouchMove)})),s,{trailing:!1})),c=[vt("mousemove",h,r),vt("touchmove",h,r),vt("drag",h,r)];return Xt((()=>{c.forEach((t=>t()))}))}(t),s=te(t),a=ee(t),l=function(t,e){var{viewportResizeCb:i}=t,{win:r}=e,n=-1,o=-1;return vt("resize",Xt(gt(Xt((()=>{var t=wt(),e=Ct();n===t&&o===e||(i({width:Number(e),height:Number(t)}),n=t,o=e)})),200)),r)}(t,{win:n}),u=function(t){var{inputCb:e,doc:r,mirror:n,blockClass:o,blockSelector:s,ignoreClass:a,ignoreSelector:l,maskInputOptions:u,maskInputFn:h,sampling:c,userTriggeredOnInput:d}=t;function v(t){var e=Kt(t),i=t.isTrusted,n=e&&e.tagName;if(e&&"OPTION"===n&&(e=dt.parentElement(e)),e&&n&&!(ie.indexOf(n)<0)&&!St(e,o,s,!0)&&!(e.classList.contains(a)||l&&e.matches(l))){var c=e.value,v=!1,p=N(e)||"";"radio"===p||"checkbox"===p?v=e.checked:(u[n.toLowerCase()]||u[p])&&(c=A({element:e,maskInputOptions:u,tagName:n,type:p,value:c,maskInputFn:h})),f(e,d?{text:c,isChecked:v,userTriggered:i}:{text:c,isChecked:v});var g=e.name;"radio"===p&&g&&v&&r.querySelectorAll('input[type="radio"][name="'+g+'"]').forEach((t=>{if(t!==e){var i=t.value;f(t,d?{text:i,isChecked:!v,userTriggered:!1}:{text:i,isChecked:!v})}}))}}function f(t,r){var o=re.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){re.set(t,r);var s=n.getId(t);Xt(e)(i({},r,{id:s}))}}var p=("last"===c.input?["change"]:["input","change"]).map((t=>vt(t,Xt(v),r))),g=r.defaultView;if(!g)return()=>{p.forEach((t=>t()))};var m=g.Object.getOwnPropertyDescriptor(g.HTMLInputElement.prototype,"value"),b=[[g.HTMLInputElement.prototype,"value"],[g.HTMLInputElement.prototype,"checked"],[g.HTMLSelectElement.prototype,"value"],[g.HTMLTextAreaElement.prototype,"value"],[g.HTMLSelectElement.prototype,"selectedIndex"],[g.HTMLOptionElement.prototype,"selected"]];return m&&m.set&&p.push(...b.map((t=>mt(t[0],t[1],{set(){Xt(v)({target:this,isTrusted:!1})}},!1,g)))),Xt((()=>{p.forEach((t=>t()))}))}(t),h=function(t){var{mediaInteractionCb:e,blockClass:i,blockSelector:r,mirror:n,sampling:o,doc:s}=t,a=Xt((t=>gt(Xt((o=>{var s=Kt(o);if(s&&!St(s,i,r,!0)){var{currentTime:a,volume:l,muted:u,playbackRate:h,loop:c}=s;e({type:t,id:n.getId(s),currentTime:a,volume:l,muted:u,playbackRate:h,loop:c})}})),o.media||500))),l=[vt("play",a(Zt.Play),s),vt("pause",a(Zt.Pause),s),vt("seeked",a(Zt.Seeked),s),vt("volumechange",a(Zt.VolumeChange),s),vt("ratechange",a(Zt.RateChange),s)];return Xt((()=>{l.forEach((t=>t()))}))}(t),c=()=>{},d=()=>{},v=()=>{},f=()=>{};t.recordDOM&&(c=function(t,e){var{styleSheetRuleCb:i,mirror:r,stylesheetManager:n}=t,{win:o}=e;if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return()=>{};var s=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Xt(((t,e,o)=>{var[s,a]=o,{id:l,styleId:u}=oe(e,r,n.styleMirror);return(l&&-1!==l||u&&-1!==u)&&i({id:l,styleId:u,adds:[{rule:s,index:a}]}),t.apply(e,o)}))}),o.CSSStyleSheet.prototype.addRule=function(t,e,i){void 0===i&&(i=this.cssRules.length);var r=t+" { "+e+" }";return o.CSSStyleSheet.prototype.insertRule.apply(this,[r,i])};var a,l,u=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=new Proxy(u,{apply:Xt(((t,e,o)=>{var[s]=o,{id:a,styleId:l}=oe(e,r,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&i({id:a,styleId:l,removes:[{index:s}]}),t.apply(e,o)}))}),o.CSSStyleSheet.prototype.removeRule=function(t){return o.CSSStyleSheet.prototype.deleteRule.apply(this,[t])},o.CSSStyleSheet.prototype.replace&&(a=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:Xt(((t,e,o)=>{var[s]=o,{id:a,styleId:l}=oe(e,r,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&i({id:a,styleId:l,replace:s}),t.apply(e,o)}))})),o.CSSStyleSheet.prototype.replaceSync&&(l=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:Xt(((t,e,o)=>{var[s]=o,{id:a,styleId:l}=oe(e,r,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&i({id:a,styleId:l,replaceSync:s}),t.apply(e,o)}))}));var h={};ue("CSSGroupingRule")?h.CSSGroupingRule=o.CSSGroupingRule:(ue("CSSMediaRule")&&(h.CSSMediaRule=o.CSSMediaRule),ue("CSSConditionRule")&&(h.CSSConditionRule=o.CSSConditionRule),ue("CSSSupportsRule")&&(h.CSSSupportsRule=o.CSSSupportsRule));var c={};return Object.entries(h).forEach((t=>{var[e,o]=t;c[e]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(c[e].insertRule,{apply:Xt(((t,e,o)=>{var[s,a]=o,{id:l,styleId:u}=oe(e.parentStyleSheet,r,n.styleMirror);return(l&&-1!==l||u&&-1!==u)&&i({id:l,styleId:u,adds:[{rule:s,index:[...ne(e),a||0]}]}),t.apply(e,o)}))}),o.prototype.deleteRule=new Proxy(c[e].deleteRule,{apply:Xt(((t,e,o)=>{var[s]=o,{id:a,styleId:l}=oe(e.parentStyleSheet,r,n.styleMirror);return(a&&-1!==a||l&&-1!==l)&&i({id:a,styleId:l,removes:[{index:[...ne(e),s]}]}),t.apply(e,o)}))})})),Xt((()=>{o.CSSStyleSheet.prototype.insertRule=s,o.CSSStyleSheet.prototype.deleteRule=u,a&&(o.CSSStyleSheet.prototype.replace=a),l&&(o.CSSStyleSheet.prototype.replaceSync=l),Object.entries(h).forEach((t=>{var[e,i]=t;i.prototype.insertRule=c[e].insertRule,i.prototype.deleteRule=c[e].deleteRule}))}))}(t,{win:n}),d=se(t,t.doc),v=function(t,e){var{styleDeclarationCb:i,mirror:r,ignoreCSSAttributes:n,stylesheetManager:o}=t,{win:s}=e,a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:Xt(((t,e,s)=>{var l,[u,h,c]=s;if(n.has(u))return a.apply(e,[u,h,c]);var{id:d,styleId:v}=oe(null==(l=e.parentRule)?void 0:l.parentStyleSheet,r,o.styleMirror);return(d&&-1!==d||v&&-1!==v)&&i({id:d,styleId:v,set:{property:u,value:h,priority:c},index:ne(e.parentRule)}),t.apply(e,s)}))});var l=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:Xt(((t,e,s)=>{var a,[u]=s;if(n.has(u))return l.apply(e,[u]);var{id:h,styleId:c}=oe(null==(a=e.parentRule)?void 0:a.parentStyleSheet,r,o.styleMirror);return(h&&-1!==h||c&&-1!==c)&&i({id:h,styleId:c,remove:{property:u},index:ne(e.parentRule)}),t.apply(e,s)}))}),Xt((()=>{s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=l}))}(t,{win:n}),t.collectFonts&&(f=function(t){var{fontCb:e,doc:i}=t,r=i.defaultView;if(!r)return()=>{};var n=[],o=new WeakMap,s=r.FontFace;r.FontFace=function(t,e,i){var r=new s(t,e,i);return o.set(r,{family:t,buffer:"string"!=typeof e,descriptors:i,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),r};var a=bt(i.fonts,"add",(function(t){return function(i){return setTimeout(Xt((()=>{var t=o.get(i);t&&(e(t),o.delete(i))})),0),t.apply(this,[i])}}));return n.push((()=>{r.FontFace=s})),n.push(a),Xt((()=>{n.forEach((t=>t()))}))}(t)));var p=function(t){var{doc:e,mirror:i,blockClass:r,blockSelector:n,selectionCb:o}=t,s=!0,a=Xt((()=>{var t=e.getSelection();if(!(!t||s&&(null==t?void 0:t.isCollapsed))){s=t.isCollapsed||!1;for(var a=[],l=t.rangeCount||0,u=0;u<l;u++){var h=t.getRangeAt(u),{startContainer:c,startOffset:d,endContainer:v,endOffset:f}=h;St(c,r,n,!0)||St(v,r,n,!0)||a.push({start:i.getId(c),startOffset:d,end:i.getId(v),endOffset:f})}o({ranges:a})}}));return a(),vt("selectionchange",a)}(t),g=function(t){var{doc:e,customElementCb:i}=t,r=e.defaultView;if(!r||!r.customElements)return()=>{};var n=bt(r.customElements,"define",(function(t){return function(e,r,n){try{i({define:{name:e}})}catch(t){console.warn("Custom element callback failed for "+e)}return t.apply(this,[e,r,n])}}));return n}(t),m=[];for(var b of t.plugins)m.push(b.observer(b.callback,n,b.options));return Xt((()=>{Jt.forEach((t=>t.reset())),null==r||r.disconnect(),o(),s(),a(),l(),u(),h(),c(),d(),v(),f(),p(),g(),m.forEach((t=>t()))}))}function le(t){return void 0!==window[t]}function ue(t){return Boolean(void 0!==window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class he{constructor(t){a(this,"iframeIdToRemoteIdMap",new WeakMap),a(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t}getId(t,e,i,r){var n=i||this.getIdToRemoteIdMap(t),o=r||this.getRemoteIdToIdMap(t),s=n.get(e);return s||(s=this.generateIdFn(),n.set(e,s),o.set(s,e)),s}getIds(t,e){var i=this.getIdToRemoteIdMap(t),r=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,i,r)))}getRemoteId(t,e,i){var r=i||this.getRemoteIdToIdMap(t);if("number"!=typeof e)return e;var n=r.get(e);return n||-1}getRemoteIds(t,e){var i=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,i)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){var e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){var e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}class ce{constructor(t){a(this,"iframes",new WeakMap),a(this,"crossOriginIframeMap",new WeakMap),a(this,"crossOriginIframeMirror",new he(H)),a(this,"crossOriginIframeStyleMirror"),a(this,"crossOriginIframeRootIdMap",new WeakMap),a(this,"mirror"),a(this,"mutationCb"),a(this,"wrappedEmit"),a(this,"loadListener"),a(this,"stylesheetManager"),a(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new he(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){var i,r;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(i=t.contentWindow)||i.addEventListener("message",this.handleMessage.bind(this))),null==(r=this.loadListener)||r.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){var e=t;if("rrweb"===e.data.type&&e.origin===e.data.origin&&t.source){var i=this.crossOriginIframeMap.get(t.source);if(i){var r=this.transformCrossOriginEvent(i,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}}}transformCrossOriginEvent(t,e){var i;switch(e.type){case Pt.FullSnapshot:this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t);var r=e.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(e.data.node,r),{timestamp:e.timestamp,type:Pt.IncrementalSnapshot,data:{source:Lt.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case Pt.Meta:case Pt.Load:case Pt.DomContentLoaded:return!1;case Pt.Plugin:return e;case Pt.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case Pt.IncrementalSnapshot:switch(e.data.source){case Lt.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t);var i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(e.node,i)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Lt.Drag:case Lt.TouchMove:case Lt.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case Lt.ViewportResize:return!1;case Lt.MediaInteraction:case Lt.MouseInteraction:case Lt.Scroll:case Lt.CanvasMutation:case Lt.Input:return this.replaceIds(e.data,t,["id"]),e;case Lt.StyleSheetRule:case Lt.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case Lt.Font:return e;case Lt.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case Lt.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),null==(i=e.data.styles)||i.forEach((e=>{this.replaceStyleIds(e,t,["styleId"])})),e}}return!1}replace(t,e,i,r){for(var n of r)(Array.isArray(e[n])||"number"==typeof e[n])&&(Array.isArray(e[n])?e[n]=t.getIds(i,e[n]):e[n]=t.getId(i,e[n]));return e}replaceIds(t,e,i){return this.replace(this.crossOriginIframeMirror,t,e,i)}replaceStyleIds(t,e,i){return this.replace(this.crossOriginIframeStyleMirror,t,e,i)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}patchRootIdOnNode(t,e){t.type===h.Document||t.rootId||(t.rootId=e),"childNodes"in t&&t.childNodes.forEach((t=>{this.patchRootIdOnNode(t,e)}))}}class de{constructor(t){a(this,"shadowDoms",new WeakSet),a(this,"mutationCb"),a(this,"scrollCb"),a(this,"bypassOptions"),a(this,"mirror"),a(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,e){if(C(t)&&!this.shadowDoms.has(t)){this.shadowDoms.add(t);var r=Qt(i({},this.bypassOptions,{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push((()=>r.disconnect())),this.restoreHandlers.push(ee(i({},this.bypassOptions,{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(dt.host(t))),this.restoreHandlers.push(se({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,e){var i=this;this.restoreHandlers.push(bt(t.prototype,"attachShadow",(function(t){return function(r){var n=t.call(this,r),o=dt.shadowRoot(this);return o&&Ot(this)&&i.addShadowRoot(o,e),n}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch(t){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fe="undefined"==typeof Uint8Array?[]:new Uint8Array(256),pe=0;pe<64;pe++)fe[ve.charCodeAt(pe)]=pe;var ge=new Map;var me=(t,e,i)=>{if(t&&(_e(t,e)||"object"==typeof t)){var r=function(t,e){var i=ge.get(t);return i||(i=new Map,ge.set(t,i)),i.has(e)||i.set(e,[]),i.get(e)}(i,t.constructor.name),n=r.indexOf(t);return-1===n&&(n=r.length,r.push(t)),n}};function be(t,e,i){if(t instanceof Array)return t.map((t=>be(t,e,i)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer)return{rr_type:t.constructor.name,base64:function(t){var e,i=new Uint8Array(t),r=i.length,n="";for(e=0;e<r;e+=3)n+=ve[i[e]>>2],n+=ve[(3&i[e])<<4|i[e+1]>>4],n+=ve[(15&i[e+1])<<2|i[e+2]>>6],n+=ve[63&i[e+2]];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n}(t)};if(t instanceof DataView)return{rr_type:t.constructor.name,args:[be(t.buffer,e,i),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){var r=t.constructor.name,{src:n}=t;return{rr_type:r,src:n}}if(t instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:t.toDataURL()}}return t instanceof ImageData?{rr_type:t.constructor.name,args:[be(t.data,e,i),t.width,t.height]}:_e(t,e)||"object"==typeof t?{rr_type:t.constructor.name,index:me(t,e,i)}:t}var ye=(t,e,i)=>t.map((t=>be(t,e,i))),_e=(t,e)=>{var i=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"==typeof e[t]));return Boolean(i.find((i=>t instanceof e[i])))};function we(t,e,i,r){var n=[];try{var o=bt(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(!St(this,e,i,!0)){var l=function(t){return"experimental-webgl"===t?"webgl":t}(n);if("__context"in this||(this.__context=l),r&&["webgl","webgl2"].includes(l))if(s[0]&&"object"==typeof s[0]){var u=s[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return t.apply(this,[n,...s])}}));n.push(o)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{n.forEach((t=>t()))}}function Ce(t,e,i,r,n,o){var s=[],a=Object.getOwnPropertyNames(t),l=function(a){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(a))return"continue";try{if("function"!=typeof t[a])return"continue";var l=bt(t,a,(function(t){return function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var h=t.apply(this,l);if(me(h,o,this),"tagName"in this.canvas&&!St(this.canvas,r,n,!0)){var c=ye(l,o,this),d={type:e,property:a,args:c};i(this.canvas,d)}return h}}));s.push(l)}catch(r){var u=mt(t,a,{set(t){i(this.canvas,{type:e,property:a,args:[t],setter:!0})}});s.push(u)}};for(var u of a)l(u);return s}var Ie,Se,ke,xe,Ae="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Te="undefined"!=typeof window&&window.Blob&&new Blob([(Ie=Ae,Uint8Array.from(atob(Ie),(t=>t.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});function Me(t){var e;try{if(!(e=Te&&(window.URL||window.webkitURL).createObjectURL(Te)))throw"";var i=new Worker(e,{name:null==t?void 0:t.name});return i.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(e)})),i}catch(e){return new Worker("data:text/javascript;base64,"+Ae,{name:null==t?void 0:t.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}class Ne{constructor(t){a(this,"pendingCanvasMutations",new Map),a(this,"rafStamps",{latestId:0,invokeId:null}),a(this,"mirror"),a(this,"mutationCb"),a(this,"resetObservers"),a(this,"frozen",!1),a(this,"locked",!1),a(this,"processMutation",((t,e)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)}));var{sampling:e="all",win:i,blockClass:r,blockSelector:n,recordCanvas:o,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,o&&"all"===e&&this.initCanvasMutationObserver(i,r,n),o&&"number"==typeof e&&this.initCanvasFPSObserver(e,i,r,n,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,i,r,n,o){var s=this,a=we(i,r,n,!0),l=new Map,u=new Me;u.onmessage=t=>{var{id:e}=t.data;if(l.set(e,!1),"base64"in t.data){var{base64:i,type:r,width:n,height:o}=t.data;this.mutationCb({id:e,type:$t["2D"],commands:[{property:"clearRect",args:[0,0,n,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:r}]},0,0]}]})}};var h,c=1e3/t,d=0,v=t=>{var a,f;d&&t-d<c?h=requestAnimationFrame(v):(d=t,(a=[],f=t=>{t.querySelectorAll("canvas").forEach((t=>{St(t,r,n,!0)||a.push(t)})),t.querySelectorAll("*").forEach((t=>{t.shadowRoot&&f(t.shadowRoot)}))},f(i.document),a).forEach(function(){var t=e((function*(t){var e,i=s.mirror.getId(t);if(!l.get(i)&&0!==t.width&&0!==t.height){if(l.set(i,!0),["webgl","webgl2"].includes(t.__context)){var r=t.getContext(t.__context);!1===(null==(e=null==r?void 0:r.getContextAttributes())?void 0:e.preserveDrawingBuffer)&&r.clear(r.COLOR_BUFFER_BIT)}var n=t.clientWidth||t.width,a=t.clientHeight||t.height,h=yield createImageBitmap(t,{resizeWidth:n,resizeHeight:a});u.postMessage({id:i,bitmap:h,width:n,height:a,dataURLOptions:o.dataURLOptions},[h])}}));return function(e){return t.apply(this,arguments)}}()),h=requestAnimationFrame(v))};h=requestAnimationFrame(v),this.resetObservers=()=>{a(),cancelAnimationFrame(h)}}initCanvasMutationObserver(t,e,i){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var r=we(t,e,i,!1),n=function(t,e,i,r){var n=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype),s=function(o){try{if("function"!=typeof e.CanvasRenderingContext2D.prototype[o])return"continue";var s=bt(e.CanvasRenderingContext2D.prototype,o,(function(n){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return St(this.canvas,i,r,!0)||setTimeout((()=>{var i=ye(a,e,this);t(this.canvas,{type:$t["2D"],property:o,args:i})}),0),n.apply(this,a)}}));n.push(s)}catch(i){var a=mt(e.CanvasRenderingContext2D.prototype,o,{set(e){t(this.canvas,{type:$t["2D"],property:o,args:[e],setter:!0})}});n.push(a)}};for(var a of o)s(a);return()=>{n.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,i),o=function(t,e,i,r){var n=[];return n.push(...Ce(e.WebGLRenderingContext.prototype,$t.WebGL,t,i,r,e)),void 0!==e.WebGL2RenderingContext&&n.push(...Ce(e.WebGL2RenderingContext.prototype,$t.WebGL2,t,i,r,e)),()=>{n.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,i);this.resetObservers=()=>{r(),n(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){var t=e=>{this.rafStamps.latestId=e,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{var i=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,i)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(!this.frozen&&!this.locked){var i=this.pendingCanvasMutations.get(t);if(i&&-1!==e){var n=i.map((t=>r(t,o))),{type:s}=i[0];this.mutationCb({id:e,type:s,commands:n}),this.pendingCanvasMutations.delete(t)}}}}class Re{constructor(t){a(this,"trackedLinkElements",new WeakSet),a(this,"mutationCb"),a(this,"adoptedStyleSheetCb"),a(this,"styleMirror",new Rt),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){var i=this;if(0!==t.length){var r={id:e,styleIds:[]},n=[],o=function(t){var e=void 0;i.styleMirror.has(t)?e=i.styleMirror.getId(t):(e=i.styleMirror.add(t),n.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,i)=>({rule:S(e,t.href),index:i})))})),r.styleIds.push(e)};for(var s of t)o(s);n.length>0&&(r.styles=n),this.adoptedStyleSheetCb(r)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Ee{constructor(){a(this,"nodeMap",new WeakMap),a(this,"active",!1)}inOtherBuffer(t,e){var i=this.nodeMap.get(t);return i&&Array.from(i).some((t=>t!==e))}add(t,e){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(e))}destroy(){}}var Fe=!1;try{if(2!==Array.from([1],(t=>2*t))[0]){var Oe=document.createElement("iframe");document.body.appendChild(Oe),Array.from=(null==(n=Oe.contentWindow)?void 0:n.Array.from)||Array.from,document.body.removeChild(Oe)}}catch(t){console.debug("Unable to override Array.from",t)}var Pe,Le,De=new x;function Be(t){void 0===t&&(t={});var{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskTextClass:u="rr-mask",maskTextSelector:h=null,inlineStylesheet:c=!0,maskAllInputs:d,maskInputOptions:v,slimDOMOptions:f,maskInputFn:p,maskTextFn:g,hooks:m,packFn:b,sampling:y={},dataURLOptions:_={},mousemoveWait:w,recordDOM:C=!0,recordCanvas:I=!1,recordCrossOriginIframes:S=!1,recordAfter:k=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:A=!1,collectFonts:T=!1,inlineImages:M=!1,plugins:N,keepIframeSrcFn:R=(()=>!1),ignoreCSSAttributes:E=new Set([]),errorHandler:F}=t;Vt=F;var O=!S||window.parent===window,P=!1;if(!O)try{window.parent.document&&(P=!1)}catch(t){P=!0}if(O&&!e)throw new Error("emit function is required");if(!O&&!P)return()=>{};void 0!==w&&void 0===y.mousemove&&(y.mousemove=w),De.reset();var L,D=!0===d?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==v?v:{password:!0},B=!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===f,headMetaDescKeywords:"all"===f,headTitleMutations:"all"===f}:f||{};!function(t){void 0===t&&(t=window),"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();var $=0,Z=t=>{for(var e of N||[])e.eventProcessor&&(t=e.eventProcessor(t));return b&&!P&&(t=b(t)),t};Se=(t,i)=>{var o,s=t;if(s.timestamp=yt(),!(null==(o=Jt[0])?void 0:o.isFrozen())||s.type===Pt.FullSnapshot||s.type===Pt.IncrementalSnapshot&&s.data.source===Lt.Mutation||Jt.forEach((t=>t.unfreeze())),O)null==e||e(Z(s),i);else if(P){var a={type:"rrweb",event:Z(s),origin:window.location.origin,isCheckout:i};window.parent.postMessage(a,"*")}if(s.type===Pt.FullSnapshot)L=s,$=0;else if(s.type===Pt.IncrementalSnapshot){if(s.data.source===Lt.Mutation&&s.data.isAttachIframe)return;$++;var l=n&&$>=n,u=r&&s.timestamp-L.timestamp>r;(l||u)&&ke(!0)}};var q=t=>{Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.Mutation},t)})},H=t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.Scroll},t)}),V=t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.CanvasMutation},t)}),j=new Re({mutationCb:q,adoptedStyleSheetCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.AdoptedStyleSheet},t)})}),Y=new ce({mirror:De,mutationCb:q,stylesheetManager:j,recordCrossOriginIframes:S,wrappedEmit:Se});for(var G of N||[])G.getMirror&&G.getMirror({nodeMirror:De,crossOriginIframeMirror:Y.crossOriginIframeMirror,crossOriginIframeStyleMirror:Y.crossOriginIframeStyleMirror});var W=new Ee;xe=new Ne({recordCanvas:I,mutationCb:V,win:window,blockClass:o,blockSelector:s,mirror:De,sampling:y.canvas,dataURLOptions:_});var z=new de({mutationCb:q,scrollCb:H,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:u,maskTextSelector:h,inlineStylesheet:c,maskInputOptions:D,dataURLOptions:_,maskTextFn:g,maskInputFn:p,recordCanvas:I,inlineImages:M,sampling:y,slimDOMOptions:B,iframeManager:Y,stylesheetManager:j,canvasManager:xe,keepIframeSrcFn:R,processedNodeManager:W},mirror:De});ke=function(t){if(void 0===t&&(t=!1),C){Se({type:Pt.Meta,data:{href:window.location.href,width:Ct(),height:wt()}},t),j.reset(),z.init(),Jt.forEach((t=>t.lock()));var e=function(t,e){var{mirror:i=new x,blockClass:r="rr-block",blockSelector:n=null,maskTextClass:o="rr-mask",maskTextSelector:s=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:u=!1,maskAllInputs:h=!1,maskTextFn:c,maskInputFn:d,slimDOM:v=!1,dataURLOptions:f,preserveWhiteSpace:p,onSerialize:g,onIframeLoad:m,iframeLoadTimeout:b,onStylesheetLoad:y,stylesheetLoadTimeout:_,keepIframeSrcFn:w=(()=>!1)}=e||{};return et(t,{doc:t,mirror:i,blockClass:r,blockSelector:n,maskTextClass:o,maskTextSelector:s,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===h?{password:!0}:h,maskTextFn:c,maskInputFn:d,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:f,inlineImages:l,recordCanvas:u,preserveWhiteSpace:p,onSerialize:g,onIframeLoad:m,iframeLoadTimeout:b,onStylesheetLoad:y,stylesheetLoadTimeout:_,keepIframeSrcFn:w,newlyAddedElement:!1})}(document,{mirror:De,blockClass:o,blockSelector:s,maskTextClass:u,maskTextSelector:h,inlineStylesheet:c,maskAllInputs:D,maskTextFn:g,maskInputFn:p,slimDOM:B,dataURLOptions:_,recordCanvas:I,inlineImages:M,onSerialize:t=>{Tt(t,De)&&Y.addIframe(t),Mt(t,De)&&j.trackLinkElement(t),Nt(t)&&z.addShadowRoot(dt.shadowRoot(t),document)},onIframeLoad:(t,e)=>{Y.attachIframe(t,e),z.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{j.attachLinkElement(t,e)},keepIframeSrcFn:R});if(!e)return console.warn("Failed to snapshot the document");Se({type:Pt.FullSnapshot,data:{node:e,initialOffset:_t(window)}},t),Jt.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&j.adoptStyleSheets(document.adoptedStyleSheets,De.getId(document))}};try{var U=[],X=t=>{var e;return Xt(ae)({mutationCb:q,mousemoveCb:(t,e)=>Se({type:Pt.IncrementalSnapshot,data:{source:e,positions:t}}),mouseInteractionCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.MouseInteraction},t)}),scrollCb:H,viewportResizeCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.ViewportResize},t)}),inputCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.Input},t)}),mediaInteractionCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.MediaInteraction},t)}),styleSheetRuleCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.StyleSheetRule},t)}),styleDeclarationCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.StyleDeclaration},t)}),canvasMutationCb:V,fontCb:t=>Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.Font},t)}),selectionCb:t=>{Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.Selection},t)})},customElementCb:t=>{Se({type:Pt.IncrementalSnapshot,data:i({source:Lt.CustomElement},t)})},blockClass:o,ignoreClass:a,ignoreSelector:l,maskTextClass:u,maskTextSelector:h,maskInputOptions:D,inlineStylesheet:c,sampling:y,recordDOM:C,recordCanvas:I,inlineImages:M,userTriggeredOnInput:A,collectFonts:T,doc:t,maskInputFn:p,maskTextFn:g,keepIframeSrcFn:R,blockSelector:s,slimDOMOptions:B,dataURLOptions:_,mirror:De,iframeManager:Y,stylesheetManager:j,shadowDomManager:z,processedNodeManager:W,canvasManager:xe,ignoreCSSAttributes:E,plugins:(null==(e=null==N?void 0:N.filter((t=>t.observer)))?void 0:e.map((t=>({observer:t.observer,options:t.options,callback:e=>Se({type:Pt.Plugin,data:{plugin:t.name,payload:e}})}))))||[]},m)};Y.addLoadListener((t=>{try{U.push(X(t.contentDocument))}catch(t){console.warn(t)}}));var J=()=>{ke(),U.push(X(document)),Fe=!0};return"interactive"===document.readyState||"complete"===document.readyState?J():(U.push(vt("DOMContentLoaded",(()=>{Se({type:Pt.DomContentLoaded,data:{}}),"DOMContentLoaded"===k&&J()}))),U.push(vt("load",(()=>{Se({type:Pt.Load,data:{}}),"load"===k&&J()}),window))),()=>{U.forEach((t=>t())),W.destroy(),Fe=!1,Vt=void 0}}catch(t){console.warn(t)}}Be.addCustomEvent=(t,e)=>{if(!Fe)throw new Error("please add custom event after start recording");Se({type:Pt.Custom,data:{tag:t,payload:e}})},Be.freezePage=()=>{Jt.forEach((t=>t.freeze()))},Be.takeFullSnapshot=t=>{if(!Fe)throw new Error("please take full snapshot after start recording");ke(t)},Be.mirror=De,(Le=Pe||(Pe={}))[Le.NotStarted=0]="NotStarted",Le[Le.Running=1]="Running",Le[Le.Stopped=2]="Stopped";var $e,Ze=Object.defineProperty,qe=(t,e,i)=>((t,e,i)=>e in t?Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),He=Object.defineProperty,Ve=(t,e,i)=>((t,e,i)=>e in t?He(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),je=Object.defineProperty,Ye=(t,e,i)=>((t,e,i)=>e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i),Ge={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},We={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ze={};function Ue(t){if(ze[t])return ze[t];var e=globalThis[t],i=e.prototype,r=t in Ge?Ge[t]:void 0,n=Boolean(r&&r.every((t=>{var e,r;return Boolean(null==(r=null==(e=Object.getOwnPropertyDescriptor(i,t))?void 0:e.get)?void 0:r.toString().includes("[native code]"))}))),o=t in We?We[t]:void 0,s=Boolean(o&&o.every((t=>{var e;return"function"==typeof i[t]&&(null==(e=i[t])?void 0:e.toString().includes("[native code]"))})));if(n&&s)return ze[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var u=l[t].prototype;return document.body.removeChild(a),u?ze[t]=u:i}catch(t){return i}}var Xe={};function Je(t,e,i){var r,n=t+"."+String(i);if(Xe[n])return Xe[n].call(e);var o=Ue(t),s=null==(r=Object.getOwnPropertyDescriptor(o,i))?void 0:r.get;return s?(Xe[n]=s,s.call(e)):e[i]}var Ke={};function Qe(t,e,i){var r=t+"."+String(i);if(Ke[r])return Ke[r].bind(e);var n=Ue(t)[i];return"function"!=typeof n?e[i]:(Ke[r]=n,n.bind(e))}var ti={childNodes:function(t){return Je("Node",t,"childNodes")},parentNode:function(t){return Je("Node",t,"parentNode")},parentElement:function(t){return Je("Node",t,"parentElement")},textContent:function(t){return Je("Node",t,"textContent")},contains:function(t,e){return Qe("Node",t,"contains")(e)},getRootNode:function(t){return Qe("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?Je("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?Je("Element",t,"shadowRoot"):null},querySelector:function(t,e){return Je("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return Je("Element",t,"querySelectorAll")(e)},mutationObserver:function(){return Ue("MutationObserver").constructor}};class ei{constructor(){Ye(this,"idNodeMap",new Map),Ye(this,"nodeMetaMap",new WeakMap)}getId(t){var e;if(!t)return-1;var i=null==(e=this.getMeta(t))?void 0:e.id;return null!=i?i:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){var e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){var i=e.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,e)}replace(t,e){var i=this.getNode(t);if(i){var r=this.nodeMetaMap.get(i);r&&this.nodeMetaMap.set(e,r)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function ii(t,e,i){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!i&&ii(ti.parentNode(t),e,i);for(var r=t.classList.length;r--;){var n=t.classList[r];if(e.test(n))return!0}return!!i&&ii(ti.parentNode(t),e,i)}class ri{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){for(var t=[],e=this.firstChild;e;)t.push(e),e=e.nextSibling;return t}contains(t){if(!(t instanceof ri))return!1;if(t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,e){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var ni={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},oi={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},si={};function ai(t){if(si[t])return si[t];var e=globalThis[t],i=e.prototype,r=t in ni?ni[t]:void 0,n=Boolean(r&&r.every((t=>{var e,r;return Boolean(null==(r=null==(e=Object.getOwnPropertyDescriptor(i,t))?void 0:e.get)?void 0:r.toString().includes("[native code]"))}))),o=t in oi?oi[t]:void 0,s=Boolean(o&&o.every((t=>{var e;return"function"==typeof i[t]&&(null==(e=i[t])?void 0:e.toString().includes("[native code]"))})));if(n&&s)return si[t]=e.prototype,e.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var l=a.contentWindow;if(!l)return e.prototype;var u=l[t].prototype;return document.body.removeChild(a),u?si[t]=u:i}catch(t){return i}}var li={};function ui(t,e,i){var r,n=t+"."+String(i);if(li[n])return li[n].call(e);var o=ai(t),s=null==(r=Object.getOwnPropertyDescriptor(o,i))?void 0:r.get;return s?(li[n]=s,s.call(e)):e[i]}var hi={};function ci(t,e,i){var r=t+"."+String(i);if(hi[r])return hi[r].bind(e);var n=ai(t)[i];return"function"!=typeof n?e[i]:(hi[r]=n,n.bind(e))}var di={childNodes:function(t){return ui("Node",t,"childNodes")},parentNode:function(t){return ui("Node",t,"parentNode")},parentElement:function(t){return ui("Node",t,"parentElement")},textContent:function(t){return ui("Node",t,"textContent")},contains:function(t,e){return ci("Node",t,"contains")(e)},getRootNode:function(t){return ci("Node",t,"getRootNode")()},host:function(t){return t&&"host"in t?ui("ShadowRoot",t,"host"):null},styleSheets:function(t){return t.styleSheets},shadowRoot:function(t){return t&&"shadowRoot"in t?ui("Element",t,"shadowRoot"):null},querySelector:function(t,e){return ui("Element",t,"querySelector")(e)},querySelectorAll:function(t,e){return ui("Element",t,"querySelectorAll")(e)},mutationObserver:function(){return ai("MutationObserver").constructor}};var vi="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",fi={map:{},getId:()=>(console.error(vi),-1),getNode:()=>(console.error(vi),null),removeNodeFromMap(){console.error(vi)},has:()=>(console.error(vi),!1),reset(){console.error(vi)}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(fi=new Proxy(fi,{get:(t,e,i)=>("map"===e&&console.error(vi),Reflect.get(t,e,i))}));var pi=Date.now;function gi(t){return t?t.nodeType===t.ELEMENT_NODE?t:di.parentElement(t):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(pi=()=>(new Date).getTime());function mi(t){var e,i=null;return"getRootNode"in t&&(null==(e=di.getRootNode(t))?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&di.host(di.getRootNode(t))&&(i=di.host(di.getRootNode(t))),i}function bi(t){for(var e,i=t;e=mi(i);)i=e;return i}function yi(t){var e=t.ownerDocument;if(!e)return!1;var i=bi(t);return di.contains(e,i)}for(var _i=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){Ve(this,"id",1),Ve(this,"styleIDMap",new WeakMap),Ve(this,"idStyleMap",new Map)}getId(t){var e;return null!==(e=this.styleIDMap.get(t))&&void 0!==e?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){return this.has(t)?this.getId(t):(i=void 0===e?this.id++:e,this.styleIDMap.set(t,i),this.idStyleMap.set(i,t),i);var i}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return fi},closestElementOfNode:gi,getBaseDimension:function t(e,i){var r,n,o=null==(n=null==(r=e.ownerDocument)?void 0:r.defaultView)?void 0:n.frameElement;if(!o||o===i)return{x:0,y:0,relativeScale:1,absoluteScale:1};var s=o.getBoundingClientRect(),a=t(o,i),l=s.height/o.clientHeight;return{x:s.x*a.relativeScale+a.x,y:s.y*a.relativeScale+a.y,relativeScale:l,absoluteScale:a.absoluteScale*l}},getNestedRule:function t(e,i){var r=e[i[0]];return 1===i.length?r:t(r.cssRules[i[1]].cssRules,i.slice(2))},getPositionsAndIndex:function(t){var e=[...t],i=e.pop();return{positions:e,index:i}},getRootShadowHost:bi,getShadowHost:mi,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(t){var e,i,r,n,o=t.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(e=di.parentElement(o.body))?void 0:e.scrollLeft)||(null==(i=null==o?void 0:o.body)?void 0:i.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(r=di.parentElement(o.body))?void 0:r.scrollTop)||(null==(n=null==o?void 0:o.body)?void 0:n.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(t){return!!t&&(t instanceof ri&&"shadowRoot"in t?Boolean(t.shadowRoot):Boolean(di.shadowRoot(t)))},hookSetter:function t(e,i,r,n,o){void 0===o&&(o=window);var s=o.Object.getOwnPropertyDescriptor(e,i);return o.Object.defineProperty(e,i,n?r:{set(t){setTimeout((()=>{r.set.call(this,t)}),0),s&&s.set&&s.set.call(this,t)}}),()=>t(e,i,s||{},!0)},inDom:function(t){var e=t.ownerDocument;return!!e&&(di.contains(e,t)||yi(t))},isAncestorRemoved:function t(e,i){if(n=(r=e)&&"host"in r&&"mode"in r&&ti.host(r)||null,Boolean(n&&"shadowRoot"in n&&ti.shadowRoot(n)===r))return!1;var r,n,o=i.getId(e);if(!i.has(o))return!0;var s=di.parentNode(e);return(!s||s.nodeType!==e.DOCUMENT_NODE)&&(!s||t(s,i))},isBlocked:function(t,e,i,r){if(!t)return!1;var n=gi(t);if(!n)return!1;try{if("string"==typeof e){if(n.classList.contains(e))return!0;if(r&&null!==n.closest("."+e))return!0}else if(ii(n,e,r))return!0}catch(t){}if(i){if(n.matches(i))return!0;if(r&&null!==n.closest(i))return!0}return!1},isIgnored:function(t,e,i){return!("TITLE"!==t.tagName||!i.headTitleMutations)||-2===e.getId(t)},isSerialized:function(t,e){return-1!==e.getId(t)},isSerializedIframe:function(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))},isSerializedStylesheet:function(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))},iterateResolveTree:function t(e,i){i(e.value);for(var r=e.children.length-1;r>=0;r--)t(e.children[r],i)},legacy_isTouchEvent:function(t){return Boolean(t.changedTouches)},get nowTimestamp(){return pi},on:function(t,e,i){void 0===i&&(i=document);var r={capture:!0,passive:!0};return i.addEventListener(t,e,r),()=>i.removeEventListener(t,e,r)},patch:function(t,e,i){try{if(!(e in t))return()=>{};var r=t[e],n=i(r);return"function"==typeof n&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=n,()=>{t[e]=r}}catch(t){return()=>{}}},polyfill:function(t){void 0===t&&(t=window),"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(t){var e={},i=(t,i)=>{var r={value:t,parent:i,children:[]};return e[t.node.id]=r,r},r=[];for(var n of t){var{nextId:o,parentId:s}=n;if(o&&o in e){var a=e[o];if(a.parent){var l=a.parent.children.indexOf(a);a.parent.children.splice(l,0,i(n,a.parent))}else{var u=r.indexOf(a);r.splice(u,0,i(n,null))}}else if(s in e){var h=e[s];h.children.push(i(n,h))}else r.push(i(n,null))}return r},shadowHostInDom:yi,throttle:function(t,e,i){void 0===i&&(i={});var r=null,n=0;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=Date.now();n||!1!==i.leading||(n=l);var u=e-(l-n),h=this;u<=0||u>e?(r&&(clearTimeout(r),r=null),n=l,t.apply(h,s)):r||!1===i.trailing||(r=setTimeout((()=>{n=!1===i.leading?0:Date.now(),r=null,t.apply(h,s)}),u))}},uniqueTextMutations:function(t){for(var e=new Set,i=[],r=t.length;r--;){var n=t[r];e.has(n.id)||(i.push(n),e.add(n.id))}return i}},Symbol.toStringTag,{value:"Module"})),wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ci="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ii=0;Ii<64;Ii++)Ci[wi.charCodeAt(Ii)]=Ii;var Si;"undefined"!=typeof window&&window.Blob&&new Blob([(t=>Uint8Array.from(atob(t),(t=>t.charCodeAt(0))))("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=")],{type:"text/javascript;charset=utf-8"});try{if(2!==Array.from([1],(t=>2*t))[0]){var ki=document.createElement("iframe");document.body.appendChild(ki),Array.from=(null==($e=ki.contentWindow)?void 0:$e.Array.from)||Array.from,document.body.removeChild(ki)}}catch(t){console.debug("Unable to override Array.from",t)}new ei,function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(Si||(Si={}));class xi{constructor(t){qe(this,"fileName"),qe(this,"functionName"),qe(this,"lineNumber"),qe(this,"columnNumber"),this.fileName=t.fileName||"",this.functionName=t.functionName||"",this.lineNumber=t.lineNumber,this.columnNumber=t.columnNumber}toString(){var t=this.lineNumber||"",e=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+t+":"+e+")":this.fileName+":"+t+":"+e}}var Ai=/(^|@)\S+:\d+/,Ti=/^\s*at .*(\S+:\d+|\(native\))/m,Mi=/^(eval@)?(\[native code])?$/,Ni={parse:function(t){return t?void 0!==t.stacktrace||void 0!==t["opera#sourceloc"]?this.parseOpera(t):t.stack&&t.stack.match(Ti)?this.parseV8OrIE(t):t.stack?this.parseFFOrSafari(t):(console.warn("[console-record-plugin]: Failed to parse error object:",t),[]):[]},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/[()]/g,""));if(!e)throw new Error("Cannot parse given url: "+t);return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(Ti)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var e=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),i=e.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(e=i?e.replace(i[0],""):e).split(/\s+/).slice(1),n=this.extractLocation(i?i[1]:r.pop()),o=r.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(n[0])>-1?void 0:n[0];return new xi({functionName:o,fileName:s,lineNumber:n[1],columnNumber:n[2]})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(t){return!t.match(Mi)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new xi({functionName:t});var e=/((.*".+"[^@]*)?[^@]*)(?:@)/,i=t.match(e),r=i&&i[1]?i[1]:void 0,n=this.extractLocation(t.replace(e,""));return new xi({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)/i,i=t.message.split("\n"),r=[],n=2,o=i.length;n<o;n+=2){var s=e.exec(i[n]);s&&r.push(new xi({fileName:s[2],lineNumber:parseFloat(s[1])}))}return r},parseOpera10:function(t){for(var e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=t.stacktrace.split("\n"),r=[],n=0,o=i.length;n<o;n+=2){var s=e.exec(i[n]);s&&r.push(new xi({functionName:s[3]||void 0,fileName:s[2],lineNumber:parseFloat(s[1])}))}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(Ai)&&!t.match(/^Error created at/)}),this).map((function(t){var e=t.split("@"),i=this.extractLocation(e.pop()),r=(e.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new xi({functionName:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2]})}),this)}};function Ri(t){if(!t||!t.outerHTML)return"";for(var e="";t.parentElement;){var i=t.localName;if(!i)break;i=i.toLowerCase();var r=t.parentElement,n=[];if(r.children&&r.children.length>0)for(var o=0;o<r.children.length;o++){var s=r.children[o];s.localName&&s.localName.toLowerCase&&s.localName.toLowerCase()===i&&n.push(s)}n.length>1&&(i+=":eq("+n.indexOf(t)+")"),e=i+(e?">"+e:""),t=r}return e}function Ei(t){return"[object Object]"===Object.prototype.toString.call(t)}function Fi(t,e){if(0===e)return!0;var i=Object.keys(t);for(var r of i)if(Ei(t[r])&&Fi(t[r],e-1))return!0;return!1}function Oi(t,e){var i={numOfKeysLimit:50,depthOfLimit:4};Object.assign(i,e);var r=[],n=[];return JSON.stringify(t,(function(t,e){if(r.length>0){var o=r.indexOf(this);~o?r.splice(o+1):r.push(this),~o?n.splice(o,1/0,t):n.push(t),~r.indexOf(e)&&(e=r[0]===e?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(e)).join(".")+"]")}else r.push(e);if(null===e)return e;if(void 0===e)return"undefined";if(function(t){if(Ei(t)&&Object.keys(t).length>i.numOfKeysLimit)return!0;if("function"==typeof t)return!0;if(Ei(t)&&Fi(t,i.depthOfLimit))return!0;return!1}(e))return function(t){var e=t.toString();i.stringLengthLimit&&e.length>i.stringLengthLimit&&(e=e.slice(0,i.stringLengthLimit)+"...");return e}(e);if("bigint"==typeof e)return e.toString()+"n";if(e instanceof Event){var s={};for(var a in e){var l=e[a];Array.isArray(l)?s[a]=Ri(l.length?l[0]:null):s[a]=l}return s}return e instanceof Node?e instanceof HTMLElement?e?e.outerHTML:"":e.nodeName:e instanceof Error?e.stack?e.stack+"\nEnd of stack for Error object":e.name+": "+e.message:e}))}var Pi={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Li(t,e,i){var r,n=i?Object.assign({},Pi,i):Pi,o=n.logger;if(!o)return()=>{};r="string"==typeof o?e[o]:o;var s=0,a=!1,l=[];if(n.level.includes("error")){var u=e=>{var i=e.message,r=e.error,o=Ni.parse(r).map((t=>t.toString())),s=[Oi(i,n.stringifyOptions)];t({level:"error",trace:o,payload:s})};e.addEventListener("error",u),l.push((()=>{e.removeEventListener("error",u)}));var h=e=>{var i,r;e.reason instanceof Error?r=[Oi("Uncaught (in promise) "+(i=e.reason).name+": "+i.message,n.stringifyOptions)]:(i=new Error,r=[Oi("Uncaught (in promise)",n.stringifyOptions),Oi(e.reason,n.stringifyOptions)]);var o=Ni.parse(i).map((t=>t.toString()));t({level:"error",trace:o,payload:r})};e.addEventListener("unhandledrejection",h),l.push((()=>{e.removeEventListener("unhandledrejection",h)}))}for(var c of n.level)l.push(d(r,c));return()=>{l.forEach((t=>t()))};function d(e,i){var r=this;return e[i]?_i.patch(e,i,(e=>function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];if(e.apply(r,l),!("assert"===i&&l[0]||a)){a=!0;try{var h=Ni.parse(new Error).map((t=>t.toString())).splice(1),c=("assert"===i?l.slice(1):l).map((t=>Oi(t,n.stringifyOptions)));++s<n.lengthThreshold?t({level:i,trace:h,payload:c}):s===n.lengthThreshold&&t({level:"warn",trace:[],payload:[Oi("The number of log records reached the threshold.")]})}catch(t){e("rrweb logger error:",t,...l)}finally{a=!1}}})):()=>{}}}var Di,Bi=t=>({name:"rrweb/console@1",observer:Li,options:t}),$i="undefined"!=typeof window?window:void 0,Zi="undefined"!=typeof globalThis?globalThis:$i,qi=Array.prototype,Hi=qi.forEach,Vi=qi.indexOf,ji=null==Zi?void 0:Zi.navigator,Yi=null==Zi?void 0:Zi.document,Gi=null==Zi?void 0:Zi.location,Wi=null==Zi?void 0:Zi.fetch,zi=null!=Zi&&Zi.XMLHttpRequest&&"withCredentials"in new Zi.XMLHttpRequest?Zi.XMLHttpRequest:void 0,Ui=null==Zi?void 0:Zi.AbortController,Xi=null==ji?void 0:ji.userAgent,Ji=null!=$i?$i:{},Ki="$copy_autocapture",Qi=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];!function(t){t.GZipJS="gzip-js",t.Base64="base64"}(Di||(Di={}));var tr=["fatal","error","warning","log","info","debug"];function er(t,e){return-1!==t.indexOf(e)}var ir=function(t){return t.trim()},rr=function(t){return t.replace(/^\$/,"")};var nr=Array.isArray,or=Object.prototype,sr=or.hasOwnProperty,ar=or.toString,lr=nr||function(t){return"[object Array]"===ar.call(t)},ur=t=>"function"==typeof t,hr=t=>ur(t)&&-1!==t.toString().indexOf("[native code]"),cr=()=>!!$i.Zone,dr=t=>t===Object(t)&&!lr(t),vr=t=>{if(dr(t)){for(var e in t)if(sr.call(t,e))return!1;return!0}return!1},fr=t=>void 0===t,pr=t=>"[object String]"==ar.call(t),gr=t=>pr(t)&&0===t.trim().length,mr=t=>null===t,br=t=>fr(t)||mr(t),yr=t=>"[object Number]"==ar.call(t),_r=t=>"[object Boolean]"===ar.call(t),wr=t=>t instanceof Document,Cr=t=>t instanceof FormData,Ir=t=>er(Qi,t),Sr={DEBUG:!1,LIB_VERSION:"1.237.1"},kr=t=>{var e={o:function(e){if($i&&(Sr.DEBUG||Ji.POSTHOG_DEBUG)&&!fr($i.console)&&$i.console){for(var i=("__rrweb_original__"in $i.console[e]?$i.console[e].__rrweb_original__:$i.console[e]),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];i(t,...n)}},info:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.o("log",...i)},warn:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.o("warn",...i)},error:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.o("error",...i)},critical:function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:t=>{e.error("You must initialize PostHog before calling "+t)},createLogger:e=>kr(t+" "+e)};return e},xr=kr("[PostHog.js]"),Ar=xr.createLogger,Tr={};function Mr(t,e,i){if(lr(t))if(Hi&&t.forEach===Hi)t.forEach(e,i);else if("length"in t&&t.length===+t.length)for(var r=0,n=t.length;r<n;r++)if(r in t&&e.call(i,t[r],r)===Tr)return}function Nr(t,e,i){if(!br(t)){if(lr(t))return Mr(t,e,i);if(Cr(t)){for(var r of t.entries())if(e.call(i,r[1],r[0])===Tr)return}else for(var n in t)if(sr.call(t,n)&&e.call(i,t[n],n)===Tr)return}}var Rr=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return Mr(i,(function(e){for(var i in e)void 0!==e[i]&&(t[i]=e[i])})),t},Er=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return Mr(i,(function(e){Mr(e,(function(e){t.push(e)}))})),t};function Fr(t){for(var e=Object.keys(t),i=e.length,r=new Array(i);i--;)r[i]=[e[i],t[e[i]]];return r}var Or=function(t){try{return t()}catch(t){return}},Pr=function(t){return function(){try{for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.apply(this,i)}catch(t){xr.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),xr.critical(t)}}},Lr=function(t){var e={};return Nr(t,(function(t,i){(pr(t)&&t.length>0||yr(t))&&(e[i]=t)})),e};function Dr(t,e){return i=t,r=t=>pr(t)&&!mr(e)?t.slice(0,e):t,n=new Set,function t(e,i){return e!==Object(e)?r?r(e,i):e:n.has(e)?void 0:(n.add(e),lr(e)?(o=[],Mr(e,(e=>{o.push(t(e))}))):(o={},Nr(e,((e,i)=>{n.has(e)||(o[i]=t(e,i))}))),o);var o}(i);var i,r,n}var Br=["herokuapp.com","vercel.app","netlify.app"];function $r(t){var e=null==t?void 0:t.hostname;if(!pr(e))return!1;var i=e.split(".").slice(-2).join(".");for(var r of Br)if(i===r)return!1;return!0}function Zr(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return t[i]}function qr(t,e,i,r){var{capture:n=!1,passive:o=!0}=null!=r?r:{};null==t||t.addEventListener(e,i,{capture:n,passive:o})}var Hr=["localhost","127.0.0.1"],Vr=t=>{var e=null==Yi?void 0:Yi.createElement("a");return fr(e)?null:(e.href=t,e)},jr=function(t,e){var i,r;void 0===e&&(e="&");var n=[];return Nr(t,(function(t,e){fr(t)||fr(e)||"undefined"===e||(i=encodeURIComponent((t=>t instanceof File)(t)?t.name:t.toString()),r=encodeURIComponent(e),n[n.length]=r+"="+i)})),n.join(e)},Yr=function(t,e){for(var i,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),n=0;n<r.length;n++){var o=r[n].split("=");if(o[0]===e){i=o;break}}if(!lr(i)||i.length<2)return"";var s=i[1];try{s=decodeURIComponent(s)}catch(t){xr.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},Gr=function(t,e,i){if(!t||!e||!e.length)return t;for(var r=t.split("#"),n=r[0]||"",o=r[1],s=n.split("?"),a=s[1],l=s[0],u=(a||"").split("&"),h=[],c=0;c<u.length;c++){var d=u[c].split("=");lr(d)&&(e.includes(d[0])?h.push(d[0]+"="+i):h.push(u[c]))}var v=l;return null!=a&&(v+="?"+h.join("&")),null!=o&&(v+="#"+o),v},Wr=function(t,e){var i=t.match(new RegExp(e+"=([^&]*)"));return i?i[1]:null};function zr(t,e,i){try{if(!(e in t))return()=>{};var r=t[e],n=i(r);return ur(n)&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=n,()=>{t[e]=r}}catch(t){return()=>{}}}function Ur(t,e){var i,r=function(t){try{return"string"==typeof t?new URL(t).hostname:"url"in t?new URL(t.url).hostname:t.hostname}catch(t){return null}}(t),n={hostname:r,isHostDenied:!1};if(null==(i=e.payloadHostDenyList)||!i.length||null==r||!r.trim().length)return n;for(var o of e.payloadHostDenyList)if(r.endsWith(o))return{hostname:r,isHostDenied:!0};return n}var Xr="$people_distinct_id",Jr="__alias",Kr="__timers",Qr="$autocapture_disabled_server_side",tn="$heatmaps_enabled_server_side",en="$exception_capture_enabled_server_side",rn="$web_vitals_enabled_server_side",nn="$dead_clicks_enabled_server_side",on="$web_vitals_allowed_metrics",sn="$session_recording_enabled_server_side",an="$console_log_recording_enabled_server_side",ln="$session_recording_network_payload_capture",un="$session_recording_masking",hn="$session_recording_canvas_recording",cn="$replay_sample_rate",dn="$replay_minimum_duration",vn="$replay_script_config",fn="$sesid",pn="$session_is_sampled",gn="$session_recording_url_trigger_activated_session",mn="$session_recording_event_trigger_activated_session",bn="$enabled_feature_flags",yn="$early_access_features",_n="$feature_flag_details",wn="$stored_person_properties",Cn="$stored_group_properties",In="$surveys",Sn="$surveys_activated",kn="$flag_call_reported",xn="$user_state",An="$client_session_props",Tn="$capture_rate_limit",Mn="$initial_campaign_params",Nn="$initial_referrer_info",Rn="$initial_person_info",En="$epp",Fn="__POSTHOG_TOOLBAR__",On="$posthog_cookieless",Pn=[Xr,Jr,"__cmpns",Kr,sn,tn,fn,bn,xn,yn,_n,Cn,wn,In,kn,An,Tn,Mn,Nn,En];function Ln(t){return t instanceof Element&&(t.id===Fn||!(null==t.closest||!t.closest(".toolbar-global-fade-container")))}function Dn(t){return!!t&&1===t.nodeType}function Bn(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function $n(t){return!!t&&3===t.nodeType}function Zn(t){return!!t&&11===t.nodeType}function qn(t){return t?ir(t).split(/\s+/):[]}function Hn(t){var e=null==$i?void 0:$i.location.href;return!!(e&&t&&t.some((t=>e.match(t))))}function Vn(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return qn(e)}function jn(t){return br(t)?null:ir(t).split(/(\s+)/).filter((t=>no(t))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Yn(t){var e="";return Xn(t)&&!Jn(t)&&t.childNodes&&t.childNodes.length&&Nr(t.childNodes,(function(t){var i;$n(t)&&t.textContent&&(e+=null!==(i=jn(t.textContent))&&void 0!==i?i:"")})),ir(e)}function Gn(t){return fr(t.target)?t.srcElement||null:null!=(e=t.target)&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var Wn=["a","button","form","input","select","textarea","label"];function zn(t){var e=t.parentNode;return!(!e||!Dn(e))&&e}function Un(t,e,i,r,n){var o,s,a;if(void 0===i&&(i=void 0),!$i||!t||Bn(t,"html")||!Dn(t))return!1;if(null!=(o=i)&&o.url_allowlist&&!Hn(i.url_allowlist))return!1;if(null!=(s=i)&&s.url_ignorelist&&Hn(i.url_ignorelist))return!1;if(null!=(a=i)&&a.dom_event_allowlist){var l=i.dom_event_allowlist;if(l&&!l.some((t=>e.type===t)))return!1}for(var u=!1,h=[t],c=!0,d=t;d.parentNode&&!Bn(d,"body");)if(Zn(d.parentNode))h.push(d.parentNode.host),d=d.parentNode.host;else{if(!(c=zn(d)))break;if(r||Wn.indexOf(c.tagName.toLowerCase())>-1)u=!0;else{var v=$i.getComputedStyle(c);v&&"pointer"===v.getPropertyValue("cursor")&&(u=!0)}h.push(c),d=c}if(!function(t,e){var i=null==e?void 0:e.element_allowlist;if(fr(i))return!0;var r=function(t){if(i.some((e=>t.tagName.toLowerCase()===e)))return{v:!0}};for(var n of t){var o=r(n);if("object"==typeof o)return o.v}return!1}(h,i))return!1;if(!function(t,e){var i=null==e?void 0:e.css_selector_allowlist;if(fr(i))return!0;var r=function(t){if(i.some((e=>t.matches(e))))return{v:!0}};for(var n of t){var o=r(n);if("object"==typeof o)return o.v}return!1}(h,i))return!1;var f=$i.getComputedStyle(t);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===e.type)return!0;var p=t.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(n||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(n||["change","click"]).indexOf(e.type)>=0;default:return u?(n||["click"]).indexOf(e.type)>=0:(n||["click"]).indexOf(e.type)>=0&&(Wn.indexOf(p)>-1||"true"===t.getAttribute("contenteditable"))}}function Xn(t){for(var e=t;e.parentNode&&!Bn(e,"body");e=e.parentNode){var i=Vn(e);if(er(i,"ph-sensitive")||er(i,"ph-no-capture"))return!1}if(er(Vn(t),"ph-include"))return!0;var r=t.type||"";if(pr(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var n=t.name||t.id||"";if(pr(n)){if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(n.replace(/[^a-zA-Z0-9]/g,"")))return!1}return!0}function Jn(t){return!!(Bn(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||Bn(t,"select")||Bn(t,"textarea")||"true"===t.getAttribute("contenteditable"))}var Kn="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Qn=new RegExp("^(?:"+Kn+")$"),to=new RegExp(Kn),eo="\\d{3}-?\\d{2}-?\\d{4}",io=new RegExp("^("+eo+")$"),ro=new RegExp("("+eo+")");function no(t,e){if(void 0===e&&(e=!0),br(t))return!1;if(pr(t)){if(t=ir(t),(e?Qn:to).test((t||"").replace(/[- ]/g,"")))return!1;if((e?io:ro).test(t))return!1}return!0}function oo(t){var e=Yn(t);return no(e=(e+" "+so(t)).trim())?e:""}function so(t){var e="";return t&&t.childNodes&&t.childNodes.length&&Nr(t.childNodes,(function(t){var i;if(t&&"span"===(null==(i=t.tagName)?void 0:i.toLowerCase()))try{var r=Yn(t);e=(e+" "+r).trim(),t.childNodes&&t.childNodes.length&&(e=(e+" "+so(t)).trim())}catch(t){xr.error("[AutoCapture]",t)}})),e}function ao(t){return function(t){var e=t.map((t=>{var e,r,n="";if(t.tag_name&&(n+=t.tag_name),t.attr_class)for(var o of(t.attr_class.sort(),t.attr_class))n+="."+o.replace(/"/g,"");var s=i({},t.text?{text:t.text}:{},{"nth-child":null!==(e=t.nth_child)&&void 0!==e?e:0,"nth-of-type":null!==(r=t.nth_of_type)&&void 0!==r?r:0},t.href?{href:t.href}:{},t.attr_id?{attr_id:t.attr_id}:{},t.attributes),a={};return Fr(s).sort(((t,e)=>{var[i]=t,[r]=e;return i.localeCompare(r)})).forEach((t=>{var[e,i]=t;return a[lo(e.toString())]=lo(i.toString())})),n+=":",n+=Fr(s).map((t=>{var[e,i]=t;return e+'="'+i+'"'})).join("")}));return e.join(";")}(function(t){return t.map((t=>{var e,i,r={text:null==(e=t.$el_text)?void 0:e.slice(0,400),tag_name:t.tag_name,href:null==(i=t.attr__href)?void 0:i.slice(0,2048),attr_class:uo(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return Fr(t).filter((t=>{var[e]=t;return 0===e.indexOf("attr__")})).forEach((t=>{var[e,i]=t;return r.attributes[e]=i})),r}))}(t))}function lo(t){return t.replace(/"|\\"/g,'\\"')}function uo(t){var e=t.attr__class;return e?lr(e)?e:qn(e):void 0}var ho="[SessionRecording]",co="redacted",vo={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},fo=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],po=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],go=["/s/","/e/","/i/"];function mo(t,e,i,r){if(br(t))return t;var n=(null==e?void 0:e["content-length"])||function(t){return new Blob([t]).size}(t);return pr(n)&&(n=parseInt(n)),n>i?ho+" "+r+" body too large to record ("+n+" bytes)":t}function bo(t,e){if(br(t))return t;var i=t;return no(i,!1)||(i=ho+" "+e+" body "+co),Nr(po,(t=>{var r,n;null!=(r=i)&&r.length&&-1!==(null==(n=i)?void 0:n.indexOf(t))&&(i=ho+" "+e+" body "+co+" as might contain: "+t)})),i}var yo=(t,e)=>{var r,n,o,s={payloadSizeLimitBytes:vo.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...vo.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...vo.payloadHostDenyList]},a=!1!==t.session_recording.recordHeaders&&e.recordHeaders,l=!1!==t.session_recording.recordBody&&e.recordBody,u=!1!==t.capture_performance&&e.recordPerformance,h=(r=s,o=Math.min(1e6,null!==(n=r.payloadSizeLimitBytes)&&void 0!==n?n:1e6),t=>(null!=t&&t.requestBody&&(t.requestBody=mo(t.requestBody,t.requestHeaders,o,"Request")),null!=t&&t.responseBody&&(t.responseBody=mo(t.responseBody,t.responseHeaders,o,"Response")),t)),c=e=>{return h(((t,e)=>{var i,r=Vr(t.name),n=0===e.indexOf("http")?null==(i=Vr(e))?void 0:i.pathname:e;"/"===n&&(n="");var o=null==r?void 0:r.pathname.replace(n||"","");if(!(r&&o&&go.some((t=>0===o.indexOf(t)))))return t})((r=(i=e).requestHeaders,br(r)||Nr(Object.keys(null!=r?r:{}),(t=>{fo.includes(t.toLowerCase())&&(r[t]=co)})),i),t.api_host));var i,r},d=ur(t.session_recording.maskNetworkRequestFn);return d&&ur(t.session_recording.maskCapturedNetworkRequestFn)&&xr.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=e=>{var r=t.session_recording.maskNetworkRequestFn({url:e.name});return i({},e,{name:null==r?void 0:r.url})}),s.maskRequestFn=ur(t.session_recording.maskCapturedNetworkRequestFn)?e=>{var i,r=c(e);return r&&null!==(i=null==t.session_recording.maskCapturedNetworkRequestFn?void 0:t.session_recording.maskCapturedNetworkRequestFn(r))&&void 0!==i?i:void 0}:t=>function(t){if(!fr(t))return t.requestBody=bo(t.requestBody,"Request"),t.responseBody=bo(t.responseBody,"Response"),t}(c(t)),i({},vo,s,{recordHeaders:a,recordBody:l,recordPerformance:u,recordInitialRequests:u})},_o=Ar("[Recorder]"),wo=t=>"navigation"===t.entryType,Co=t=>"resource"===t.entryType;function Io(t,e,i){if(i.recordInitialRequests){var r=e.performance.getEntries().filter((t=>wo(t)||Co(t)&&i.initiatorTypes.includes(t.initiatorType)));t({requests:r.flatMap((t=>No({entry:t,method:void 0,status:void 0,networkRequest:{},isInitial:!0}))),isInitial:!0})}var n=new e.PerformanceObserver((e=>{var r=e.getEntries().filter((t=>wo(t)||Co(t)&&i.initiatorTypes.includes(t.initiatorType)&&(t=>!i.recordBody&&!i.recordHeaders||"xmlhttprequest"!==t.initiatorType&&"fetch"!==t.initiatorType)(t)));t({requests:r.flatMap((t=>No({entry:t,method:void 0,status:void 0,networkRequest:{}})))})})),o=PerformanceObserver.supportedEntryTypes.filter((t=>i.performanceEntryTypeToObserve.includes(t)));return n.observe({entryTypes:o}),()=>{n.disconnect()}}function So(t,e){return!!e&&(_r(e)||e[t])}function ko(t){var{type:e,recordBody:i,headers:r,url:n}=t;function o(t){var e=Object.keys(r).find((t=>"content-type"===t.toLowerCase())),i=e&&r[e];return t.some((t=>null==i?void 0:i.includes(t)))}if(!i)return!1;if(function t(e){try{return"string"==typeof e?e.startsWith("blob:"):e instanceof URL?"blob:"===e.protocol:e instanceof Request&&t(e.url)}catch(t){return!1}}(n))return!1;if(_r(i))return!0;if(lr(i))return o(i);var s=i[e];return _r(s)?s:o(s)}function xo(t,e,i,r,n,o){return Ao.apply(this,arguments)}function Ao(){return Ao=e((function*(t,e,i,r,n,o){if(void 0===o&&(o=0),o>10)return _o.warn("Failed to get performance entry for request",{url:i,initiatorType:e}),null;var s=function(t,e){for(var i=t.length-1;i>=0;i-=1)if(e(t[i]))return t[i]}(t.performance.getEntriesByName(i),(t=>Co(t)&&t.initiatorType===e&&(fr(r)||t.startTime>=r)&&(fr(n)||t.startTime<=n)));return s||(yield new Promise((t=>setTimeout(t,50*o))),xo(t,e,i,r,n,o+1))})),Ao.apply(this,arguments)}function To(t){var{body:e,options:i,url:r}=t;if(br(e))return null;var{hostname:n,isHostDenied:o}=Ur(r,i);if(o)return n+" is in deny list";if(pr(e))return e;if(wr(e))return e.textContent;if(Cr(e))return jr(e);if(dr(e))try{return JSON.stringify(e)}catch(t){return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(e)}var Mo=t=>!mr(t)&&("navigation"===t.entryType||"resource"===t.entryType);function No(t){var{entry:e,method:r,status:n,networkRequest:o,isInitial:s,start:a,end:l,url:u,initiatorType:h}=t;a=e?e.startTime:a,l=e?e.responseEnd:l;var c=Math.floor(Date.now()-performance.now()),d=Math.floor(c+(a||0)),v=[i({},e?e.toJSON():{name:u},{startTime:fr(a)?void 0:Math.round(a),endTime:fr(l)?void 0:Math.round(l),timeOrigin:c,timestamp:d,method:r,initiatorType:h||(e?e.initiatorType:void 0),status:n,requestHeaders:o.requestHeaders,requestBody:o.requestBody,responseHeaders:o.responseHeaders,responseBody:o.responseBody,isInitial:s})];if(Mo(e))for(var f of e.serverTiming||[])v.push({timeOrigin:c,timestamp:d,startTime:Math.round(e.startTime),name:f.name,duration:f.duration,entryType:"serverTiming"});return v}var Ro=["video/","audio/"];function Eo(t){return new Promise(((e,i)=>{var r=setTimeout((()=>e("[SessionReplay] Timeout while trying to read body")),500);try{t.clone().text().then((t=>e(t)),(t=>i(t))).finally((()=>clearTimeout(r)))}catch(t){clearTimeout(r),e("[SessionReplay] Failed to read body")}}))}function Fo(){return Fo=e((function*(t){var{r:e,options:i,url:r}=t,{hostname:n,isHostDenied:o}=Ur(r,i);return o?Promise.resolve(n+" is in deny list"):Eo(e)})),Fo.apply(this,arguments)}function Oo(){return Oo=e((function*(t){var{r:e,options:i,url:r}=t,n=function(t){var e,{r:i,options:r,url:n}=t;if("chunked"===i.headers.get("Transfer-Encoding"))return"Chunked Transfer-Encoding is not supported";var o=null==(e=i.headers.get("Content-Type"))?void 0:e.toLowerCase(),s=Ro.some((t=>null==o?void 0:o.startsWith(t)));if(o&&s)return"Content-Type "+o+" is not supported";var{hostname:a,isHostDenied:l}=Ur(n,r);return l?a+" is in deny list":null}({r:e,options:i,url:r});return mr(n)?Eo(e):Promise.resolve(n)})),Oo.apply(this,arguments)}function Po(t,i,r){if(!r.initiatorTypes.includes("fetch"))return()=>{};var n=So("request",r.recordHeaders),o=So("response",r.recordHeaders),s=zr(i,"fetch",(s=>function(){var a=e((function*(e,a){var l,u,h,c=new Request(e,a),d={};try{var v={};c.headers.forEach(((t,e)=>{v[e]=t})),n&&(d.requestHeaders=v),ko({type:"request",headers:v,url:e,recordBody:r.recordBody})&&(d.requestBody=yield function(t){return Fo.apply(this,arguments)}({r:c,options:r,url:e})),u=i.performance.now(),l=yield s(c),h=i.performance.now();var f={};return l.headers.forEach(((t,e)=>{f[e]=t})),o&&(d.responseHeaders=f),ko({type:"response",headers:f,url:e,recordBody:r.recordBody})&&(d.responseBody=yield function(t){return Oo.apply(this,arguments)}({r:l,options:r,url:e})),l}finally{xo(i,"fetch",c.url,u,h).then((e=>{var i,r=No({entry:e,method:c.method,status:null==(i=l)?void 0:i.status,networkRequest:d,start:u,end:h,url:c.url,initiatorType:"fetch"});t({requests:r})})).catch((()=>{}))}}));return function(t,e){return a.apply(this,arguments)}}()));return()=>{s()}}var Lo=null;function Do(t,e,r){if(!("performance"in e))return()=>{};if(Lo)return _o.warn("Network observer already initialised, doing nothing"),()=>{};var n=r?Object.assign({},vo,r):vo,o=e=>{var r=[];e.requests.forEach((t=>{var e=n.maskRequestFn(t);e&&r.push(e)})),r.length>0&&t(i({},e,{requests:r}))},s=Io(o,e,n),a=()=>{},l=()=>{};return(n.recordHeaders||n.recordBody)&&(a=function(t,e,i){if(!i.initiatorTypes.includes("xmlhttprequest"))return()=>{};var r=So("request",i.recordHeaders),n=So("response",i.recordHeaders),o=zr(e.XMLHttpRequest.prototype,"open",(o=>function(s,a,l,u,h){void 0===l&&(l=!0);var c,d,v=this,f=new Request(a),p={},g={},m=v.setRequestHeader.bind(v);v.setRequestHeader=(t,e)=>(g[t]=e,m(t,e)),r&&(p.requestHeaders=g);var b=v.send.bind(v);v.send=t=>(ko({type:"request",headers:g,url:a,recordBody:i.recordBody})&&(p.requestBody=To({body:t,options:i,url:a})),c=e.performance.now(),b(t)),v.addEventListener("readystatechange",(()=>{if(v.readyState===v.DONE){d=e.performance.now();var r={};v.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((t=>{var e=t.split(": "),i=e.shift(),n=e.join(": ");i&&(r[i]=n)})),n&&(p.responseHeaders=r),ko({type:"response",headers:r,url:a,recordBody:i.recordBody})&&(p.responseBody=To({body:v.response,options:i,url:a})),xo(e,"xmlhttprequest",f.url,c,d).then((e=>{var i=No({entry:e,method:s,status:null==v?void 0:v.status,networkRequest:p,start:c,end:d,url:a.toString(),initiatorType:"xmlhttprequest"});t({requests:i})})).catch((()=>{}))}})),o.call(v,s,a,l,u,h)}));return()=>{o()}}(o,e,n),l=Po(o,e,n)),Lo=()=>{s(),a(),l()}}var Bo,$o,Zo,qo,Ho,Vo,jo=t=>({name:"rrweb/network@1",observer:Do,options:t});Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{},Ji.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:Bi,getRecordNetworkPlugin:jo},Ji.__PosthogExtensions__.rrweb={record:Be,version:"v2"},Ji.rrweb={record:Be,version:"v2"},Ji.rrwebConsoleRecord={getRecordConsolePlugin:Bi},Ji.getRecordNetworkPlugin=jo,function(t){t.Button="button",t.Tab="tab",t.Selector="selector"}(Bo||(Bo={})),function(t){t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger"}($o||($o={})),function(t){t.Popover="popover",t.API="api",t.Widget="widget"}(Zo||(Zo={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(qo||(qo={})),function(t){t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question"}(Ho||(Ho={})),function(t){t.Once="once",t.Recurring="recurring",t.Always="always"}(Vo||(Vo={}));var Yo,Go,Wo,zo,Uo,Xo,Jo,Ko,Qo={},ts=[],es=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,is=Array.isArray;function rs(t,e){for(var i in e)t[i]=e[i];return t}function ns(t){var e=t.parentNode;e&&e.removeChild(t)}function os(t,e,i){var r,n,o,s={};for(o in e)"key"==o?r=e[o]:"ref"==o?n=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Yo.call(arguments,2):i),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===s[o]&&(s[o]=t.defaultProps[o]);return ss(t,s,r,n,null)}function ss(t,e,i,r,n){var o={type:t,props:e,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==n?++Wo:n,__i:-1,__u:0};return null==n&&null!=Go.vnode&&Go.vnode(o),o}function as(t){return t.children}function ls(t,e){this.props=t,this.context=e}function us(t,e){if(null==e)return t.__?us(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if(null!=(i=t.__k[e])&&null!=i.__e)return i.__e;return"function"==typeof t.type?us(t):null}function hs(t){var e,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(i=t.__k[e])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return hs(t)}}function cs(t){(!t.__d&&(t.__d=!0)&&zo.push(t)&&!ds.__r++||Uo!==Go.debounceRendering)&&((Uo=Go.debounceRendering)||Xo)(ds)}function ds(){var t,e,i,r,n,o,s,a,l;for(zo.sort(Jo);t=zo.shift();)t.__d&&(e=zo.length,r=void 0,o=(n=(i=t).__v).__e,a=[],l=[],(s=i.__P)&&((r=rs({},n)).__v=n.__v+1,Go.vnode&&Go.vnode(r),_s(s,r,n,i.__n,void 0!==s.ownerSVGElement,32&n.__u?[o]:null,a,null==o?us(n):o,!!(32&n.__u),l),r.__.__k[r.__i]=r,ws(a,r,l),r.__e!=o&&hs(r)),zo.length>e&&zo.sort(Jo));ds.__r=0}function vs(t,e,i,r,n,o,s,a,l,u,h){var c,d,v,f,p,g=r&&r.__k||ts,m=e.length;for(i.__d=l,function(t,e,i){var r,n,o,s,a,l=e.length,u=i.length,h=u,c=0;for(t.__k=[],r=0;r<l;r++)null!=(n=t.__k[r]=null==(n=e[r])||"boolean"==typeof n||"function"==typeof n?null:"string"==typeof n||"number"==typeof n||"bigint"==typeof n||n.constructor==String?ss(null,n,null,null,n):is(n)?ss(as,{children:n},null,null,null):void 0===n.constructor&&n.__b>0?ss(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n)?(n.__=t,n.__b=t.__b+1,a=ps(n,i,s=r+c,h),n.__i=a,o=null,-1!==a&&(h--,(o=i[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&c--,"function"!=typeof n.type&&(n.__u|=65536)):a!==s&&(a===s+1?c++:a>s?h>l-s?c+=a-s:c--:c=a<s&&a==s-1?a-s:0,a!==r+c&&(n.__u|=65536))):(o=i[r])&&null==o.key&&o.__e&&(o.__e==t.__d&&(t.__d=us(o)),Is(o,o,!1),i[r]=null,h--);if(h)for(r=0;r<u;r++)null!=(o=i[r])&&0==(131072&o.__u)&&(o.__e==t.__d&&(t.__d=us(o)),Is(o,o))}(i,e,g),l=i.__d,c=0;c<m;c++)null!=(v=i.__k[c])&&"boolean"!=typeof v&&"function"!=typeof v&&(d=-1===v.__i?Qo:g[v.__i]||Qo,v.__i=c,_s(t,v,d,n,o,s,a,l,u,h),f=v.__e,v.ref&&d.ref!=v.ref&&(d.ref&&Cs(d.ref,null,v),h.push(v.ref,v.__c||f,v)),null==p&&null!=f&&(p=f),65536&v.__u||d.__k===v.__k?l=fs(v,l,t):"function"==typeof v.type&&void 0!==v.__d?l=v.__d:f&&(l=f.nextSibling),v.__d=void 0,v.__u&=-196609);i.__d=l,i.__e=p}function fs(t,e,i){var r,n;if("function"==typeof t.type){for(r=t.__k,n=0;r&&n<r.length;n++)r[n]&&(r[n].__=t,e=fs(r[n],e,i));return e}return t.__e!=e&&(i.insertBefore(t.__e,e||null),e=t.__e),e&&e.nextSibling}function ps(t,e,i,r){var n=t.key,o=t.type,s=i-1,a=i+1,l=e[i];if(null===l||l&&n==l.key&&o===l.type)return i;if(r>(null!=l&&0==(131072&l.__u)?1:0))for(;s>=0||a<e.length;){if(s>=0){if((l=e[s])&&0==(131072&l.__u)&&n==l.key&&o===l.type)return s;s--}if(a<e.length){if((l=e[a])&&0==(131072&l.__u)&&n==l.key&&o===l.type)return a;a++}}return-1}function gs(t,e,i){"-"===e[0]?t.setProperty(e,null==i?"":i):t[e]=null==i?"":"number"!=typeof i||es.test(e)?i:i+"px"}function ms(t,e,i,r,n){var o;t:if("style"===e)if("string"==typeof i)t.style.cssText=i;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)i&&e in i||gs(t.style,e,"");if(i)for(e in i)r&&i[e]===r[e]||gs(t.style,e,i[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=i,i?r?i.u=r.u:(i.u=Date.now(),t.addEventListener(e,o?ys:bs,o)):t.removeEventListener(e,o?ys:bs,o);else{if(n)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&"rowSpan"!==e&&"colSpan"!==e&&"role"!==e&&e in t)try{t[e]=null==i?"":i;break t}catch(t){}"function"==typeof i||(null==i||!1===i&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,i))}}function bs(t){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(Go.event?Go.event(t):t)}function ys(t){return this.l[t.type+!0](Go.event?Go.event(t):t)}function _s(t,e,i,r,n,o,s,a,l,u){var h,c,d,v,f,p,g,m,b,y,_,w,C,I,S,k=e.type;if(void 0!==e.constructor)return null;128&i.__u&&(l=!!(32&i.__u),o=[a=e.__e=i.__e]),(h=Go.__b)&&h(e);t:if("function"==typeof k)try{if(m=e.props,b=(h=k.contextType)&&r[h.__c],y=h?b?b.props.value:h.__:r,i.__c?g=(c=e.__c=i.__c).__=c.__E:("prototype"in k&&k.prototype.render?e.__c=c=new k(m,y):(e.__c=c=new ls(m,y),c.constructor=k,c.render=Ss),b&&b.sub(c),c.props=m,c.state||(c.state={}),c.context=y,c.__n=r,d=c.__d=!0,c.__h=[],c._sb=[]),null==c.__s&&(c.__s=c.state),null!=k.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=rs({},c.__s)),rs(c.__s,k.getDerivedStateFromProps(m,c.__s))),v=c.props,f=c.state,c.__v=e,d)null==k.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==k.getDerivedStateFromProps&&m!==v&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,y),!c.__e&&(null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,y)||e.__v===i.__v)){for(e.__v!==i.__v&&(c.props=m,c.state=c.__s,c.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.forEach((function(t){t&&(t.__=e)})),_=0;_<c._sb.length;_++)c.__h.push(c._sb[_]);c._sb=[],c.__h.length&&s.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,y),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(v,f,p)}))}if(c.context=y,c.props=m,c.__P=t,c.__e=!1,w=Go.__r,C=0,"prototype"in k&&k.prototype.render){for(c.state=c.__s,c.__d=!1,w&&w(e),h=c.render(c.props,c.state,c.context),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[]}else do{c.__d=!1,w&&w(e),h=c.render(c.props,c.state,c.context),c.state=c.__s}while(c.__d&&++C<25);c.state=c.__s,null!=c.getChildContext&&(r=rs(rs({},r),c.getChildContext())),d||null==c.getSnapshotBeforeUpdate||(p=c.getSnapshotBeforeUpdate(v,f)),vs(t,is(S=null!=h&&h.type===as&&null==h.key?h.props.children:h)?S:[S],e,i,r,n,o,s,a,l,u),c.base=e.__e,e.__u&=-161,c.__h.length&&s.push(c),g&&(c.__E=c.__=null)}catch(t){e.__v=null,l||null!=o?(e.__e=a,e.__u|=l?160:32,o[o.indexOf(a)]=null):(e.__e=i.__e,e.__k=i.__k),Go.__e(t,e,i)}else null==o&&e.__v===i.__v?(e.__k=i.__k,e.__e=i.__e):e.__e=function(t,e,i,r,n,o,s,a,l){var u,h,c,d,v,f,p,g=i.props,m=e.props,b=e.type;if("svg"===b&&(n=!0),null!=o)for(u=0;u<o.length;u++)if((v=o[u])&&"setAttribute"in v==!!b&&(b?v.localName===b:3===v.nodeType)){t=v,o[u]=null;break}if(null==t){if(null===b)return document.createTextNode(m);t=n?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,m.is&&m),o=null,a=!1}if(null===b)g===m||a&&t.data===m||(t.data=m);else{if(o=o&&Yo.call(t.childNodes),g=i.props||Qo,!a&&null!=o)for(g={},u=0;u<t.attributes.length;u++)g[(v=t.attributes[u]).name]=v.value;for(u in g)v=g[u],"children"==u||("dangerouslySetInnerHTML"==u?c=v:"key"===u||u in m||ms(t,u,null,v,n));for(u in m)v=m[u],"children"==u?d=v:"dangerouslySetInnerHTML"==u?h=v:"value"==u?f=v:"checked"==u?p=v:"key"===u||a&&"function"!=typeof v||g[u]===v||ms(t,u,v,g[u],n);if(h)a||c&&(h.__html===c.__html||h.__html===t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(c&&(t.innerHTML=""),vs(t,is(d)?d:[d],e,i,r,n&&"foreignObject"!==b,o,s,o?o[0]:i.__k&&us(i,0),a,l),null!=o)for(u=o.length;u--;)null!=o[u]&&ns(o[u]);a||(u="value",void 0!==f&&(f!==t[u]||"progress"===b&&!f||"option"===b&&f!==g[u])&&ms(t,u,f,g[u],!1),u="checked",void 0!==p&&p!==t[u]&&ms(t,u,p,g[u],!1))}return t}(i.__e,e,i,r,n,o,s,l,u);(h=Go.diffed)&&h(e)}function ws(t,e,i){e.__d=void 0;for(var r=0;r<i.length;r++)Cs(i[r],i[++r],i[++r]);Go.__c&&Go.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){Go.__e(t,e.__v)}}))}function Cs(t,e,i){try{"function"==typeof t?t(e):t.current=e}catch(t){Go.__e(t,i)}}function Is(t,e,i){var r,n;if(Go.unmount&&Go.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Cs(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){Go.__e(t,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(n=0;n<r.length;n++)r[n]&&Is(r[n],e,i||"function"!=typeof t.type);i||null==t.__e||ns(t.__e),t.__=t.__e=t.__d=void 0}function Ss(t,e,i){return this.constructor(t,i)}function ks(t,e,i){var r,n,o,s;Go.__&&Go.__(t,e),n=(r="function"==typeof i)?null:e.__k,o=[],s=[],_s(e,t=(!r&&i||e).__k=os(as,null,[t]),n||Qo,Qo,void 0!==e.ownerSVGElement,!r&&i?[i]:n?null:e.firstChild?Yo.call(e.childNodes):null,o,!r&&i?i:n?n.__e:e.firstChild,r,s),ws(o,t,s)}function xs(t,e,i){var r,n,o,s,a=rs({},t.props);for(o in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)"key"==o?r=e[o]:"ref"==o?n=e[o]:a[o]=void 0===e[o]&&void 0!==s?s[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?Yo.call(arguments,2):i),ss(t.type,a,r||t.key,n||t.ref,null)}Yo=ts.slice,Go={__e:function(t,e,i,r){for(var n,o,s;e=e.__;)if((n=e.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(t)),s=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t,r||{}),s=n.__d),s)return n.__E=n}catch(e){t=e}throw t}},Wo=0,ls.prototype.setState=function(t,e){var i;i=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=rs({},this.state),"function"==typeof t&&(t=t(rs({},i),this.props)),t&&rs(i,t),null!=t&&this.__v&&(e&&this._sb.push(e),cs(this))},ls.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),cs(this))},ls.prototype.render=as,zo=[],Xo="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Jo=function(t,e){return t.__v.__b-e.__v.__b},ds.__r=0,Ko=0;var As,Ts,Ms,Ns,Rs=0,Es=[],Fs=[],Os=Go.__b,Ps=Go.__r,Ls=Go.diffed,Ds=Go.__c,Bs=Go.unmount;function $s(t,e){Go.__h&&Go.__h(Ts,t,Rs||e),Rs=0;var i=Ts.__H||(Ts.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:Fs}),i.__[t]}function Zs(t){return Rs=1,function(t,e,i){var r=$s(As++,2);if(r.t=t,!r.__c&&(r.__=[Xs(void 0,e),function(t){var e=r.__N?r.__N[0]:r.__[0],i=r.t(e,t);e!==i&&(r.__N=[i,r.__[1]],r.__c.setState({}))}],r.__c=Ts,!Ts.u)){var n=function(t,e,i){if(!r.__c.__H)return!0;var n=r.__c.__H.__.filter((function(t){return t.__c}));if(n.every((function(t){return!t.__N})))return!o||o.call(this,t,e,i);var s=!1;return n.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(s=!0)}})),!(!s&&r.__c.props===t)&&(!o||o.call(this,t,e,i))};Ts.u=!0;var o=Ts.shouldComponentUpdate,s=Ts.componentWillUpdate;Ts.componentWillUpdate=function(t,e,i){if(this.__e){var r=o;o=void 0,n(t,e,i),o=r}s&&s.call(this,t,e,i)},Ts.shouldComponentUpdate=n}return r.__N||r.__}(Xs,t)}function qs(t,e){var i=$s(As++,3);!Go.__s&&Us(i.__H,e)&&(i.__=t,i.i=e,Ts.__H.__h.push(i))}function Hs(t,e){var i=$s(As++,7);return Us(i.__H,e)?(i.__V=t(),i.i=e,i.__h=t,i.__V):i.__}function Vs(t){var e=Ts.context[t.__c],i=$s(As++,9);return i.c=t,e?(null==i.__&&(i.__=!0,e.sub(Ts)),e.props.value):t.__}function js(){for(var t;t=Es.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ws),t.__H.__h.forEach(zs),t.__H.__h=[]}catch(e){t.__H.__h=[],Go.__e(e,t.__v)}}Go.__b=function(t){Ts=null,Os&&Os(t)},Go.__r=function(t){Ps&&Ps(t),As=0;var e=(Ts=t.__c).__H;e&&(Ms===Ts?(e.__h=[],Ts.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=Fs,t.__N=t.i=void 0}))):(e.__h.forEach(Ws),e.__h.forEach(zs),e.__h=[],As=0)),Ms=Ts},Go.diffed=function(t){Ls&&Ls(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==Es.push(e)&&Ns===Go.requestAnimationFrame||((Ns=Go.requestAnimationFrame)||Gs)(js)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==Fs&&(t.__=t.__V),t.i=void 0,t.__V=Fs}))),Ms=Ts=null},Go.__c=function(t,e){e.some((function(t){try{t.__h.forEach(Ws),t.__h=t.__h.filter((function(t){return!t.__||zs(t)}))}catch(i){e.some((function(t){t.__h&&(t.__h=[])})),e=[],Go.__e(i,t.__v)}})),Ds&&Ds(t,e)},Go.unmount=function(t){Bs&&Bs(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach((function(t){try{Ws(t)}catch(t){e=t}})),i.__H=void 0,e&&Go.__e(e,i.__v))};var Ys="function"==typeof requestAnimationFrame;function Gs(t){var e,i=function(){clearTimeout(r),Ys&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(i,100);Ys&&(e=requestAnimationFrame(i))}function Ws(t){var e=Ts,i=t.__c;"function"==typeof i&&(t.__c=void 0,i()),Ts=e}function zs(t){var e=Ts;t.__c=t.__(),Ts=e}function Us(t,e){return!t||t.length!==e.length||e.some((function(e,i){return e!==t[i]}))}function Xs(t,e){return"function"==typeof e?e(t):e}var Js=Ar("[Surveys]");function Ks(t){return!(!t.start_date||t.end_date)}function Qs(t){var e,i,r;return!(null==(e=t.conditions)||null==(i=e.events)||null==(r=i.values)||!r.length)}function ta(t){var e,i,r;return!(null==(e=t.conditions)||null==(i=e.actions)||null==(r=i.values)||!r.length)}var ea="seenSurvey_",ia=Ar("[Stylesheet Loader]"),ra=(t,e,i)=>{var r,n=t.createElement("style");return n.innerText=e,null!=i&&null!=(r=i.config)&&r.prepare_external_dependency_stylesheet&&(n=i.config.prepare_external_dependency_stylesheet(n)),n||(ia.error("prepare_external_dependency_stylesheet returned null"),null)},na=function(t,e){if(!function(t){try{new RegExp(t)}catch(t){return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch(t){return!1}},oa="Mobile",sa="iOS",aa="Android",la="Tablet",ua=aa+" "+la,ha="iPad",ca="Apple",da=ca+" Watch",va="Safari",fa="BlackBerry",pa="Samsung",ga=pa+"Browser",ma=pa+" Internet",ba="Chrome",ya=ba+" OS",_a=ba+" "+sa,wa="Internet Explorer",Ca=wa+" "+oa,Ia="Opera",Sa=Ia+" Mini",ka="Edge",xa="Microsoft "+ka,Aa="Firefox",Ta=Aa+" "+sa,Ma="Nintendo",Na="PlayStation",Ra="Xbox",Ea=aa+" "+oa,Fa=oa+" "+va,Oa="Windows",Pa=Oa+" Phone",La="Nokia",Da="Ouya",Ba="Generic",$a=Ba+" "+oa.toLowerCase(),Za=Ba+" "+la.toLowerCase(),qa="Konqueror",Ha="(\\d+(\\.\\d+)?)",Va=new RegExp("Version/"+Ha),ja=new RegExp(Ra,"i"),Ya=new RegExp(Na+" \\w+","i"),Ga=new RegExp(Ma+" \\w+","i"),Wa=new RegExp(fa+"|PlayBook|BB10","i"),za={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"};var Ua=(t,e)=>e&&er(e,ca)||function(t){return er(t,va)&&!er(t,ba)&&!er(t,aa)}(t),Xa=function(t,e){return e=e||"",er(t," OPR/")&&er(t,"Mini")?Sa:er(t," OPR/")?Ia:Wa.test(t)?fa:er(t,"IE"+oa)||er(t,"WPDesktop")?Ca:er(t,ga)?ma:er(t,ka)||er(t,"Edg/")?xa:er(t,"FBIOS")?"Facebook "+oa:er(t,"UCWEB")||er(t,"UCBrowser")?"UC Browser":er(t,"CriOS")?_a:er(t,"CrMo")||er(t,ba)?ba:er(t,aa)&&er(t,va)?Ea:er(t,"FxiOS")?Ta:er(t.toLowerCase(),qa.toLowerCase())?qa:Ua(t,e)?er(t,oa)?Fa:va:er(t,Aa)?Aa:er(t,"MSIE")||er(t,"Trident/")?wa:er(t,"Gecko")?Aa:""},Ja={[Ca]:[new RegExp("rv:"+Ha)],[xa]:[new RegExp(ka+"?\\/"+Ha)],[ba]:[new RegExp("("+ba+"|CrMo)\\/"+Ha)],[_a]:[new RegExp("CriOS\\/"+Ha)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Ha)],[va]:[Va],[Fa]:[Va],[Ia]:[new RegExp("(Opera|OPR)\\/"+Ha)],[Aa]:[new RegExp(Aa+"\\/"+Ha)],[Ta]:[new RegExp("FxiOS\\/"+Ha)],[qa]:[new RegExp("Konqueror[:/]?"+Ha,"i")],[fa]:[new RegExp(fa+" "+Ha),Va],[Ea]:[new RegExp("android\\s"+Ha,"i")],[ma]:[new RegExp(ga+"\\/"+Ha)],[wa]:[new RegExp("(rv:|MSIE )"+Ha)],Mozilla:[new RegExp("rv:"+Ha)]},Ka=function(t,e){var i=Xa(t,e),r=Ja[i];if(fr(r))return null;for(var n=0;n<r.length;n++){var o=r[n],s=t.match(o);if(s)return parseFloat(s[s.length-2])}return null},Qa=[[new RegExp(Ra+"; "+Ra+" (.*?)[);]","i"),t=>[Ra,t&&t[1]||""]],[new RegExp(Ma,"i"),[Ma,""]],[new RegExp(Na,"i"),[Na,""]],[Wa,[fa,""]],[new RegExp(Oa,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Pa,""];if(new RegExp(oa).test(e)&&!/IEMobile\b/.test(e))return[Oa+" "+oa,""];var i=/Windows NT ([0-9.]+)/i.exec(e);if(i&&i[1]){var r=i[1],n=za[r]||"";return/arm/i.test(e)&&(n="RT"),[Oa,n]}return[Oa,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[sa,e.join(".")]}return[sa,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=fr(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+aa+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+aa+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[aa,e.join(".")]}return[aa,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var i=[t[1],t[2],t[3]||"0"];e[1]=i.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[ya,""]],[/Linux|debian/i,["Linux",""]]],tl=function(t){return Ga.test(t)?Ma:Ya.test(t)?Na:ja.test(t)?Ra:new RegExp(Da,"i").test(t)?Da:new RegExp("("+Pa+"|WPDesktop)","i").test(t)?Pa:/iPad/.test(t)?ha:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?da:Wa.test(t)?fa:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(La,"i").test(t)?La:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(oa).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?aa:ua:aa:new RegExp("(pda|"+oa+")","i").test(t)?$a:new RegExp(la,"i").test(t)&&!new RegExp(la+" pc","i").test(t)?Za:""},el=function(t){var e=tl(t);return e===ha||e===ua||"Kobo"===e||"Kindle Fire"===e||e===Za?la:e===Ma||e===Ra||e===Na||e===Da?"Console":e===da?"Wearable":e?oa:"Desktop"},il=$i,rl=Yi,nl=2147483647;function ol(t){if("inherit"===t)return"inherit";var e='BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"';return t?t+", "+e:"-apple-system, "+e}var sl=t=>{var e={[$o.Left]:"left: 30px;",[$o.Right]:"right: 60px;",[$o.Center]:"\n            left: 50%;\n            transform: translateX(-50%);\n          ",[$o.NextToTrigger]:"right: 30px;"};return("\n          .survey-form, .thank-you-message {\n              position: fixed;\n              margin: 0px;\n              bottom: 0px;\n              color: black;\n              font-weight: normal;\n              font-family: "+ol(null==t?void 0:t.fontFamily)+";\n              text-align: left;\n              max-width: "+parseInt((null==t?void 0:t.maxWidth)||"300")+"px;\n              width: 100%;\n              z-index: "+parseInt((null==t?void 0:t.zIndex)||nl.toString())+";\n              border: 1.5px solid "+((null==t?void 0:t.borderColor)||"#c9c6c6")+";\n              border-bottom: 0px;\n              "+(null!=t&&t.position?e[t.position]:e[$o.Right])+"\n              flex-direction: column;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n              border-top-left-radius: 10px;\n              border-top-right-radius: 10px;\n              box-shadow: -6px 0 16px -8px rgb(0 0 0 / 8%), -9px 0 28px 0 rgb(0 0 0 / 5%), -12px 0 48px 16px rgb(0 0 0 / 3%);\n          }\n\n          .survey-box, .thank-you-message-container {\n              padding: 20px 25px 10px;\n              display: flex;\n              flex-direction: column;\n              border-radius: 10px;\n          }\n\n          .thank-you-message {\n              text-align: center;\n          }\n\n          .form-submit[disabled] {\n              opacity: "+((null==t?void 0:t.disabledButtonOpacity)||"0.6")+";\n              filter: grayscale(50%);\n              cursor: not-allowed;\n          }\n          .survey-form textarea {\n              color: #2d2d2d;\n              font-size: 14px;\n              font-family: "+ol(null==t?void 0:t.fontFamily)+";\n              background: white;\n              color: black;\n              outline: none;\n              padding-left: 10px;\n              padding-right: 10px;\n              padding-top: 10px;\n              border-radius: 6px;\n              border-color: "+((null==t?void 0:t.borderColor)||"#c9c6c6")+";\n              margin-top: 14px;\n              width: 100%;\n              box-sizing: border-box;\n          }\n          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) textarea {\n              margin-top: 0;\n          }\n          .form-submit {\n              box-sizing: border-box;\n              margin: 0;\n              font-family: inherit;\n              overflow: visible;\n              text-transform: none;\n              position: relative;\n              display: inline-block;\n              font-weight: 700;\n              white-space: nowrap;\n              text-align: center;\n              border: 1.5px solid transparent;\n              cursor: pointer;\n              user-select: none;\n              touch-action: manipulation;\n              padding: 12px;\n              font-size: 14px;\n              border-radius: 6px;\n              outline: 0;\n              background: "+((null==t?void 0:t.submitButtonColor)||"black")+" !important;\n              text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);\n              box-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);\n              width: 100%;\n          }\n          .form-cancel {\n              display: flex;\n              float: right;\n              border: none;\n              background: none;\n              cursor: pointer;\n          }\n          .cancel-btn-wrapper {\n              position: absolute;\n              width: 35px;\n              height: 35px;\n              border-radius: 100%;\n              top: 0;\n              right: 0;\n              transform: translate(50%, -50%);\n              background: white;\n              border: 1.5px solid "+((null==t?void 0:t.borderColor)||"#c9c6c6")+";\n              display: flex;\n              justify-content: center;\n              align-items: center;\n          }\n          .bolded { font-weight: 600; }\n          .buttons {\n              display: flex;\n              justify-content: center;\n          }\n          .footer-branding {\n              font-size: 11px;\n              margin-top: 10px;\n              text-align: center;\n              display: flex;\n              justify-content: center;\n              gap: 4px;\n              align-items: center;\n              font-weight: 500;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n              text-decoration: none;\n              backgroundColor: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n              color: "+ll((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n          }\n          .survey-question {\n              font-weight: 500;\n              font-size: 14px;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n          }\n          .question-textarea-wrapper {\n              display: flex;\n              flex-direction: column;\n          }\n          .survey-question-description {\n              font-size: 13px;\n              padding-top: 5px;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n          }\n          .ratings-number {\n              font-size: 16px;\n              font-weight: 600;\n              padding: 8px 0px;\n              border: none;\n          }\n          .ratings-number:hover {\n              cursor: pointer;\n          }\n          .rating-options {\n              margin-top: 14px;\n          }\n          .rating-options-number {\n              display: grid;\n              border-radius: 6px;\n              overflow: hidden;\n              border: 1.5px solid "+((null==t?void 0:t.borderColor)||"#c9c6c6")+";\n          }\n          .rating-options-number > .ratings-number {\n              border-right: 1px solid "+((null==t?void 0:t.borderColor)||"#c9c6c6")+";\n          }\n          .rating-options-number > .ratings-number:last-of-type {\n              border-right: 0px;\n          }\n          .rating-options-number .rating-active {\n              background: "+((null==t?void 0:t.ratingButtonActiveColor)||"black")+";\n          }\n          .rating-options-emoji {\n              display: flex;\n              justify-content: space-between;\n          }\n          .ratings-emoji {\n              font-size: 16px;\n              background-color: transparent;\n              border: none;\n              padding: 0px;\n          }\n          .ratings-emoji:hover {\n              cursor: pointer;\n          }\n          .ratings-emoji.rating-active svg {\n              fill: "+((null==t?void 0:t.ratingButtonActiveColor)||"black")+";\n          }\n          .emoji-svg {\n              fill: '#939393';\n          }\n          .rating-text {\n              display: flex;\n              flex-direction: row;\n              font-size: 11px;\n              justify-content: space-between;\n              margin-top: 6px;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n              opacity: .60;\n          }\n          .limit-height {\n              max-height: 300px;\n              overflow: auto;\n              scrollbar-width: thin;\n              scrollbar-color: "+((null==t?void 0:t.borderColor)||"#c9c6c6")+" "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n          }\n          .multiple-choice-options {\n              margin-top: 13px;\n              font-size: 14px;\n          }\n          .survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) .multiple-choice-options {\n              margin-top: 0;\n          }\n          .multiple-choice-options .choice-option {\n              display: flex;\n              align-items: center;\n              gap: 4px;\n              font-size: 13px;\n              cursor: pointer;\n              margin-bottom: 5px;\n              position: relative;\n          }\n          .multiple-choice-options > .choice-option:last-of-type {\n              margin-bottom: 0px;\n          }\n          .multiple-choice-options input {\n              cursor: pointer;\n              position: absolute;\n              opacity: 0;\n          }\n          .choice-check {\n              position: absolute;\n              right: 10px;\n              background: white;\n          }\n          .choice-check svg {\n              display: none;\n          }\n          .multiple-choice-options .choice-option:hover .choice-check svg {\n              display: inline-block;\n              opacity: .25;\n          }\n          .multiple-choice-options input:checked + label + .choice-check svg {\n              display: inline-block;\n              opacity: 100% !important;\n          }\n          .multiple-choice-options input:checked + label {\n              font-weight: bold;\n              border: 1.5px solid rgba(0,0,0);\n          }\n          .multiple-choice-options input:checked + label input {\n              font-weight: bold;\n          }\n          .multiple-choice-options label {\n              width: 100%;\n              cursor: pointer;\n              padding: 10px;\n              border: 1.5px solid rgba(0,0,0,.25);\n              border-radius: 4px;\n              background: white;\n          }\n          .multiple-choice-options .choice-option-open label {\n              padding-right: 30px;\n              display: flex;\n              flex-wrap: wrap;\n              gap: 8px;\n              max-width: 100%;\n          }\n          .multiple-choice-options .choice-option-open label span {\n              width: 100%;\n          }\n          .multiple-choice-options .choice-option-open input:disabled + label {\n              opacity: 0.6;\n          }\n          .multiple-choice-options .choice-option-open label input {\n              position: relative;\n              opacity: 1;\n              flex-grow: 1;\n              border: 0;\n              outline: 0;\n          }\n          .thank-you-message-body {\n              margin-top: 6px;\n              font-size: 14px;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n          }\n          .thank-you-message-header {\n              margin: 10px 0px 0px;\n              background: "+((null==t?void 0:t.backgroundColor)||"#eeeded")+";\n          }\n          .thank-you-message-container .form-submit {\n              margin-top: 20px;\n              margin-bottom: 10px;\n          }\n          .thank-you-message-countdown {\n              margin-left: 6px;\n          }\n          .bottom-section {\n              margin-top: 14px;\n          }\n          ").replace(/[\n\r\t]+/g," ").replace(/\s{2,}/g," ").trim()};function al(t){if("#"===t[0]){var e=t.replace(/^#/,"");return"rgb("+parseInt(e.slice(0,2),16)+","+parseInt(e.slice(2,4),16)+","+parseInt(e.slice(4,6),16)+")"}return"rgb(255, 255, 255)"}function ll(t){var e;void 0===t&&(t=hl),"#"===t[0]&&(e=al(t)),t.startsWith("rgb")&&(e=t);var i=function(t){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[t.toLowerCase()]}(t);if(i&&(e=al(i)),!e)return"black";var r=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(r){var n=parseInt(r[1]),o=parseInt(r[2]),s=parseInt(r[3]);return Math.sqrt(n*n*.299+o*o*.587+s*s*.114)>127.5?"black":"white"}return"black"}var ul={backgroundColor:"#eeeded",submitButtonColor:"black",submitButtonTextColor:"white",ratingButtonColor:"white",ratingButtonActiveColor:"black",borderColor:"#c9c6c6",placeholder:"Start typing...",whiteLabel:!1,displayThankYouMessage:!0,thankYouMessageHeader:"Thank you for your feedback!",position:$o.Right},hl="#eeeded",cl=function(t,e,r){void 0===t&&(t={}),r?(localStorage.setItem(ml(e),"true"),r.capture("survey sent",i({$survey_name:e.name,$survey_id:e.id,$survey_iteration:e.current_iteration,$survey_iteration_start_date:e.current_iteration_start_date,$survey_questions:e.questions.map(((t,e)=>({id:t.id,question:t.question,index:e}))),sessionRecordingUrl:null==r.get_session_replay_url?void 0:r.get_session_replay_url()},t,{$set:{[bl(e,"responded")]:!0}})),il.dispatchEvent(new CustomEvent("PHSurveySent",{detail:{surveyId:e.id}}))):Js.error("[survey sent] event not captured, PostHog instance not found.")},dl=(t,e,i)=>{e?i||(e.capture("survey dismissed",{$survey_name:t.name,$survey_id:t.id,$survey_iteration:t.current_iteration,$survey_iteration_start_date:t.current_iteration_start_date,sessionRecordingUrl:null==e.get_session_replay_url?void 0:e.get_session_replay_url(),$set:{[bl(t,"dismissed")]:!0}}),localStorage.setItem(ml(t),"true"),il.dispatchEvent(new CustomEvent("PHSurveyClosed",{detail:{surveyId:t.id}}))):Js.error("[survey dismissed] event not captured, PostHog instance not found.")},vl=t=>t.map((t=>({sort:Math.floor(10*Math.random()),value:t}))).sort(((t,e)=>t.sort-e.sort)).map((t=>t.value)),fl=(t,e)=>t.length===e.length&&t.every(((t,i)=>t===e[i]))?e.reverse():e,pl=t=>t.appearance&&t.appearance.shuffleQuestions?fl(t.questions,vl(t.questions)):t.questions,gl=t=>{var e,i;return!(null==(e=t.conditions)||null==(i=e.events)||!i.repeatedActivation||!(t=>{var e,i,r,n,o,s;return null!=(null==(e=t.conditions)||null==(i=e.events)||null==(r=i.values)?void 0:r.length)&&(null==(n=t.conditions)||null==(o=n.events)||null==(s=o.values)?void 0:s.length)>0})(t))||t.schedule===Vo.Always},ml=t=>{var e=""+ea+t.id;return t.current_iteration&&t.current_iteration>0&&(e=""+ea+t.id+"_"+t.current_iteration),e},bl=(t,e)=>{var i="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(i="$survey_"+e+"/"+t.id+"/"+t.current_iteration),i},yl=function(t,e){var i={__c:e="__cC"+Ko++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var i,r;return this.getChildContext||(i=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&i.some((function(t){t.__e=!0,cs(t)}))},this.sub=function(t){i.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){i.splice(i.indexOf(t),1),e&&e.call(t)}}),t.children}};return i.Provider.__=i.Consumer.contextType=i}({isPreviewMode:!1,previewPageIndex:0,onPopupSurveyDismissed:()=>{},isPopup:!0,onPreviewSubmit:()=>{}}),_l=t=>{var{component:e,children:i,renderAsHtml:r,style:n}=t;return xs(e,r?{dangerouslySetInnerHTML:{__html:i},style:n}:{children:i,style:n})},wl={icontains:(t,e)=>t.some((t=>e.toLowerCase().includes(t.toLowerCase()))),not_icontains:(t,e)=>t.every((t=>!e.toLowerCase().includes(t.toLowerCase()))),regex:(t,e)=>t.some((t=>na(e,t))),not_regex:(t,e)=>t.every((t=>!na(e,t))),exact:(t,e)=>t.some((t=>e===t)),is_not:(t,e)=>t.every((t=>e!==t))};function Cl(t){return null!=t?t:"icontains"}function Il(t){var e,i,r;if(null==(e=t.conditions)||!e.url)return!0;var n=null==il||null==(i=il.location)?void 0:i.href;if(!n)return!1;var o=[t.conditions.url];return wl[Cl(null==(r=t.conditions)?void 0:r.urlMatchType)](o,n)}function Sl(t,e){void 0===e&&(e=!1);var i="PostHogSurvey-"+t.id;return e?"."+i:i}var kl=Yi;function xl(t,e){var i,r=Sl(t),n=kl.querySelector("."+r);if(n&&n.shadowRoot)return n.shadowRoot;var o=kl.createElement("div");o.className=r;var s=o.attachShadow({mode:"open"}),a="\n        .ph-survey-widget-tab {\n            position: fixed;\n            top: 50%;\n            right: 0;\n            background: "+((null==(i=t.appearance)?void 0:i.widgetColor)||"#e0a045")+";\n            color: white;\n            transform: rotate(-90deg) translate(0, -100%);\n            transform-origin: right top;\n            min-width: 40px;\n            padding: 8px 12px;\n            font-weight: 500;\n            border-radius: 3px 3px 0 0;\n            text-align: center;\n            cursor: pointer;\n            z-index: "+nl+";\n        }\n        .ph-survey-widget-tab:hover {\n            padding-bottom: 13px;\n        }\n        .ph-survey-widget-button {\n            position: fixed;\n        }\n    ",l=ra(kl,a,e);return l&&s.append(l),kl.body.appendChild(o),s}var Al=0;function Tl(t,e,i,r,n,o){var s,a,l={};for(a in e)"ref"==a?s=e[a]:l[a]=e[a];var u={type:t,props:l,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Al,__i:-1,__u:0,__source:n,__self:o};if("function"==typeof t&&(s=t.defaultProps))for(a in s)void 0===l[a]&&(l[a]=s[a]);return Go.vnode&&Go.vnode(u),u}var Ml=Tl("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Tl("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Nl=Tl("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Tl("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Rl=Tl("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Tl("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),El=Tl("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Tl("path",{d:"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z"})}),Fl=Tl("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:Tl("path",{d:"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Ol=Tl("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Tl("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z",fill:"black"})}),Pl=Tl("svg",{width:"77",height:"14",viewBox:"0 0 77 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Tl("g",{"clip-path":"url(#clip0_2415_6911)",children:[Tl("mask",{id:"mask0_2415_6911",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"77",height:"14",children:Tl("path",{d:"M0.5 0H76.5V14H0.5V0Z",fill:"white"})}),Tl("g",{mask:"url(#mask0_2415_6911)",children:[Tl("path",{d:"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z",fill:"#1D4AFF"}),Tl("path",{d:"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z",fill:"#F9BD2B"}),Tl("path",{d:"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z",fill:"currentColor"}),Tl("path",{d:"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z",fill:"#1D4AFF"}),Tl("path",{d:"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z",fill:"#F54E00"}),Tl("path",{d:"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z",fill:"currentColor"})]})]}),Tl("defs",{children:Tl("clipPath",{id:"clip0_2415_6911",children:Tl("rect",{width:"76",height:"14",fill:"white",transform:"translate(0.5)"})})})]}),Ll=Tl("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Tl("path",{d:"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z",fill:"currentColor"})});function Dl(){return Tl("a",{href:"https://posthog.com",target:"_blank",rel:"noopener",className:"footer-branding",children:["Survey by ",Pl]})}function Bl(t){var{text:e,submitDisabled:i,appearance:r,onSubmit:n,link:o,onPreviewSubmit:s}=t,{isPreviewMode:a,isPopup:l}=Vs(yl),u=r.submitButtonTextColor||ll(r.submitButtonColor||ul.submitButtonColor);return Tl("div",{className:"bottom-section",children:[Tl("div",{className:"buttons",children:Tl("button",{className:"form-submit",disabled:i,"aria-label":"Submit survey",type:"button",style:l?{color:u}:{},onClick:()=>{o&&(null==$i||$i.open(o)),a?null==s||s():n()},children:e})}),!r.whiteLabel&&Tl(Dl,{})]})}function $l(t){var{question:e,description:i,descriptionContentType:r,backgroundColor:n,forceDisableHtml:o}=t,{isPopup:s}=Vs(yl);return Tl("div",{style:s?{backgroundColor:n||ul.backgroundColor}:{},children:[Tl("div",{className:"survey-question",children:e}),i&&_l({component:os("div",{className:"survey-question-description"}),children:i,renderAsHtml:!o&&"text"!==r})]})}function Zl(t){var{onClick:e}=t,{isPreviewMode:i}=Vs(yl);return Tl("div",{className:"cancel-btn-wrapper",children:Tl("button",{className:"form-cancel",onClick:e,disabled:i,"aria-label":"Close survey",type:"button",role:"button",children:Ol})})}function ql(t){var{header:e,description:r,contentType:n,forceDisableHtml:o,appearance:s,onClose:a,styleOverrides:l}=t,u=ll(s.backgroundColor||ul.backgroundColor),{isPopup:h}=Vs(yl);return Tl("div",{className:"thank-you-message",style:i({},l),children:Tl("div",{className:"thank-you-message-container",children:[h&&Tl(Zl,{onClick:()=>a()}),Tl("h3",{className:"thank-you-message-header",style:{color:u},children:e}),r&&_l({component:os("div",{className:"thank-you-message-body"}),children:r,renderAsHtml:!o&&"text"!==n,style:{color:u}}),h&&Tl(Bl,{text:s.thankYouMessageCloseButtonText||"Close",submitDisabled:!1,appearance:s,onSubmit:()=>a()})]})})}function Hl(t){var{question:e,forceDisableHtml:i,appearance:r,onSubmit:n,onPreviewSubmit:o}=t,[s,a]=Zs("");return Tl(as,{children:[Tl("div",{className:"question-container",children:[Tl($l,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,backgroundColor:r.backgroundColor,forceDisableHtml:i}),Tl("textarea",{rows:4,placeholder:null==r?void 0:r.placeholder,onInput:t=>{a(t.currentTarget.value),t.stopPropagation()},onKeyDown:t=>{t.stopPropagation()}})]}),Tl(Bl,{text:e.buttonText||"Submit",submitDisabled:!s&&!e.optional,appearance:r,onSubmit:()=>n(s),onPreviewSubmit:()=>o(s)})]})}function Vl(t){var{question:e,forceDisableHtml:i,appearance:r,onSubmit:n,onPreviewSubmit:o}=t;return Tl(as,{children:[Tl("div",{className:"question-container",children:Tl($l,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,forceDisableHtml:i})}),Tl(Bl,{text:e.buttonText||"Submit",submitDisabled:!1,link:e.link,appearance:r,onSubmit:()=>n("link clicked"),onPreviewSubmit:()=>o("link clicked")})]})}function jl(t){var{question:e,forceDisableHtml:i,displayQuestionIndex:r,appearance:n,onSubmit:o,onPreviewSubmit:s}=t,a=e.scale,l=10===e.scale?0:1,[u,h]=Zs(null);return Tl(as,{children:[Tl("div",{className:"question-container",children:[Tl($l,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,forceDisableHtml:i,backgroundColor:n.backgroundColor}),Tl("div",{className:"rating-section",children:[Tl("div",{className:"rating-options",children:["emoji"===e.display&&Tl("div",{className:"rating-options-emoji",children:(3===e.scale?zl:Ul).map(((t,e)=>{var i=e+1===u;return Tl("button",{className:"ratings-emoji question-"+r+"-rating-"+e+" "+(i?"rating-active":""),value:e+1,type:"button",onClick:()=>{h(e+1)},style:{fill:i?n.ratingButtonActiveColor:n.ratingButtonColor,borderColor:n.borderColor},children:t},e)}))}),"number"===e.display&&Tl("div",{className:"rating-options-number",style:{gridTemplateColumns:"repeat("+(a-l+1)+", minmax(0, 1fr))"},children:Ql(e.scale).map(((t,e)=>Tl(Yl,{displayQuestionIndex:r,active:u===t,appearance:n,num:t,setActiveNumber:t=>{h(t)}},e)))})]}),Tl("div",{className:"rating-text",children:[Tl("div",{children:e.lowerBoundLabel}),Tl("div",{children:e.upperBoundLabel})]})]})]}),Tl(Bl,{text:e.buttonText||(null==n?void 0:n.submitButtonText)||"Submit",submitDisabled:mr(u)&&!e.optional,appearance:n,onSubmit:()=>o(u),onPreviewSubmit:()=>s(u)})]})}function Yl(t){var{num:e,active:i,displayQuestionIndex:r,appearance:n,setActiveNumber:o}=t;return Tl("button",{className:"ratings-number question-"+r+"-rating-"+e+" "+(i?"rating-active":""),type:"button",onClick:()=>{o(e)},style:{color:ll(i?n.ratingButtonActiveColor:n.ratingButtonColor),backgroundColor:i?n.ratingButtonActiveColor:n.ratingButtonColor,borderColor:n.borderColor},children:e})}function Gl(t,e,i,r){if(r)return!1;if(mr(t))return!0;if(lr(t)){if(!e&&0===t.length)return!0;if(e&&!i&&0===t.length)return!0}return!1}function Wl(t){var{question:e,forceDisableHtml:i,displayQuestionIndex:r,appearance:n,onSubmit:o,onPreviewSubmit:s}=t,a=function(t){return Rs=5,Hs((function(){return{current:t}}),[])}(null),l=Hs((()=>(t=>{if(!t.shuffleOptions)return t.choices;var e=t.choices,i="";t.hasOpenChoice&&(i=e.pop());var r=fl(e,vl(e));return t.hasOpenChoice&&(t.choices.push(i),r.push(i)),r})(e)),[e]),[u,h]=Zs(e.type===qo.MultipleChoice?[]:null),[c,d]=Zs(!1),[v,f]=Zs(""),p=e.type===qo.SingleChoice?"radio":"checkbox",g=(t,i)=>i?(d(!c),void(c||setTimeout((()=>{var t;return null==(t=a.current)?void 0:t.focus()}),0))):e.type===qo.SingleChoice?(h(t),void d(!1)):void(e.type===qo.MultipleChoice&&lr(u)&&(u.includes(t)?h(u.filter((e=>e!==t))):h([...u,t])));return Tl(as,{children:[Tl("div",{className:"question-container",children:[Tl($l,{question:e.question,description:e.description,descriptionContentType:e.descriptionContentType,forceDisableHtml:i,backgroundColor:n.backgroundColor}),Tl("div",{className:"multiple-choice-options limit-height",children:l.map(((t,i)=>{var n=!!e.hasOpenChoice&&i===e.choices.length-1,o="choice-option"+(n?" choice-option-open":""),s=n?c:e.type===qo.SingleChoice?u===t:lr(u)&&u.includes(t);return Tl("div",{className:o,children:[Tl("input",{type:p,id:"surveyQuestion"+r+"Choice"+i,name:"question"+r,checked:s,onClick:()=>g(t,n)}),Tl("label",{htmlFor:"surveyQuestion"+r+"Choice"+i,style:{color:"black"},children:n?Tl(as,{children:[Tl("span",{children:[t,":"]}),Tl("input",{type:"text",ref:a,id:"surveyQuestion"+r+"Choice"+i+"Open",name:"question"+r,value:v,onKeyDown:t=>{t.stopPropagation()},onInput:t=>(t=>{t.stopPropagation(),f(t.currentTarget.value),e.type===qo.SingleChoice&&h(t.currentTarget.value)})(t),onClick:e=>{c||g(t,!0),e.stopPropagation()}})]}):t}),Tl("span",{className:"choice-check",style:{color:"black"},children:Ll})]},i)}))})]}),Tl(Bl,{text:e.buttonText||"Submit",submitDisabled:Gl(u,c,v,!!e.optional),appearance:n,onSubmit:()=>{c&&e.type===qo.MultipleChoice?lr(u)&&o([...u,v]):o(u)},onPreviewSubmit:()=>{c&&e.type===qo.MultipleChoice?lr(u)&&s([...u,v]):s(u)}})]})}var zl=[Rl,Nl,Ml],Ul=[El,Rl,Nl,Ml,Fl],Xl=[1,2,3,4,5],Jl=[1,2,3,4,5,6,7],Kl=[0,1,2,3,4,5,6,7,8,9,10];function Ql(t){switch(t){case 5:default:return Xl;case 7:return Jl;case 10:return Kl}}var tu=$i,eu=Yi,iu="ph:show_survey_widget";function ru(t,e,i){var r,n=t.questions[e],o=e+1;if(null==(r=n.branching)||!r.type)return e===t.questions.length-1?Ho.End:o;if(n.branching.type===Ho.End)return Ho.End;if(n.branching.type===Ho.SpecificQuestion){if(Number.isInteger(n.branching.index))return n.branching.index}else if(n.branching.type===Ho.ResponseBased){if(n.type===qo.SingleChoice){var s,a,l=n.choices.indexOf(""+i);if(-1===l&&n.hasOpenChoice&&(l=n.choices.length-1),null!=(s=n.branching)&&null!=(a=s.responseValues)&&a.hasOwnProperty(l)){var u=n.branching.responseValues[l];return Number.isInteger(u)?u:u===Ho.End?Ho.End:o}}else if(n.type===qo.Rating){var h,c;if("number"!=typeof i||!Number.isInteger(i))throw new Error("The response type must be an integer");var d=function(t,e){if(3===e){if(t<1||t>3)throw new Error("The response must be in range 1-3");return 1===t?"negative":2===t?"neutral":"positive"}if(5===e){if(t<1||t>5)throw new Error("The response must be in range 1-5");return t<=2?"negative":3===t?"neutral":"positive"}if(7===e){if(t<1||t>7)throw new Error("The response must be in range 1-7");return t<=3?"negative":4===t?"neutral":"positive"}if(10===e){if(t<0||t>10)throw new Error("The response must be in range 0-10");return t<=6?"detractors":t<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,n.scale);if(null!=(h=n.branching)&&null!=(c=h.responseValues)&&c.hasOwnProperty(d)){var v=n.branching.responseValues[d];return Number.isInteger(v)?v:v===Ho.End?Ho.End:o}}return o}return Js.warn("Falling back to next question index due to unexpected branching type"),o}class nu{constructor(t){var e=this;this.h=new Map,this.m=new Map,this.C=()=>{var t,e=eu.querySelectorAll("div[class^=PostHogSurvey]");return!(e.length>0)||1===(null==(t=e[e.length-1].shadowRoot)?void 0:t.childElementCount)},this.I=t=>{var e,r=null==(e=t.conditions)?void 0:e.seenSurveyWaitPeriodInDays;if(((t,e)=>{if(!e||!t)return!0;var i=new Date,r=Math.abs(i.getTime()-new Date(t).getTime());return Math.ceil(r/864e5)>e})(localStorage.getItem("lastSeenSurveyDate"),r)){var n=(t=>!!localStorage.getItem(ml(t))&&!gl(t))(t);if(!n){var o;this.S(t.id),this.k(t.id);var s=(null==(o=t.appearance)?void 0:o.surveyPopupDelaySeconds)||0,a=((t,e,i,r)=>{var n=rl.createElement("div");n.className=Sl({id:e});var o=n.attachShadow({mode:"open"});if(t){var s=ra(rl,t,r);s&&o.appendChild(s)}return rl.body.appendChild(n),o})(sl(null==t?void 0:t.appearance),t.id,0,this.A);if(s<=0)return ks(Tl(au,{posthog:this.A,survey:t,removeSurveyFromFocus:this.T,isPopup:!0},"popover-survey"),a);var l=setTimeout((()=>{if(!Il(t))return this.T(t.id);ks(Tl(au,{posthog:this.A,survey:i({},t,{appearance:i({},t.appearance,{surveyPopupDelaySeconds:0})}),removeSurveyFromFocus:this.T,isPopup:!0},"popover-survey"),a)}),1e3*s);this.h.set(t.id,l)}}},this.M=t=>{var e=xl(t,this.A),i=sl(t.appearance),r="ph-data-style-id";if(!e.querySelector("style["+r+'="'+r+'"]')){var n=ra(eu,i,this.A);n&&(n.setAttribute(r,r),e.appendChild(n))}ks(Tl(uu,{posthog:this.A,survey:t,removeSurveyFromFocus:this.T},"feedback-survey-"+t.id),e)},this.N=t=>{var e=this.m.get(t);e&&(e.element.removeEventListener("click",e.listener),e.element.removeAttribute("PHWidgetSurveyClickListener"),this.m.delete(t),Js.info("Removed click listener for survey "+t))},this.R=t=>{var e,i=null==(e=t.appearance)?void 0:e.widgetSelector;if(i){var r=eu.querySelector(i),n=this.m.get(t.id);if(r){if(this.M(t),n){if(r===n.element)return;Js.info("Selector element changed for survey "+t.id+". Re-attaching listener."),this.N(t.id)}if(!r.hasAttribute("PHWidgetSurveyClickListener")){var o=e=>{var i,r,n;if(e.stopPropagation(),(null==(i=t.appearance)?void 0:i.position)===$o.NextToTrigger){var o=e.currentTarget.getBoundingClientRect(),s=tu.innerHeight,a=tu.innerWidth,l=parseInt((null==(r=t.appearance)?void 0:r.maxWidth)||"300"),u=o.left+o.width/2-l/2;u+l>a-20&&(u=a-l-20),u<20&&(u=20);var h=s-o.bottom,c=o.top,d=h<250&&c>h,v={position:"fixed",top:d?"auto":o.bottom+12+"px",left:u+"px",right:"auto",bottom:d?s-o.top+12+"px":"auto",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderBottom:"1.5px solid "+((null==(n=t.appearance)?void 0:n.borderColor)||"#c9c6c6"),borderRadius:"10px",zIndex:nl};tu.dispatchEvent(new CustomEvent(iu,{detail:{surveyId:t.id,position:v}}))}else tu.dispatchEvent(new CustomEvent(iu,{detail:{surveyId:t.id,position:{}}}))};qr(r,"click",o),r.setAttribute("PHWidgetSurveyClickListener","true"),this.m.set(t.id,{element:r,listener:o}),Js.info("Attached click listener for survey "+t.id)}}else n&&this.N(t.id)}},this.renderSurvey=(t,e)=>{ks(Tl(au,{posthog:this.A,survey:t,removeSurveyFromFocus:this.T,isPopup:!1},"popover-survey"),e)},this.getActiveMatchingSurveys=function(t,i){var r;void 0===i&&(i=!1),null==(r=e.A)||r.surveys.getSurveys((i=>{var r=i.filter((t=>e.checkSurveyEligibility(t).eligible&&e.F(t)&&e.O(t)&&e.P(t)));t(r)}),i)},this.callSurveysAndEvaluateDisplayLogic=function(t){void 0===t&&(t=!1),e.getActiveMatchingSurveys((t=>{var i=t.filter((t=>t.type!==Zo.API)),r=e.L(i),n=new Set;r.forEach((t=>{var i,r,o;t.type===Zo.Widget&&((null==(i=t.appearance)?void 0:i.widgetType)===Bo.Tab?e.M(t):(null==(r=t.appearance)?void 0:r.widgetType)===Bo.Selector&&null!=(o=t.appearance)&&o.widgetSelector&&(n.add(t.id),e.R(t)));mr(e.D)&&t.type===Zo.Popover&&e.C()&&e.I(t)})),e.m.forEach(((t,i)=>{n.has(i)||e.N(i)}))}),t)},this.k=t=>{mr(this.D)||Js.error("Survey "+[...this.D]+" already in focus. Cannot add survey "+t+"."),this.D=t},this.T=t=>{this.D!==t&&Js.error("Survey "+t+" is not in focus. Cannot remove survey "+t+"."),this.S(t),this.D=null},this.A=t,this.D=null}S(t){var e=this.h.get(t);e&&(clearTimeout(e),this.h.delete(t))}L(t){return t.sort(((t,e)=>{var i,r,n=t.schedule===Vo.Always,o=e.schedule===Vo.Always;return n&&!o?1:!n&&o?-1:((null==(i=t.appearance)?void 0:i.surveyPopupDelaySeconds)||0)-((null==(r=e.appearance)?void 0:r.surveyPopupDelaySeconds)||0)}))}B(t){return!t||!!this.A.featureFlags.isFeatureEnabled(t)}F(t){return!t.conditions||Il(t)&&function(t){var e,i,r;if(null==(e=t.conditions)||!e.deviceTypes||0===(null==(i=t.conditions)?void 0:i.deviceTypes.length))return!0;if(!Xi)return!1;var n=el(Xi);return wl[Cl(null==(r=t.conditions)?void 0:r.deviceTypesMatchType)](t.conditions.deviceTypes,n)}(t)&&function(t){var e;return null==(e=t.conditions)||!e.selector||!(null==rl||!rl.querySelector(t.conditions.selector))}(t)}$(t){return gl(t)||this.B(t.internal_targeting_flag_key)}checkSurveyEligibility(t){var e={eligible:!0,reason:void 0};return Ks(t)?this.B(t.linked_flag_key)?this.B(t.targeting_flag_key)?(this.$(t)||(e.eligible=!1,e.reason="Survey internal targeting flag is not enabled and survey cannot activate repeatedly"),e):(e.eligible=!1,e.reason="Survey targeting feature flag is not enabled",e):(e.eligible=!1,e.reason="Survey linked feature flag is not enabled",e):(e.eligible=!1,e.reason="Survey is not running. It was completed on "+t.end_date,e)}O(t){var e;if(!Qs(t)&&!ta(t))return!0;var i=null==(e=this.A.surveys.Z)?void 0:e.getSurveys();return!(null==i||!i.includes(t.id))}P(t){var e;return null==(e=t.feature_flag_keys)||!e.length||t.feature_flag_keys.every((t=>{var{key:e,value:i}=t;return!e||!i||this.A.featureFlags.isFeatureEnabled(i)}))}getTestAPI(){return{addSurveyToFocus:this.k,removeSurveyFromFocus:this.T,surveyInFocus:this.D,surveyTimeouts:this.h,canShowNextEventBasedSurvey:this.C,handleWidget:this.M,handlePopoverSurvey:this.I,manageWidgetSelectorListener:this.R,sortSurveysByAppearanceDelay:this.L,checkFlags:this.P.bind(this)}}}function ou(t){if(eu&&tu){var e=new nu(t);return e.callSurveysAndEvaluateDisplayLogic(!0),setInterval((()=>{e.callSurveysAndEvaluateDisplayLogic(!1)}),1e3),e}}function su(t){var{survey:e,removeSurveyFromFocus:i,setSurveyVisible:r,isPreviewMode:n=!1}=t;qs((()=>{var t;if(!n&&null!=(t=e.conditions)&&t.url){var o=()=>{var t,n=e.type===Zo.Widget,o=Il(e),s=(null==(t=e.appearance)?void 0:t.widgetType)===Bo.Tab&&n;if(!o)return Js.info("Hiding survey "+e.id+" because URL does not match"),r(!1),i(e.id);s&&(Js.info("Showing survey "+e.id+" because it is a feedback button tab and URL matches"),r(!0))};qr(tu,"popstate",o),qr(tu,"hashchange",o);var s=tu.history.pushState,a=tu.history.replaceState;return tu.history.pushState=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];s.apply(this,e),o()},tu.history.replaceState=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];a.apply(this,e),o()},()=>{tu.removeEventListener("popstate",o),tu.removeEventListener("hashchange",o),tu.history.pushState=s,tu.history.replaceState=a}}}),[n,e,i,r])}function au(t){var e,r,n,o,s,a,{survey:l,forceDisableHtml:u,posthog:h,style:c,previewPageIndex:d,removeSurveyFromFocus:v,isPopup:f,onPreviewSubmit:p=(()=>{}),onPopupSurveyDismissed:g=(()=>{}),onCloseConfirmationMessage:m=(()=>{})}=t,b=Number.isInteger(d),y=null!=(e=l.appearance)&&e.surveyPopupDelaySeconds?1e3*l.appearance.surveyPopupDelaySeconds:0,{isPopupVisible:_,isSurveySent:w,setIsPopupVisible:C}=function(t,e,i,r,n){var[o,s]=Zs(r||0===i),[a,l]=Zs(!1);return qs((()=>{if(e){if(!r){var o=e=>{e.detail.surveyId===t.id&&(n(t.id),s(!1))},a=e=>{var i,r;e.detail.surveyId===t.id&&(null!=(i=t.appearance)&&i.displayThankYouMessage?(l(!0),n(t.id),null!=(r=t.appearance)&&r.autoDisappear&&setTimeout((()=>{s(!1)}),5e3)):(n(t.id),s(!1)))},u=()=>{Il(t)&&(s(!0),tu.dispatchEvent(new Event("PHSurveyShown")),e.capture("survey shown",{$survey_name:t.name,$survey_id:t.id,$survey_iteration:t.current_iteration,$survey_iteration_start_date:t.current_iteration_start_date,sessionRecordingUrl:null==e.get_session_replay_url?void 0:e.get_session_replay_url()}),localStorage.setItem("lastSeenSurveyDate",(new Date).toISOString()),setTimeout((()=>{var e,i,r=null==(e=eu.querySelector(Sl(t,!0)))||null==(i=e.shadowRoot)?void 0:i.querySelector('textarea, input[type="text"]');r&&r.focus()}),100))};if(qr(tu,"PHSurveyClosed",o),qr(tu,"PHSurveySent",a),i>0){var h=setTimeout(u,i);return()=>{clearTimeout(h),tu.removeEventListener("PHSurveyClosed",o),tu.removeEventListener("PHSurveySent",a)}}return u(),()=>{tu.removeEventListener("PHSurveyClosed",o),tu.removeEventListener("PHSurveySent",a)}}}else Js.error("usePopupVisibility hook called without a PostHog instance.")}),[]),su({survey:t,removeSurveyFromFocus:n,setSurveyVisible:s,isPreviewMode:r}),{isPopupVisible:o,isSurveySent:a,setIsPopupVisible:s}}(l,h,y,b,v),I=w||d===l.questions.length,S=null!=(r=c)&&r.left&&yr(null==(n=c)?void 0:n.left)?{left:c.left-40}:{};return b&&((c=c||{}).left="unset",c.right="unset",c.transform="unset"),_?Tl(yl.Provider,{value:{isPreviewMode:b,previewPageIndex:d,onPopupSurveyDismissed:()=>{dl(l,h,b),g()},isPopup:f||!1,onPreviewSubmit:p},children:I?Tl(ql,{header:(null==(o=l.appearance)?void 0:o.thankYouMessageHeader)||"Thank you!",description:(null==(s=l.appearance)?void 0:s.thankYouMessageDescription)||"",forceDisableHtml:!!u,contentType:null==(a=l.appearance)?void 0:a.thankYouMessageDescriptionContentType,appearance:l.appearance||ul,styleOverrides:i({},c,S),onClose:()=>{C(!1),m()}}):Tl(lu,{survey:l,forceDisableHtml:!!u,posthog:h,styleOverrides:c})}):null}function lu(t){var e,r,{survey:n,forceDisableHtml:o,posthog:s,styleOverrides:a}=t,l=ll((null==(e=n.appearance)?void 0:e.backgroundColor)||ul.backgroundColor),[u,h]=Zs({}),{previewPageIndex:c,onPopupSurveyDismissed:d,isPopup:v,onPreviewSubmit:f}=Vs(yl),[p,g]=Zs(c||0),m=Hs((()=>pl(n)),[n]);qs((()=>{g(null!=c?c:0)}),[c]);return Tl("form",{className:"survey-form",name:"surveyForm",style:v?i({color:l,borderColor:null==(r=n.appearance)?void 0:r.borderColor},a):{},children:m.map(((t,e)=>{var r;return p===e&&Tl("div",{className:"survey-box",style:v?{backgroundColor:(null==(r=n.appearance)?void 0:r.backgroundColor)||ul.backgroundColor}:{},children:[v&&Tl(Zl,{onClick:()=>{d()}}),hu({question:t,forceDisableHtml:o,displayQuestionIndex:e,appearance:n.appearance||ul,onSubmit:r=>(t=>{var{res:e,displayQuestionIndex:r,questionId:o}=t;if(s)if(o){var a=function(t){return"$survey_response_"+t}(o);h(i({},u,{[a]:e}));var l=ru(n,r,e);l===Ho.End?cl(i({},u,{[a]:e}),n,s):g(l)}else Js.error("onNextButtonClick called without a questionId.");else Js.error("onNextButtonClick called without a PostHog instance.")})({res:r,displayQuestionIndex:e,questionId:t.id}),onPreviewSubmit:f})]})}))})}function uu(t){var e,i,r,n,o,{survey:s,forceDisableHtml:a,posthog:l,readOnly:u,removeSurveyFromFocus:h}=t,[c,d]=Zs(!0),[v,f]=Zs(!1),[p,g]=Zs({});if(qs((()=>{var t;if(l){if(!u){var e;if("tab"===(null==(t=s.appearance)?void 0:t.widgetType))g({top:"50%",bottom:"auto",borderRadius:10,borderBottom:"1.5px solid "+((null==(e=s.appearance)?void 0:e.borderColor)||"#c9c6c6")});var i=t=>{var e,i=t;(null==(e=i.detail)?void 0:e.surveyId)===s.id&&(Js.info("Received show event for survey "+s.id),g(i.detail.position||{}),f(!0))};return qr(tu,iu,i),()=>{tu.removeEventListener(iu,i)}}}else Js.error("FeedbackWidget called without a PostHog instance.")}),[l,u,s.id,null==(e=s.appearance)?void 0:e.widgetType,null==(i=s.appearance)?void 0:i.widgetSelector,null==(r=s.appearance)?void 0:r.borderColor]),su({survey:s,removeSurveyFromFocus:h,setSurveyVisible:d}),!c)return null;var m=()=>{f(!1)};return Tl(as,{children:["tab"===(null==(n=s.appearance)?void 0:n.widgetType)&&Tl("div",{className:"ph-survey-widget-tab",onClick:()=>!u&&f(!v),style:{color:ll(s.appearance.widgetColor)},children:[Tl("div",{className:"ph-survey-widget-tab-icon"}),(null==(o=s.appearance)?void 0:o.widgetLabel)||""]}),v&&Tl(au,{posthog:l,survey:s,forceDisableHtml:a,style:p,removeSurveyFromFocus:h,isPopup:!0,onPopupSurveyDismissed:m,onCloseConfirmationMessage:m},"feedback-widget-survey")]})}var hu=t=>{var{question:e,forceDisableHtml:r,displayQuestionIndex:n,appearance:o,onSubmit:s,onPreviewSubmit:a}=t,l={[qo.Open]:Hl,[qo.Link]:Vl,[qo.Rating]:jl,[qo.SingleChoice]:Wl,[qo.MultipleChoice]:Wl},u={question:e,forceDisableHtml:r,appearance:o,onPreviewSubmit:t=>{a(t)},onSubmit:t=>{s(t)}},h={[qo.Open]:{},[qo.Link]:{},[qo.Rating]:{displayQuestionIndex:n},[qo.SingleChoice]:{displayQuestionIndex:n},[qo.MultipleChoice]:{displayQuestionIndex:n}},c=l[e.type],d=i({},u,h[e.type]);return Tl(c,i({},d))};function cu(t){return!fr(Event)&&du(t,Event)}function du(t,e){try{return t instanceof e}catch(t){return!1}}function vu(t){return mr(t)||!dr(t)&&!ur(t)}function fu(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return du(t,Error)}}function pu(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function gu(t){return pu(t,"DOMError")}Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{},Ji.__PosthogExtensions__.canActivateRepeatedly=gl,Ji.__PosthogExtensions__.generateSurveys=ou,Ji.extendPostHogWithSurveys=ou;var mu=/\(error: (.*)\)/,bu=50,yu="?";function _u(t,e,i,r){var n={platform:"web:javascript",filename:t,function:"<anonymous>"===e?yu:e,in_app:!0};return fr(i)||(n.lineno=i),fr(r)||(n.colno=r),n}var wu=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Cu=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Iu=/\((\S*)(?::(\d+))(?::(\d+))\)/,Su=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ku=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,xu=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return function(t,e){void 0===e&&(e=0);for(var r=[],o=t.split("\n"),s=e;s<o.length;s++){var a=o[s];if(!(a.length>1024)){var l=mu.test(a)?a.replace(mu,"$1"):a;if(!l.match(/\S*Error: /)){for(var u of n){var h=u(l);if(h){r.push(h);break}}if(r.length>=bu)break}}}return function(t){if(!t.length)return[];var e=Array.from(t);return e.reverse(),e.slice(0,bu).map((t=>i({},t,{filename:t.filename||Au(e).filename,function:t.function||yu})))}(r)}}(...[[30,t=>{var e=wu.exec(t);if(e){var[,i,r,n]=e;return _u(i,yu,+r,+n)}var o=Cu.exec(t);if(o){if(o[2]&&0===o[2].indexOf("eval")){var s=Iu.exec(o[2]);s&&(o[2]=s[1],o[3]=s[2],o[4]=s[3])}var[a,l]=Ru(o[1]||yu,o[2]);return _u(l,a,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}}],[50,t=>{var e=Su.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var i=ku.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}var r=e[3],n=e[1]||yu;return[n,r]=Ru(n,r),_u(r,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]]);function Au(t){return t[t.length-1]||{}}var Tu,Mu,Nu,Ru=(t,e)=>{var i=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return i||r?[-1!==t.indexOf("@")?t.split("@")[0]:yu,i?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]};var Eu=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Fu(t,e){void 0===e&&(e=0);var i=t.stacktrace||t.stack||"",r=function(t){if(t&&Ou.test(t.message))return 1;return 0}(t);try{var n=xu,o=function(t,e){var i=function(t){var e=globalThis._posthogChunkIds;if(!e)return{};var i=Object.keys(e);return Nu&&i.length===Mu||(Mu=i.length,Nu=i.reduce(((i,r)=>{Tu||(Tu={});var n=Tu[r];if(n)i[n[0]]=n[1];else for(var o=t(r),s=o.length-1;s>=0;s--){var a=o[s],l=null==a?void 0:a.filename,u=e[r];if(l&&u){i[l]=u,Tu[r]=[l,u];break}}return i}),{})),Nu}(e);return t.forEach((t=>{t.filename&&(t.chunk_id=i[t.filename])})),t}(n(i,r),n);return o.slice(0,o.length-e)}catch(t){}return[]}var Ou=/Minified React error #\d+;/i;function Pu(t,e){var i,r,n=Fu(t),o=null===(i=null==e?void 0:e.handled)||void 0===i||i,s=null!==(r=null==e?void 0:e.synthetic)&&void 0!==r&&r;return{type:null!=e&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(t){var e=t.message;if(e.error&&"string"==typeof e.error.message)return String(e.error.message);return String(e)}(t),stacktrace:{frames:n,type:"raw"},mechanism:{handled:o,synthetic:s}}}function Lu(t,e){var i=Pu(t,e);return t.cause&&fu(t.cause)&&t.cause!==t?[i,...Lu(t.cause,{handled:null==e?void 0:e.handled,synthetic:null==e?void 0:e.synthetic})]:[i]}function Du(t,e){return{$exception_list:Lu(t,e),$exception_level:"error"}}function Bu(t,e){var i,r,n,o=null===(i=null==e?void 0:e.handled)||void 0===i||i,s=null===(r=null==e?void 0:e.synthetic)||void 0===r||r,a={type:null!=e&&e.overrideExceptionType?e.overrideExceptionType:null!==(n=null==e?void 0:e.defaultExceptionType)&&void 0!==n?n:"Error",value:t||(null==e?void 0:e.defaultExceptionMessage),mechanism:{handled:o,synthetic:s}};if(null!=e&&e.syntheticException){var l=Fu(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function $u(t){return pr(t)&&!gr(t)&&tr.indexOf(t)>=0}function Zu(t,e){var i,r,n=null===(i=null==e?void 0:e.handled)||void 0===i||i,o=null===(r=null==e?void 0:e.synthetic)||void 0===r||r,s=null!=e&&e.overrideExceptionType?e.overrideExceptionType:cu(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(t,e){void 0===e&&(e=40);var i=Object.keys(t);if(i.sort(),!i.length)return"[object has no keys]";for(var r=i.length;r>0;r--){var n=i.slice(0,r).join(", ");if(!(n.length>e))return r===i.length||n.length<=e?n:n.slice(0,e)+"..."}return""}(t),l={type:s,value:a,mechanism:{handled:n,synthetic:o}};if(null!=e&&e.syntheticException){var u=Fu(null==e?void 0:e.syntheticException,1);u.length&&(l.stacktrace={frames:u,type:"raw"})}return{$exception_list:[l],$exception_level:$u(t.level)?t.level:"error"}}function qu(t,e){var{error:r,event:n}=t,o={$exception_list:[]},s=r||n;if(gu(s)||function(t){return pu(t,"DOMException")}(s)){var a=s;if(function(t){return"stack"in t}(s))o=Du(s,e);else{var l=a.name||(gu(a)?"DOMError":"DOMException"),u=a.message?l+": "+a.message:l;o=Bu(u,i({},e,{overrideExceptionType:gu(a)?"DOMError":"DOMException",defaultExceptionMessage:u}))}return"code"in a&&(o.$exception_DOMException_code=""+a.code),o}if(function(t){return pu(t,"ErrorEvent")}(s)&&s.error)return Du(s.error,e);if(fu(s))return Du(s,e);if(function(t){return pu(t,"Object")}(s)||cu(s))return Zu(s,e);if(fr(r)&&pr(n)){var h="Error",c=n,d=n.match(Eu);return d&&(h=d[1],c=d[2]),Bu(c,i({},e,{overrideExceptionType:h,defaultExceptionMessage:c}))}return Bu(s,e)}function Hu(t){var[e]=t,i=function(t){if(vu(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(t){}return t}(e);return vu(i)?Bu("Non-Error promise rejection captured with value: "+String(i),{handled:!1,synthetic:!1,overrideExceptionType:"UnhandledRejection"}):qu({event:i},{handled:!1,overrideExceptionType:"UnhandledRejection",defaultExceptionMessage:String(i)})}var Vu=Ar("[ExceptionAutocapture]"),ju={wrapOnError:t=>{var e=$i;e||Vu.info("window not available, cannot wrap onerror");var i=e.onerror;return e.onerror=function(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var s=qu({event:n[0],error:n[4]});return t(s),null!==(e=null==i?void 0:i(...n))&&void 0!==e&&e},e.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var t;null==(t=e.onerror)||delete t.__POSTHOG_INSTRUMENTED__,e.onerror=i}},wrapUnhandledRejection:t=>{var e=$i;e||Vu.info("window not available, cannot wrap onUnhandledRejection");var i=e.onunhandledrejection;return e.onunhandledrejection=function(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];var a=Hu(o);return t(a),null!==(r=null==i?void 0:i.apply(e,o))&&void 0!==r&&r},e.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var t;null==(t=e.onunhandledrejection)||delete t.__POSTHOG_INSTRUMENTED__,e.onunhandledrejection=i}},wrapConsoleError:t=>{var e=console;e||Vu.info("console not available, cannot wrap console.error");var i=e.error;return e.error=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=r.join(" "),s=r.find((t=>t instanceof Error)),a=s?qu({event:o,error:s}):qu({event:o},{syntheticException:new Error("PostHog syntheticException")});return t(a),null==i?void 0:i(...r)},e.error.__POSTHOG_INSTRUMENTED__=!0,()=>{var t;null==(t=e.error)||delete t.__POSTHOG_INSTRUMENTED__,e.error=i}}};Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{},Ji.__PosthogExtensions__.errorWrappingFunctions=ju,Ji.posthogErrorWrappingFunctions=ju;var Yu=(t,e)=>{if(t){var{sessionId:i,windowId:r}=t.checkAndGetSessionAndWindowId(!0);e.headers.set("X-POSTHOG-SESSION-ID",i),e.headers.set("X-POSTHOG-WINDOW-ID",r)}};Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{};var Gu={_patchFetch:t=>zr($i,"fetch",(i=>function(){var r=e((function*(e,r){var n=new Request(e,r);return Yu(t,n),i(n)}));return function(t,e){return r.apply(this,arguments)}}())),_patchXHR:t=>zr($i.XMLHttpRequest.prototype,"open",(e=>function(i,r,n,o,s){void 0===n&&(n=!0);var a=new Request(r);return Yu(t,a),e.call(this,i,a.url,n,o,s)}))};Ji.__PosthogExtensions__.tracingHeadersPatchFns=Gu,Ji.postHogTracingHeadersPatchFns=Gu;var Wu,zu,Uu=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Xu=function(t){if("loading"===document.readyState)return"loading";var e=Uu();if(e){if(t<e.domInteractive)return"loading";if(0===e.domContentLoadedEventStart||t<e.domContentLoadedEventStart)return"dom-interactive";if(0===e.domComplete||t<e.domComplete)return"dom-content-loaded"}return"complete"},Ju=function(t){var e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Ku=function(t,e){var i="";try{for(;t&&9!==t.nodeType;){var r=t,n=r.id?"#"+r.id:Ju(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(i.length+n.length>(e||100)-1)return i||n;if(i=i?n+">"+i:n,r.id)break;t=r.parentNode}}catch(t){}return i},Qu=-1,th=function(){return Qu},eh=function(t){addEventListener("pageshow",(function(e){e.persisted&&(Qu=e.timeStamp,t(e))}),!0)},ih=function(){var t=Uu();return t&&t.activationStart||0},rh=function(t,e){var i=Uu(),r="navigate";return th()>=0?r="back-forward-cache":i&&(document.prerendering||ih()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},nh=function(t,e,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},oh=function(t,e,i,r){var n,o;return function(s){e.value>=0&&(s||r)&&((o=e.value-(n||0))||void 0===n)&&(n=e.value,e.delta=o,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,i),t(e))}},sh=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},ah=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},lh=function(t){var e=!1;return function(){e||(t(),e=!0)}},uh=-1,hh=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ch=function(t){"hidden"===document.visibilityState&&uh>-1&&(uh="visibilitychange"===t.type?t.timeStamp:0,vh())},dh=function(){addEventListener("visibilitychange",ch,!0),addEventListener("prerenderingchange",ch,!0)},vh=function(){removeEventListener("visibilitychange",ch,!0),removeEventListener("prerenderingchange",ch,!0)},fh=function(){return uh<0&&(uh=hh(),dh(),eh((function(){setTimeout((function(){uh=hh(),dh()}),0)}))),{get firstHiddenTime(){return uh}}},ph=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},gh=[1800,3e3],mh=function(t,e){e=e||{},ph((function(){var i,r=fh(),n=rh("FCP"),o=nh("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<r.firstHiddenTime&&(n.value=Math.max(t.startTime-ih(),0),n.entries.push(t),i(!0)))}))}));o&&(i=oh(t,n,gh,e.reportAllChanges),eh((function(r){n=rh("FCP"),i=oh(t,n,gh,e.reportAllChanges),sh((function(){n.value=performance.now()-r.timeStamp,i(!0)}))})))}))},bh=[.1,.25],yh=0,_h=1/0,wh=0,Ch=function(t){t.forEach((function(t){t.interactionId&&(_h=Math.min(_h,t.interactionId),wh=Math.max(wh,t.interactionId),yh=wh?(wh-_h)/7+1:0)}))},Ih=function(){return Wu?yh:performance.interactionCount||0},Sh=function(){"interactionCount"in performance||Wu||(Wu=nh("event",Ch,{type:"event",buffered:!0,durationThreshold:0}))},kh=[],xh=new Map,Ah=0,Th=[],Mh=function(t){if(Th.forEach((function(e){return e(t)})),t.interactionId||"first-input"===t.entryType){var e=kh[kh.length-1],i=xh.get(t.interactionId);if(i||kh.length<10||t.duration>e.latency){if(i)t.duration>i.latency?(i.entries=[t],i.latency=t.duration):t.duration===i.latency&&t.startTime===i.entries[0].startTime&&i.entries.push(t);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};xh.set(r.id,r),kh.push(r)}kh.sort((function(t,e){return e.latency-t.latency})),kh.length>10&&kh.splice(10).forEach((function(t){return xh.delete(t.id)}))}}},Nh=function(t){var e=self.requestIdleCallback||self.setTimeout,i=-1;return t=lh(t),"hidden"===document.visibilityState?t():(i=e(t),ah(t)),i},Rh=[200,500],Eh=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},ph((function(){var i;Sh();var r,n=rh("INP"),o=function(t){Nh((function(){t.forEach(Mh);var e=function(){var t=Math.min(kh.length-1,Math.floor((Ih()-Ah)/50));return kh[t]}();e&&e.latency!==n.value&&(n.value=e.latency,n.entries=e.entries,r())}))},s=nh("event",o,{durationThreshold:null!==(i=e.durationThreshold)&&void 0!==i?i:40});r=oh(t,n,Rh,e.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),ah((function(){o(s.takeRecords()),r(!0)})),eh((function(){Ah=Ih(),kh.length=0,xh.clear(),n=rh("INP"),r=oh(t,n,Rh,e.reportAllChanges)})))})))},Fh=[],Oh=[],Ph=0,Lh=new WeakMap,Dh=new Map,Bh=-1,$h=function(t){Fh=Fh.concat(t),Zh()},Zh=function(){Bh<0&&(Bh=Nh(qh))},qh=function(){Dh.size>10&&Dh.forEach((function(t,e){xh.has(e)||Dh.delete(e)}));var t=kh.map((function(t){return Lh.get(t.entries[0])})),e=Oh.length-50;Oh=Oh.filter((function(i,r){return r>=e||t.includes(i)}));for(var i=new Set,r=0;r<Oh.length;r++){var n=Oh[r];Hh(n.startTime,n.processingEnd).forEach((function(t){i.add(t)}))}var o=Fh.length-1-50;Fh=Fh.filter((function(t,e){return t.startTime>Ph&&e>o||i.has(t)})),Bh=-1};Th.push((function(t){t.interactionId&&t.target&&!Dh.has(t.interactionId)&&Dh.set(t.interactionId,t.target)}),(function(t){var e,i=t.startTime+t.duration;Ph=Math.max(Ph,t.processingEnd);for(var r=Oh.length-1;r>=0;r--){var n=Oh[r];if(Math.abs(i-n.renderTime)<=8){(e=n).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:i,entries:[t]},Oh.push(e)),(t.interactionId||"first-input"===t.entryType)&&Lh.set(t,e),Zh()}));var Hh=function(t,e){for(var i,r=[],n=0;i=Fh[n];n++)if(!(i.startTime+i.duration<t)){if(i.startTime>e)break;r.push(i)}return r},Vh=[2500,4e3],jh={},Yh={onLCP:function(t,e){!function(t,e){e=e||{},ph((function(){var i,r=fh(),n=rh("LCP"),o=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<r.firstHiddenTime&&(n.value=Math.max(t.startTime-ih(),0),n.entries=[t],i())}))},s=nh("largest-contentful-paint",o);if(s){i=oh(t,n,Vh,e.reportAllChanges);var a=lh((function(){jh[n.id]||(o(s.takeRecords()),s.disconnect(),jh[n.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return Nh(a)}),{once:!0,capture:!0})})),ah(a),eh((function(r){n=rh("LCP"),i=oh(t,n,Vh,e.reportAllChanges),sh((function(){n.value=performance.now()-r.timeStamp,jh[n.id]=!0,i(!0)}))}))}}))}((function(e){var i=function(t){var e={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){var i=Uu();if(i){var r=i.activationStart||0,n=t.entries[t.entries.length-1],o=n.url&&performance.getEntriesByType("resource").filter((function(t){return t.name===n.url}))[0],s=Math.max(0,i.responseStart-r),a=Math.max(s,o?(o.requestStart||o.startTime)-r:0),l=Math.max(a,o?o.responseEnd-r:0),u=Math.max(l,n.startTime-r);e={element:Ku(n.element),timeToFirstByte:s,resourceLoadDelay:a-s,resourceLoadDuration:l-a,elementRenderDelay:u-l,navigationEntry:i,lcpEntry:n},n.url&&(e.url=n.url),o&&(e.lcpResourceEntry=o)}}return Object.assign(t,{attribution:e})}(e);t(i)}),e)},onCLS:function(t,e){!function(t,e){e=e||{},mh(lh((function(){var i,r=rh("CLS",0),n=0,o=[],s=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=o[0],i=o[o.length-1];n&&t.startTime-i.startTime<1e3&&t.startTime-e.startTime<5e3?(n+=t.value,o.push(t)):(n=t.value,o=[t])}})),n>r.value&&(r.value=n,r.entries=o,i())},a=nh("layout-shift",s);a&&(i=oh(t,r,bh,e.reportAllChanges),ah((function(){s(a.takeRecords()),i(!0)})),eh((function(){n=0,r=rh("CLS",0),i=oh(t,r,bh,e.reportAllChanges),sh((function(){return i()}))})),setTimeout(i,0))})))}((function(e){var i=function(t){var e,i={};if(t.entries.length){var r=t.entries.reduce((function(t,e){return t&&t.value>e.value?t:e}));if(r&&r.sources&&r.sources.length){var n=(e=r.sources).find((function(t){return t.node&&1===t.node.nodeType}))||e[0];n&&(i={largestShiftTarget:Ku(n.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:n,largestShiftEntry:r,loadState:Xu(r.startTime)})}}return Object.assign(t,{attribution:i})}(e);t(i)}),e)},onFCP:function(t,e){mh((function(e){var i=function(t){var e={timeToFirstByte:0,firstByteToFCP:t.value,loadState:Xu(th())};if(t.entries.length){var i=Uu(),r=t.entries[t.entries.length-1];if(i){var n=i.activationStart||0,o=Math.max(0,i.responseStart-n);e={timeToFirstByte:o,firstByteToFCP:t.value-o,loadState:Xu(t.entries[0].startTime),navigationEntry:i,fcpEntry:r}}}return Object.assign(t,{attribution:e})}(e);t(i)}),e)},onINP:function(t,e){zu||(zu=nh("long-animation-frame",$h)),Eh((function(e){var i=function(t){var e=t.entries[0],i=Lh.get(e),r=e.processingStart,n=i.processingEnd,o=i.entries.sort((function(t,e){return t.processingStart-e.processingStart})),s=Hh(e.startTime,n),a=t.entries.find((function(t){return t.target})),l=a&&a.target||Dh.get(e.interactionId),u=[e.startTime+e.duration,n].concat(s.map((function(t){return t.startTime+t.duration}))),h=Math.max.apply(Math,u),c={interactionTarget:Ku(l),interactionTargetElement:l,interactionType:e.name.startsWith("key")?"keyboard":"pointer",interactionTime:e.startTime,nextPaintTime:h,processedEventEntries:o,longAnimationFrameEntries:s,inputDelay:r-e.startTime,processingDuration:n-r,presentationDelay:Math.max(h-n,0),loadState:Xu(e.startTime)};return Object.assign(t,{attribution:c})}(e);t(i)}),e)}};Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{},Ji.__PosthogExtensions__.postHogWebVitalsCallbacks=Yh,Ji.postHogWebVitalsCallbacks=Yh;class Gh{constructor(){this.clicks=[]}isRageClick(t,e,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(t-r.x)+Math.abs(e-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:t,y:e,timestamp:i}),3===this.clicks.length)return!0}else this.clicks=[{x:t,y:e,timestamp:i}];return!1}}var Wh=Ar("[AutoCapture]");function zh(t,e){return e.length>t?e.slice(0,t)+"...":e}function Uh(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do{e=e.previousSibling}while(e&&!Dn(e));return e}function Xh(t,e,i,r){var n=t.tagName.toLowerCase(),o={tag_name:n};Wn.indexOf(n)>-1&&!i&&("a"===n.toLowerCase()||"button"===n.toLowerCase()?o.$el_text=zh(1024,oo(t)):o.$el_text=zh(1024,Yn(t)));var s=Vn(t);s.length>0&&(o.classes=s.filter((function(t){return""!==t}))),Nr(t.attributes,(function(i){var n;if((!Jn(t)||-1!==["name","id","class","aria-label"].indexOf(i.name))&&((null==r||!r.includes(i.name))&&!e&&no(i.value)&&(n=i.name,!pr(n)||"_ngcontent"!==n.substring(0,10)&&"_nghost"!==n.substring(0,7)))){var s=i.value;"class"===i.name&&(s=qn(s).join(" ")),o["attr__"+i.name]=zh(1024,s)}}));for(var a=1,l=1,u=t;u=Uh(u);)a++,u.tagName===t.tagName&&l++;return o.nth_child=a,o.nth_of_type=l,o}function Jh(t,e){for(var i,r,{e:n,maskAllElementAttributes:o,maskAllText:s,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,u=[t],h=t;h.parentNode&&!Bn(h,"body");)Zn(h.parentNode)?(u.push(h.parentNode.host),h=h.parentNode.host):(u.push(h.parentNode),h=h.parentNode);var c,d=[],v={},f=!1,p=!1;if(Nr(u,(t=>{var e=Xn(t);"a"===t.tagName.toLowerCase()&&(f=t.getAttribute("href"),f=e&&f&&no(f)&&f),er(Vn(t),"ph-no-capture")&&(p=!0),d.push(Xh(t,o,s,a));var i=function(t){if(!Xn(t))return{};var e={};return Nr(t.attributes,(function(t){if(t.name&&0===t.name.indexOf("data-ph-capture-attribute")){var i=t.name.replace("data-ph-capture-attribute-",""),r=t.value;i&&r&&no(r)&&(e[i]=r)}})),e}(t);Rr(v,i)})),p)return{props:{},explicitNoCapture:p};if(s||("a"===t.tagName.toLowerCase()||"button"===t.tagName.toLowerCase()?d[0].$el_text=oo(t):d[0].$el_text=Yn(t)),f){var g,m;d[0].attr__href=f;var b=null==(g=Vr(f))?void 0:g.host,y=null==$i||null==(m=$i.location)?void 0:m.host;b&&y&&b!==y&&(c=f)}return{props:Rr({$event_type:n.type,$ce_version:1},l?{}:{$elements:d},{$elements_chain:ao(d)},null!=(i=d[0])&&i.$el_text?{$el_text:null==(r=d[0])?void 0:r.$el_text}:{},c&&"click"===n.type?{$external_click_url:c}:{},v)}}class Kh{constructor(t){this.q=!1,this.H=null,this.rageclicks=new Gh,this.V=!1,this.instance=t,this.j=null}get Y(){var t,e,i=dr(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=null==(t=i.url_allowlist)?void 0:t.map((t=>new RegExp(t))),i.url_ignorelist=null==(e=i.url_ignorelist)?void 0:e.map((t=>new RegExp(t))),i}G(){if(this.isBrowserSupported()){if($i&&Yi){var t=t=>{t=t||(null==$i?void 0:$i.event);try{this.W(t)}catch(t){Wh.error("Failed to capture event",t)}};if(qr(Yi,"submit",t,{capture:!0}),qr(Yi,"change",t,{capture:!0}),qr(Yi,"click",t,{capture:!0}),this.Y.capture_copied_text){var e=t=>{t=t||(null==$i?void 0:$i.event),this.W(t,Ki)};qr(Yi,"copy",e,{capture:!0}),qr(Yi,"cut",e,{capture:!0})}}}else Wh.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.q&&(this.G(),this.q=!0)}onRemoteConfig(t){t.elementsChainAsString&&(this.V=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Qr]:!!t.autocapture_opt_out}),this.H=!!t.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(t){this.j=t}getElementSelectors(t){var e,i=[];return null==(e=this.j)||e.forEach((e=>{var r=null==Yi?void 0:Yi.querySelectorAll(e);null==r||r.forEach((r=>{t===r&&i.push(e)}))})),i}get isEnabled(){var t,e,i=null==(t=this.instance.persistence)?void 0:t.props[Qr],r=this.H;if(mr(r)&&!_r(i)&&!this.instance.config.advanced_disable_decide)return!1;var n=null!==(e=this.H)&&void 0!==e?e:!!i;return!!this.instance.config.autocapture&&!n}W(t,e){if(void 0===e&&(e="$autocapture"),this.isEnabled){var i,r=Gn(t);if($n(r)&&(r=r.parentNode||null),"$autocapture"===e&&"click"===t.type&&t instanceof MouseEvent)this.instance.config.rageclick&&null!=(i=this.rageclicks)&&i.isRageClick(t.clientX,t.clientY,(new Date).getTime())&&this.W(t,"$rageclick");var n=e===Ki;if(r&&Un(r,t,this.Y,n,n?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:s}=Jh(r,{e:t,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.Y.element_attribute_ignorelist,elementsChainAsString:this.V});if(s)return!1;var a=this.getElementSelectors(r);if(a&&a.length>0&&(o.$element_selectors=a),e===Ki){var l,u=jn(null==$i||null==(l=$i.getSelection())?void 0:l.toString()),h=t.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=h}return this.instance.capture(e,o),!0}}}isBrowserSupported(){return ur(null==Yi?void 0:Yi.querySelectorAll)}}var Qh={};function tc(t){return function(t,e){var i=Qh[t];if(i)return i;var r=e[t];if(hr(r)&&!cr())return Qh[t]=r.bind(e);var n=e.document;if(n&&ur(n.createElement))try{var o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);var s=o.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(o)}catch(e){xr.warn("Could not create sandbox iframe for "+t+" check, bailing to assignableWindow."+t+": ",e)}return r&&ur(r)?Qh[t]=r.bind(e):r}("MutationObserver",t)}function ec(t,e){return yr(t)&&t>=e}class ic{U(t){var e,i,r,n,o=this.X((null==t?void 0:t.__onCapture)||this.J.bind(this));return{element_attribute_ignorelist:null!==(e=null==t?void 0:t.element_attribute_ignorelist)&&void 0!==e?e:o.element_attribute_ignorelist,scroll_threshold_ms:null!==(i=null==t?void 0:t.scroll_threshold_ms)&&void 0!==i?i:o.scroll_threshold_ms,selection_change_threshold_ms:null!==(r=null==t?void 0:t.selection_change_threshold_ms)&&void 0!==r?r:o.selection_change_threshold_ms,mutation_threshold_ms:null!==(n=null==t?void 0:t.mutation_threshold_ms)&&void 0!==n?n:o.mutation_threshold_ms,__onCapture:o.__onCapture}}constructor(t,e){this.K=[],this.X=t=>({element_attribute_ignorelist:[],scroll_threshold_ms:100,selection_change_threshold_ms:100,mutation_threshold_ms:2500,__onCapture:t}),this.tt=t=>{var e=function(t){var e=Gn(t);return e?{node:e,originalEvent:t,timestamp:Date.now()}:null}(t);mr(e)||this.et(e)||this.K.push(e),this.K.length&&fr(this.it)&&(this.it=Ji.setTimeout((()=>{this.rt()}),1e3))},this.nt=()=>{var t=Date.now();t%50==0&&this.K.forEach((e=>{fr(e.scrollDelayMs)&&(e.scrollDelayMs=t-e.timestamp)}))},this.ot=()=>{this.st=Date.now()},this.instance=t,this.Y=this.U(e),this._onCapture=this.Y.__onCapture}start(t){this.lt(),this.ut(),this.ht(),this.ct(t)}ct(t){if(!this.dt){var e=tc(Ji);this.dt=new e((t=>{this.vt(t)})),this.dt.observe(t,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}}stop(){var t;null==(t=this.dt)||t.disconnect(),this.dt=void 0,Ji.removeEventListener("click",this.tt),Ji.removeEventListener("scroll",this.nt,{capture:!0}),Ji.removeEventListener("selectionchange",this.ot)}vt(t){this.ft=Date.now()}lt(){qr(Ji,"click",this.tt)}ut(){qr(Ji,"scroll",this.nt,{capture:!0})}ht(){qr(Ji,"selectionchange",this.ot)}et(t){if(!t)return!0;if(Ln(t.node))return!0;var e=this.K.some((e=>e.node===t.node&&Math.abs(e.timestamp-t.timestamp)<1e3));return!!e||!(!Bn(t.node,"html")&&Dn(t.node)&&!Wn.includes(t.node.tagName.toLowerCase()))}rt(){if(this.K.length){clearTimeout(this.it),this.it=void 0;var t=this.K;for(var e of(this.K=[],t)){var i;e.mutationDelayMs=null!==(i=e.mutationDelayMs)&&void 0!==i?i:this.ft&&e.timestamp<=this.ft?this.ft-e.timestamp:void 0,e.absoluteDelayMs=Date.now()-e.timestamp,e.selectionChangedDelayMs=this.st&&e.timestamp<=this.st?this.st-e.timestamp:void 0;var r=ec(e.scrollDelayMs,this.Y.scroll_threshold_ms),n=ec(e.selectionChangedDelayMs,this.Y.selection_change_threshold_ms),o=ec(e.mutationDelayMs,this.Y.mutation_threshold_ms),s=ec(e.absoluteDelayMs,1.1*this.Y.mutation_threshold_ms),a=yr(e.scrollDelayMs)&&e.scrollDelayMs<this.Y.scroll_threshold_ms,l=yr(e.mutationDelayMs)&&e.mutationDelayMs<this.Y.mutation_threshold_ms,u=yr(e.selectionChangedDelayMs)&&e.selectionChangedDelayMs<this.Y.selection_change_threshold_ms;a||l||u||(r||o||s||n?this._onCapture(e,{$dead_click_last_mutation_timestamp:this.ft,$dead_click_event_timestamp:e.timestamp,$dead_click_scroll_timeout:r,$dead_click_mutation_timeout:o,$dead_click_absolute_timeout:s,$dead_click_selection_changed_timeout:n}):e.absoluteDelayMs<this.Y.mutation_threshold_ms&&this.K.push(e))}this.K.length&&fr(this.it)&&(this.it=Ji.setTimeout((()=>{this.rt()}),1e3))}}J(t,e){this.instance.capture("$dead_click",i({},e,Jh(t.node,{e:t.originalEvent,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.Y.element_attribute_ignorelist,elementsChainAsString:!1}).props,{$dead_click_scroll_delay_ms:t.scrollDelayMs,$dead_click_mutation_delay_ms:t.mutationDelayMs,$dead_click_absolute_delay_ms:t.absoluteDelayMs,$dead_click_selection_changed_delay_ms:t.selectionChangedDelayMs}),{timestamp:new Date(t.timestamp)})}}Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{},Ji.__PosthogExtensions__.initDeadClicksAutocapture=(t,e)=>new ic(t,e);var rc=Ar("[ExternalScriptsLoader]"),nc=(t,e,i)=>{if(t.config.disable_external_dependency_loading)return rc.warn(e+" was requested but loading of external scripts is disabled."),i("Loading of external scripts is disabled");var r=null==Yi?void 0:Yi.querySelectorAll("script");if(r)for(var n=0;n<r.length;n++)if(r[n].src===e)return i();var o=()=>{if(!Yi)return i("document not found");var r=Yi.createElement("script");if(r.type="text/javascript",r.crossOrigin="anonymous",r.src=e,r.onload=t=>i(void 0,t),r.onerror=t=>i(t),t.config.prepare_external_dependency_script&&(r=t.config.prepare_external_dependency_script(r)),!r)return i("prepare_external_dependency_script returned null");var n,o=Yi.querySelectorAll("body > script");o.length>0?null==(n=o[0].parentNode)||n.insertBefore(r,o[0]):Yi.body.appendChild(r)};null!=Yi&&Yi.body?o():null==Yi||Yi.addEventListener("DOMContentLoaded",o)};Ji.__PosthogExtensions__=Ji.__PosthogExtensions__||{},Ji.__PosthogExtensions__.loadExternalDependency=(t,e,i)=>{var r="/static/"+e+".js?v="+t.version;if("remote-config"===e&&(r="/array/"+t.config.token+"/config.js"),"toolbar"===e){var n=3e5;r=r+"&t="+Math.floor(Date.now()/n)*n}var o=t.requestRouter.endpointFor("assets",r);nc(t,o,i)},Ji.__PosthogExtensions__.loadSiteApp=(t,e,i)=>{var r=t.requestRouter.endpointFor("api",e);nc(t,r,i)},Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return yr(t)&&isFinite(t)&&Math.floor(t)===t});var oc="0123456789abcdef";class sc{constructor(t){if(this.bytes=t,16!==t.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,e,i,r){if(!Number.isInteger(t)||!Number.isInteger(e)||!Number.isInteger(i)||!Number.isInteger(r)||t<0||e<0||i<0||r<0||t>0xffffffffffff||e>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var n=new Uint8Array(16);return n[0]=t/Math.pow(2,40),n[1]=t/Math.pow(2,32),n[2]=t/Math.pow(2,24),n[3]=t/Math.pow(2,16),n[4]=t/Math.pow(2,8),n[5]=t,n[6]=112|e>>>8,n[7]=e,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=r>>>24,n[13]=r>>>16,n[14]=r>>>8,n[15]=r,new sc(n)}toString(){for(var t="",e=0;e<this.bytes.length;e++)t=t+oc.charAt(this.bytes[e]>>>4)+oc.charAt(15&this.bytes[e]),3!==e&&5!==e&&7!==e&&9!==e||(t+="-");if(36!==t.length)throw new Error("Invalid UUIDv7 was generated");return t}clone(){return new sc(this.bytes.slice(0))}equals(t){return 0===this.compareTo(t)}compareTo(t){for(var e=0;e<16;e++){var i=this.bytes[e]-t.bytes[e];if(0!==i)return Math.sign(i)}return 0}}class ac{constructor(){this.gt=0,this.bt=0,this.yt=new hc}generate(){var t=this.generateOrAbort();if(fr(t)){this.gt=0;var e=this.generateOrAbort();if(fr(e))throw new Error("Could not generate UUID after timestamp reset");return e}return t}generateOrAbort(){var t=Date.now();if(t>this.gt)this.gt=t,this._t();else{if(!(t+1e4>this.gt))return;this.bt++,this.bt>4398046511103&&(this.gt++,this._t())}return sc.fromFieldsV7(this.gt,Math.trunc(this.bt/Math.pow(2,30)),this.bt&Math.pow(2,30)-1,this.yt.nextUint32())}_t(){this.bt=1024*this.yt.nextUint32()+(1023&this.yt.nextUint32())}}var lc,uc=t=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};$i&&!fr($i.crypto)&&crypto.getRandomValues&&(uc=t=>crypto.getRandomValues(t));class hc{constructor(){this.wt=new Uint32Array(8),this.Ct=1/0}nextUint32(){return this.Ct>=this.wt.length&&(uc(this.wt),this.Ct=0),this.wt[this.Ct++]}}var cc=()=>dc().toString(),dc=()=>(lc||(lc=new ac)).generate(),vc="Thu, 01 Jan 1970 00:00:00 GMT",fc="";var pc=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function gc(t,e){if(e){var i=function(t,e){if(void 0===e&&(e=Yi),fc)return fc;if(!e)return"";if(["localhost","127.0.0.1"].includes(t))return"";for(var i=t.split("."),r=Math.min(i.length,8),n="dmn_chk_"+cc(),o=new RegExp("(^|;)\\s*"+n+"=1");!fc&&r--;){var s=i.slice(r).join("."),a=n+"=1;domain=."+s;e.cookie=a,o.test(e.cookie)&&(e.cookie=a+";expires="+vc,fc=s)}return fc}(t);if(!i){var r=(t=>{var e=t.match(pc);return e?e[0]:""})(t);r!==i&&xr.info("Warning: cookie subdomain discovery mismatch",r,i),i=r}return i?"; domain=."+i:""}return""}var mc,bc={It:()=>!!Yi,St:function(t){xr.error("cookieStore error: "+t)},kt:function(t){if(Yi){try{for(var e=t+"=",i=Yi.cookie.split(";").filter((t=>t.length)),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return decodeURIComponent(n.substring(e.length,n.length))}}catch(t){}return null}},xt:function(t){var e;try{e=JSON.parse(bc.kt(t))||{}}catch(t){}return e},At:function(t,e,i,r,n){if(Yi)try{var o="",s="",a=gc(Yi.location.hostname,r);if(i){var l=new Date;l.setTime(l.getTime()+24*i*60*60*1e3),o="; expires="+l.toUTCString()}n&&(s="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+o+"; SameSite=Lax; path=/"+a+s;return u.length>3686.4&&xr.warn("cookieStore warning: large cookie, len="+u.length),Yi.cookie=u,u}catch(t){return}},Tt:function(t,e){try{bc.At(t,"",-1,e)}catch(t){return}}},yc=null,_c={It:function(){if(!mr(yc))return yc;var t=!0;if(fr($i))t=!1;else try{var e="__mplssupport__";_c.At(e,"xyz"),'"xyz"'!==_c.kt(e)&&(t=!1),_c.Tt(e)}catch(e){t=!1}return t||xr.error("localStorage unsupported; falling back to cookie store"),yc=t,t},St:function(t){xr.error("localStorage error: "+t)},kt:function(t){try{return null==$i?void 0:$i.localStorage.getItem(t)}catch(t){_c.St(t)}return null},xt:function(t){try{return JSON.parse(_c.kt(t))||{}}catch(t){}return null},At:function(t,e){try{null==$i||$i.localStorage.setItem(t,JSON.stringify(e))}catch(t){_c.St(t)}},Tt:function(t){try{null==$i||$i.localStorage.removeItem(t)}catch(t){_c.St(t)}}},wc=["distinct_id",fn,pn,En,Rn],Cc=i({},_c,{xt:function(t){try{var e={};try{e=bc.xt(t)||{}}catch(t){}var i=Rr(e,JSON.parse(_c.kt(t)||"{}"));return _c.At(t,i),i}catch(t){}return null},At:function(t,e,i,r,n,o){try{_c.At(t,e,void 0,void 0,o);var s={};wc.forEach((t=>{e[t]&&(s[t]=e[t])})),Object.keys(s).length&&bc.At(t,s,i,r,n,o)}catch(t){_c.St(t)}},Tt:function(t,e){try{null==$i||$i.localStorage.removeItem(t),bc.Tt(t,e)}catch(t){_c.St(t)}}}),Ic={},Sc={It:function(){return!0},St:function(t){xr.error("memoryStorage error: "+t)},kt:function(t){return Ic[t]||null},xt:function(t){return Ic[t]||null},At:function(t,e){Ic[t]=e},Tt:function(t){delete Ic[t]}},kc=null,xc={It:function(){if(!mr(kc))return kc;if(kc=!0,fr($i))kc=!1;else try{var t="__support__";xc.At(t,"xyz"),'"xyz"'!==xc.kt(t)&&(kc=!1),xc.Tt(t)}catch(t){kc=!1}return kc},St:function(t){xr.error("sessionStorage error: ",t)},kt:function(t){try{return null==$i?void 0:$i.sessionStorage.getItem(t)}catch(t){xc.St(t)}return null},xt:function(t){try{return JSON.parse(xc.kt(t))||null}catch(t){}return null},At:function(t,e){try{null==$i||$i.sessionStorage.setItem(t,JSON.stringify(e))}catch(t){xc.St(t)}},Tt:function(t){try{null==$i||$i.sessionStorage.removeItem(t)}catch(t){xc.St(t)}}};!function(t){t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED"}(mc||(mc={}));class Ac{constructor(t){this.Mt=t}get Y(){return this.Mt.config}get consent(){return this.Nt()?mc.DENIED:this.Rt}isOptedOut(){return this.consent===mc.DENIED||this.consent===mc.PENDING&&this.Y.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.Et.At(this.Ft,t?1:0,this.Y.cookie_expiration,this.Y.cross_subdomain_cookie,this.Y.secure_cookie)}reset(){this.Et.Tt(this.Ft,this.Y.cross_subdomain_cookie)}get Ft(){var{token:t,opt_out_capturing_cookie_prefix:e}=this.Mt.config;return(e||"__ph_opt_in_out_")+t}get Rt(){var t=this.Et.kt(this.Ft);return"1"===t?mc.GRANTED:"0"===t?mc.DENIED:mc.PENDING}get Et(){if(!this.Ot){var t=this.Y.opt_out_capturing_persistence_type;this.Ot="localStorage"===t?_c:bc;var e="localStorage"===t?bc:_c;e.kt(this.Ft)&&(this.Ot.kt(this.Ft)||this.optInOut("1"===e.kt(this.Ft)),e.Tt(this.Ft,this.Y.cross_subdomain_cookie))}return this.Ot}Nt(){return!!this.Y.respect_dnt&&!!Zr([null==ji?void 0:ji.doNotTrack,null==ji?void 0:ji.msDoNotTrack,Ji.doNotTrack],(t=>er([!0,1,"1","yes"],t)))}}var Tc=Ar("[Dead Clicks]"),Mc=()=>!0,Nc=t=>{var e,i=!(null==(e=t.instance.persistence)||!e.get_property(nn)),r=t.instance.config.capture_dead_clicks;return _r(r)?r:i};class Rc{get lazyLoadedDeadClicksAutocapture(){return this.Pt}constructor(t,e,i){this.instance=t,this.isEnabled=e,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(t){this.instance.persistence&&this.instance.persistence.register({[nn]:null==t?void 0:t.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.Lt((()=>{this.Dt()}))}Lt(t){var e,i;null!=(e=Ji.__PosthogExtensions__)&&e.initDeadClicksAutocapture&&t(),null==(i=Ji.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",(e=>{e?Tc.error("failed to load script",e):t()}))}Dt(){var t;if(Yi){if(!this.Pt&&null!=(t=Ji.__PosthogExtensions__)&&t.initDeadClicksAutocapture){var e=dr(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};e.__onCapture=this.onCapture,this.Pt=Ji.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,e),this.Pt.start(Yi),Tc.info("starting...")}}else Tc.error("`document` not found. Cannot start.")}stop(){this.Pt&&(this.Pt.stop(),this.Pt=void 0,Tc.info("stopping..."))}}var Ec=Ar("[ExceptionAutocapture]");class Fc{constructor(t){var e;this.Bt=()=>{var t;if($i&&this.isEnabled&&null!=(t=Ji.__PosthogExtensions__)&&t.errorWrappingFunctions){var e=Ji.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,i=Ji.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,r=Ji.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.$t&&this.config.capture_unhandled_errors&&(this.$t=e(this.captureException.bind(this))),!this.Zt&&this.config.capture_unhandled_rejections&&(this.Zt=i(this.captureException.bind(this))),!this.qt&&this.config.capture_console_errors&&(this.qt=r(this.captureException.bind(this)))}catch(t){Ec.error("failed to start",t),this.Ht()}}},this.instance=t,this.remoteEnabled=!(null==(e=this.instance.persistence)||!e.props[en]),this.config=this.Vt(),this.startIfEnabled()}Vt(){var t=this.instance.config.capture_exceptions,e={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return dr(t)?e=i({},e,t):(fr(t)?this.remoteEnabled:t)&&(e=i({},e,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),e}get isEnabled(){return this.config.capture_console_errors||this.config.capture_unhandled_errors||this.config.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Ec.info("enabled"),this.Lt(this.Bt))}Lt(t){var e,i;null!=(e=Ji.__PosthogExtensions__)&&e.errorWrappingFunctions&&t(),null==(i=Ji.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"exception-autocapture",(e=>{if(e)return Ec.error("failed to load script",e);t()}))}Ht(){var t,e,i;null==(t=this.$t)||t.call(this),this.$t=void 0,null==(e=this.Zt)||e.call(this),this.Zt=void 0,null==(i=this.qt)||i.call(this),this.qt=void 0}onRemoteConfig(t){var e=t.autocaptureExceptions;this.remoteEnabled=!!e||!1,this.config=this.Vt(),this.instance.persistence&&this.instance.persistence.register({[en]:this.remoteEnabled}),this.startIfEnabled()}captureException(t){var e=this.instance.requestRouter.endpointFor("ui");t.$exception_personURL=e+"/project/"+this.instance.config.token+"/person/"+this.instance.get_distinct_id(),this.instance.exceptions.sendExceptionEvent(t)}}class Oc{constructor(t){var e;this.Mt=t,this.jt=(null==$i||null==(e=$i.location)?void 0:e.pathname)||""}get isEnabled(){return"history_change"===this.Mt.config.capture_pageview}startIfEnabled(){this.isEnabled&&(xr.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.Yt&&this.Yt(),this.Yt=void 0,xr.info("History API monitoring stopped")}monitorHistoryChanges(){var t,e;if($i&&$i.history){var i=this;null!=(t=$i.history.pushState)&&t.__posthog_wrapped__||zr($i.history,"pushState",(t=>function(e,r,n){t.call(this,e,r,n),i.Gt("pushState")})),null!=(e=$i.history.replaceState)&&e.__posthog_wrapped__||zr($i.history,"replaceState",(t=>function(e,r,n){t.call(this,e,r,n),i.Gt("replaceState")})),this.Wt()}}Gt(t){try{var e,i=null==$i||null==(e=$i.location)?void 0:e.pathname;if(!i)return;i!==this.jt&&this.isEnabled&&this.Mt.capture("$pageview",{navigation_type:t}),this.jt=i}catch(e){xr.error("Error capturing "+t+" pageview",e)}}Wt(){if(!this.Yt){var t=()=>{this.Gt("popstate")};qr($i,"popstate",t),this.Yt=()=>{$i&&$i.removeEventListener("popstate",t)}}}}function Pc(t){var e,i;return(null==(e=JSON.stringify(t,(i=[],function(t,e){if(dr(e)){for(;i.length>0&&i[i.length-1]!==this;)i.pop();return i.includes(e)?"[Circular]":(i.push(e),e)}return e})))?void 0:e.length)||0}function Lc(t,e){if(void 0===e&&(e=6606028.8),t.size>=e&&t.data.length>1){var i=Math.floor(t.data.length/2),r=t.data.slice(0,i),n=t.data.slice(i);return[Lc({size:Pc(r),data:r,sessionId:t.sessionId,windowId:t.windowId}),Lc({size:Pc(n),data:n,sessionId:t.sessionId,windowId:t.windowId})].flatMap((t=>t))}return[t]}var Dc=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Dc||{}),Bc=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Bc||{});function $c(t,e,i,r,n){return e>i&&(xr.warn("min cannot be greater than max."),e=i),yr(t)?t>i?(r&&xr.warn(r+" cannot be  greater than max: "+i+". Using max value instead."),i):t<e?(r&&xr.warn(r+" cannot be less than min: "+e+". Using min value instead."),e):t:(r&&xr.warn(r+" must be a number. using max or fallback. max: "+i+", fallback: "+n),$c(n||i,e,i,r))}class Zc{constructor(t,e){var i,r;void 0===e&&(e={}),this.zt=100,this.Ut=10,this.Xt={},this.Jt={},this.Kt=()=>{Object.keys(this.Xt).forEach((t=>{this.Xt[t]=this.Xt[t]+this.Ut,this.Xt[t]>=this.zt&&delete this.Xt[t]}))},this.Qt=t=>{var e=this._rrweb.mirror.getNode(t);if("svg"!==(null==e?void 0:e.nodeName)&&e instanceof Element){var i=e.closest("svg");if(i)return[this._rrweb.mirror.getId(i),i]}return[t,e]},this.te=t=>{var e,i,r,n,o,s,a,l;return(null!==(e=null==(i=t.removes)?void 0:i.length)&&void 0!==e?e:0)+(null!==(r=null==(n=t.attributes)?void 0:n.length)&&void 0!==r?r:0)+(null!==(o=null==(s=t.texts)?void 0:s.length)&&void 0!==o?o:0)+(null!==(a=null==(l=t.adds)?void 0:l.length)&&void 0!==a?a:0)},this.throttleMutations=t=>{if(3!==t.type||0!==t.data.source)return t;var e=t.data,i=this.te(e);e.attributes&&(e.attributes=e.attributes.filter((t=>{var e,i,r,[n,o]=this.Qt(t.id);if(0===this.Xt[n])return!1;(this.Xt[n]=null!==(e=this.Xt[n])&&void 0!==e?e:this.zt,this.Xt[n]=Math.max(this.Xt[n]-1,0),0===this.Xt[n])&&(this.Jt[n]||(this.Jt[n]=!0,null==(i=(r=this.ee).onBlockedNode)||i.call(r,n,o)));return t})));var r=this.te(e);return 0!==r||i===r?t:void 0},this._rrweb=t,this.ee=e,this.Ut=$c(null!==(i=this.ee.refillRate)&&void 0!==i?i:this.Ut,0,100,"mutation throttling refill rate"),this.zt=$c(null!==(r=this.ee.bucketSize)&&void 0!==r?r:this.zt,0,100,"mutation throttling bucket size"),setInterval((()=>{this.Kt()}),1e3)}}var qc=Uint8Array,Hc=Uint16Array,Vc=Uint32Array,jc=new qc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yc=new qc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gc=new qc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Wc=function(t,e){for(var i=new Hc(31),r=0;r<31;++r)i[r]=e+=1<<t[r-1];var n=new Vc(i[30]);for(r=1;r<30;++r)for(var o=i[r];o<i[r+1];++o)n[o]=o-i[r]<<5|r;return[i,n]},zc=Wc(jc,2),Uc=zc[0],Xc=zc[1];Uc[28]=258,Xc[258]=28;for(var Jc=Wc(Yc,0)[1],Kc=new Hc(32768),Qc=0;Qc<32768;++Qc){var td=(43690&Qc)>>>1|(21845&Qc)<<1;td=(61680&(td=(52428&td)>>>2|(13107&td)<<2))>>>4|(3855&td)<<4,Kc[Qc]=((65280&td)>>>8|(255&td)<<8)>>>1}var ed=function(t,e,i){for(var r=t.length,n=0,o=new Hc(e);n<r;++n)++o[t[n]-1];var s,a=new Hc(e);for(n=0;n<e;++n)a[n]=a[n-1]+o[n-1]<<1;if(i){s=new Hc(1<<e);var l=15-e;for(n=0;n<r;++n)if(t[n])for(var u=n<<4|t[n],h=e-t[n],c=a[t[n]-1]++<<h,d=c|(1<<h)-1;c<=d;++c)s[Kc[c]>>>l]=u}else for(s=new Hc(r),n=0;n<r;++n)s[n]=Kc[a[t[n]-1]++]>>>15-t[n];return s},id=new qc(288);for(Qc=0;Qc<144;++Qc)id[Qc]=8;for(Qc=144;Qc<256;++Qc)id[Qc]=9;for(Qc=256;Qc<280;++Qc)id[Qc]=7;for(Qc=280;Qc<288;++Qc)id[Qc]=8;var rd=new qc(32);for(Qc=0;Qc<32;++Qc)rd[Qc]=5;var nd=ed(id,9,0),od=ed(rd,5,0),sd=function(t){return(t/8>>0)+(7&t&&1)},ad=function(t,e,i){(null==i||i>t.length)&&(i=t.length);var r=new(t instanceof Hc?Hc:t instanceof Vc?Vc:qc)(i-e);return r.set(t.subarray(e,i)),r},ld=function(t,e,i){i<<=7&e;var r=e/8>>0;t[r]|=i,t[r+1]|=i>>>8},ud=function(t,e,i){i<<=7&e;var r=e/8>>0;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},hd=function(t,e){for(var i=[],r=0;r<t.length;++r)t[r]&&i.push({s:r,f:t[r]});var n=i.length,o=i.slice();if(!n)return[new qc(0),0];if(1==n){var s=new qc(i[0].s+1);return s[i[0].s]=1,[s,1]}i.sort((function(t,e){return t.f-e.f})),i.push({s:-1,f:25001});var a=i[0],l=i[1],u=0,h=1,c=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=n-1;)a=i[i[u].f<i[c].f?u++:c++],l=i[u!=h&&i[u].f<i[c].f?u++:c++],i[h++]={s:-1,f:a.f+l.f,l:a,r:l};var d=o[0].s;for(r=1;r<n;++r)o[r].s>d&&(d=o[r].s);var v=new Hc(d+1),f=cd(i[h-1],v,0);if(f>e){r=0;var p=0,g=f-e,m=1<<g;for(o.sort((function(t,e){return v[e.s]-v[t.s]||t.f-e.f}));r<n;++r){var b=o[r].s;if(!(v[b]>e))break;p+=m-(1<<f-v[b]),v[b]=e}for(p>>>=g;p>0;){var y=o[r].s;v[y]<e?p-=1<<e-v[y]++-1:++r}for(;r>=0&&p;--r){var _=o[r].s;v[_]==e&&(--v[_],++p)}f=e}return[new qc(v),f]},cd=function(t,e,i){return-1==t.s?Math.max(cd(t.l,e,i+1),cd(t.r,e,i+1)):e[t.s]=i},dd=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new Hc(++e),r=0,n=t[0],o=1,s=function(t){i[r++]=t},a=1;a<=e;++a)if(t[a]==n&&a!=e)++o;else{if(!n&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(n),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(n);o=1,n=t[a]}return[i.subarray(0,r),e]},vd=function(t,e){for(var i=0,r=0;r<e.length;++r)i+=t[r]*e[r];return i},fd=function(t,e,i){var r=i.length,n=sd(e+2);t[n]=255&r,t[n+1]=r>>>8,t[n+2]=255^t[n],t[n+3]=255^t[n+1];for(var o=0;o<r;++o)t[n+o+4]=i[o];return 8*(n+4+r)},pd=function(t,e,i,r,n,o,s,a,l,u,h){ld(e,h++,i),++n[256];for(var c=hd(n,15),d=c[0],v=c[1],f=hd(o,15),p=f[0],g=f[1],m=dd(d),b=m[0],y=m[1],_=dd(p),w=_[0],C=_[1],I=new Hc(19),S=0;S<b.length;++S)I[31&b[S]]++;for(S=0;S<w.length;++S)I[31&w[S]]++;for(var k=hd(I,7),x=k[0],A=k[1],T=19;T>4&&!x[Gc[T-1]];--T);var M,N,R,E,F=u+5<<3,O=vd(n,id)+vd(o,rd)+s,P=vd(n,d)+vd(o,p)+s+14+3*T+vd(I,x)+(2*I[16]+3*I[17]+7*I[18]);if(F<=O&&F<=P)return fd(e,h,t.subarray(l,l+u));if(ld(e,h,1+(P<O)),h+=2,P<O){M=ed(d,v,0),N=d,R=ed(p,g,0),E=p;var L=ed(x,A,0);ld(e,h,y-257),ld(e,h+5,C-1),ld(e,h+10,T-4),h+=14;for(S=0;S<T;++S)ld(e,h+3*S,x[Gc[S]]);h+=3*T;for(var D=[b,w],B=0;B<2;++B){var $=D[B];for(S=0;S<$.length;++S){var Z=31&$[S];ld(e,h,L[Z]),h+=x[Z],Z>15&&(ld(e,h,$[S]>>>5&127),h+=$[S]>>>12)}}}else M=nd,N=id,R=od,E=rd;for(S=0;S<a;++S)if(r[S]>255){Z=r[S]>>>18&31;ud(e,h,M[Z+257]),h+=N[Z+257],Z>7&&(ld(e,h,r[S]>>>23&31),h+=jc[Z]);var q=31&r[S];ud(e,h,R[q]),h+=E[q],q>3&&(ud(e,h,r[S]>>>5&8191),h+=Yc[q])}else ud(e,h,M[r[S]]),h+=N[r[S]];return ud(e,h,M[256]),h+N[256]},gd=new Vc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),md=function(){for(var t=new Vc(256),e=0;e<256;++e){for(var i=e,r=9;--r;)i=(1&i&&3988292384)^i>>>1;t[e]=i}return t}(),bd=function(){var t=4294967295;return{p:function(e){for(var i=t,r=0;r<e.length;++r)i=md[255&i^e[r]]^i>>>8;t=i},d:function(){return 4294967295^t}}},yd=function(t,e,i,r,n){return function(t,e,i,r,n,o){var s=t.length,a=new qc(r+s+5*(1+Math.floor(s/7e3))+n),l=a.subarray(r,a.length-n),u=0;if(!e||s<8)for(var h=0;h<=s;h+=65535){var c=h+65535;c<s?u=fd(l,u,t.subarray(h,c)):(l[h]=o,u=fd(l,u,t.subarray(h,s)))}else{for(var d=gd[e-1],v=d>>>13,f=8191&d,p=(1<<i)-1,g=new Hc(32768),m=new Hc(p+1),b=Math.ceil(i/3),y=2*b,_=function(e){return(t[e]^t[e+1]<<b^t[e+2]<<y)&p},w=new Vc(25e3),C=new Hc(288),I=new Hc(32),S=0,k=0,x=(h=0,0),A=0,T=0;h<s;++h){var M=_(h),N=32767&h,R=m[M];if(g[N]=R,m[M]=N,A<=h){var E=s-h;if((S>7e3||x>24576)&&E>423){u=pd(t,l,0,w,C,I,k,x,T,h-T,u),x=S=k=0,T=h;for(var F=0;F<286;++F)C[F]=0;for(F=0;F<30;++F)I[F]=0}var O=2,P=0,L=f,D=N-R&32767;if(E>2&&M==_(h-D))for(var B=Math.min(v,E)-1,$=Math.min(32767,h),Z=Math.min(258,E);D<=$&&--L&&N!=R;){if(t[h+O]==t[h+O-D]){for(var q=0;q<Z&&t[h+q]==t[h+q-D];++q);if(q>O){if(O=q,P=D,q>B)break;var H=Math.min(D,q-2),V=0;for(F=0;F<H;++F){var j=h-D+F+32768&32767,Y=j-g[j]+32768&32767;Y>V&&(V=Y,R=j)}}}D+=(N=R)-(R=g[N])+32768&32767}if(P){w[x++]=268435456|Xc[O]<<18|Jc[P];var G=31&Xc[O],W=31&Jc[P];k+=jc[G]+Yc[W],++C[257+G],++I[W],A=h+O,++S}else w[x++]=t[h],++C[t[h]]}}u=pd(t,l,o,w,C,I,k,x,T,h-T,u)}return ad(a,0,r+sd(u)+n)}(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,i,r,!n)},_d=function(t,e,i){for(;i;++e)t[e]=i,i>>>=8},wd=function(t,e){var i=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&_d(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),i){t[3]=8;for(var r=0;r<=i.length;++r)t[r+10]=i.charCodeAt(r)}},Cd=function(t){return 10+(t.filename&&t.filename.length+1||0)};function Id(t,e){void 0===e&&(e={});var i=bd(),r=t.length;i.p(t);var n=yd(t,e,Cd(e),8),o=n.length;return wd(n,e),_d(n,o-8,i.d()),_d(n,o-4,r),n}function Sd(t,e){var i=t.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);for(var r=new qc(t.length+(t.length>>>1)),n=0,o=function(t){r[n++]=t},s=0;s<i;++s){if(n+5>r.length){var a=new qc(n+8+(i-s<<1));a.set(r),r=a}var l=t.charCodeAt(s);l<128||e?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return ad(r,0,n)}function kd(t,e){return function(t){for(var e=0,i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return Math.abs(e)}(t)%100<$c(100*e,0,100)}var xd="[SessionRecording]",Ad=Ar(xd);function Td(){var t,e;return null==Ji||null==(t=Ji.__PosthogExtensions__)||null==(e=t.rrweb)?void 0:e.record}var Md=3e5,Nd=[Bc.MouseMove,Bc.MouseInteraction,Bc.Scroll,Bc.ViewportResize,Bc.Input,Bc.TouchMove,Bc.MediaInteraction,Bc.Drag],Rd=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Ed(t){return function(t,e){for(var i="",r=0;r<t.length;){var n=t[r++];n<128||e?i+=String.fromCharCode(n):n<224?i+=String.fromCharCode((31&n)<<6|63&t[r++]):n<240?i+=String.fromCharCode((15&n)<<12|(63&t[r++])<<6|63&t[r++]):(n=((15&n)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536,i+=String.fromCharCode(55296|n>>10,56320|1023&n))}return i}(Id(Sd(JSON.stringify(t))),!0)}function Fd(t){return t.type===Dc.Custom&&"sessionIdle"===t.data.tag}function Od(t,e){return e.some((e=>"regex"===e.matching&&new RegExp(e.url).test(t)))}class Pd{get ie(){return this.Mt.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.re}get ne(){if(!this.Mt.sessionManager)throw new Error(xd+" must be started with a valid sessionManager.");return this.Mt.sessionManager}get oe(){var t,e;return"trigger_pending"===this.se?6e4:null!==(t=null==(e=this.Mt.config.session_recording)?void 0:e.full_snapshot_interval_millis)&&void 0!==t?t:Md}get ae(){var t=this.Mt.get_property(pn);return _r(t)?t:null}get le(){var t,e,i=null==(t=this.wt)?void 0:t.data[(null==(e=this.wt)?void 0:e.data.length)-1],{sessionStartTimestamp:r}=this.ne.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get ue(){var t=!!this.Mt.get_property(sn),e=!this.Mt.config.disable_session_recording;return $i&&t&&e}get he(){var t=!!this.Mt.get_property(an),e=this.Mt.config.enable_recording_console_log;return null!=e?e:t}get ce(){var t,e,i,r,n,o,s=this.Mt.config.session_recording.captureCanvas,a=this.Mt.get_property(hn),l=null!==(t=null!==(e=null==s?void 0:s.recordCanvas)&&void 0!==e?e:null==a?void 0:a.enabled)&&void 0!==t&&t,u=null!==(i=null!==(r=null==s?void 0:s.canvasFps)&&void 0!==r?r:null==a?void 0:a.fps)&&void 0!==i?i:4,h=null!==(n=null!==(o=null==s?void 0:s.canvasQuality)&&void 0!==o?o:null==a?void 0:a.quality)&&void 0!==n?n:.4;if("string"==typeof h){var c=parseFloat(h);h=isNaN(c)?.4:c}return{enabled:l,fps:$c(u,0,12,"canvas recording fps",4),quality:$c(h,0,1,"canvas recording quality",.4)}}get de(){var t,e,i=this.Mt.get_property(ln),r={recordHeaders:null==(t=this.Mt.config.session_recording)?void 0:t.recordHeaders,recordBody:null==(e=this.Mt.config.session_recording)?void 0:e.recordBody},n=(null==r?void 0:r.recordHeaders)||(null==i?void 0:i.recordHeaders),o=(null==r?void 0:r.recordBody)||(null==i?void 0:i.recordBody),s=dr(this.Mt.config.capture_performance)?this.Mt.config.capture_performance.network_timing:this.Mt.config.capture_performance,a=!!(_r(s)?s:null==i?void 0:i.capturePerformance);return n||o||a?{recordHeaders:n,recordBody:o,recordPerformance:a}:void 0}get ve(){var t,e,i,r,n,o,s=this.Mt.get_property(un),a={maskAllInputs:null==(t=this.Mt.config.session_recording)?void 0:t.maskAllInputs,maskTextSelector:null==(e=this.Mt.config.session_recording)?void 0:e.maskTextSelector,blockSelector:null==(i=this.Mt.config.session_recording)?void 0:i.blockSelector},l=null!==(r=null==a?void 0:a.maskAllInputs)&&void 0!==r?r:null==s?void 0:s.maskAllInputs,u=null!==(n=null==a?void 0:a.maskTextSelector)&&void 0!==n?n:null==s?void 0:s.maskTextSelector,h=null!==(o=null==a?void 0:a.blockSelector)&&void 0!==o?o:null==s?void 0:s.blockSelector;return fr(l)&&fr(u)&&fr(h)?void 0:{maskAllInputs:null==l||l,maskTextSelector:u,blockSelector:h}}get fe(){var t=this.Mt.get_property(cn);return yr(t)?t:null}get pe(){var t=this.Mt.get_property(dn);return yr(t)?t:null}get status(){return this.ge?this.ue?!1===this.ae?"disabled":this.me?"paused":br(this.be)||this.ye?"trigger_pending"===this.se?"buffering":_r(this.ae)?this.ae?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get _e(){var t;return 0===this.we.length?"trigger_disabled":(null==(t=this.Mt)?void 0:t.get_property(gn))===this.Ce?"trigger_activated":"trigger_pending"}get Ie(){var t;return 0===this.Se.length?"trigger_disabled":(null==(t=this.Mt)?void 0:t.get_property(mn))===this.Ce?"trigger_activated":"trigger_pending"}get se(){var t="trigger_activated"===this.Ie||"trigger_activated"===this._e,e="trigger_pending"===this.Ie||"trigger_pending"===this._e;return t?"trigger_activated":e?"trigger_pending":"trigger_disabled"}constructor(t){if(this.ke=[],this.xe="unknown",this.ye=!1,this.Ae=Date.now(),this.be=null,this.Te=void 0,this.Me=void 0,this.Ne=void 0,this.Re=void 0,this.we=[],this.Ee=[],this.me=!1,this.Se=[],this.Fe=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.Oe=()=>{this.Pe()},this.Le=()=>{this.De("browser offline",{})},this.Be=()=>{this.De("browser online",{})},this.$e=()=>{if(null!=Yi&&Yi.visibilityState){var t="window "+Yi.visibilityState;this.De(t,{})}},this.Mt=t,this.re=!1,this.Ze="/s/",this.qe=void 0,this.ge=!1,!this.Mt.sessionManager)throw Ad.error("started without valid sessionManager"),new Error(xd+" started without valid sessionManager. This is a bug.");if(this.Mt.config.__preview_experimental_cookieless_mode)throw new Error(xd+" cannot be used with __preview_experimental_cookieless_mode.");var{sessionId:e,windowId:i}=this.ne.checkAndGetSessionAndWindowId();this.Ce=e,this.He=i,this.wt=this.Ve(),this.ie>=this.ne.sessionTimeoutMs&&Ad.warn("session_idle_threshold_ms ("+this.ie+") is greater than the session timeout ("+this.ne.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(t){this.ue?(this.je(t),qr($i,"beforeunload",this.Oe),qr($i,"offline",this.Le),qr($i,"online",this.Be),qr($i,"visibilitychange",this.$e),this.Ye(),this.Ge(),br(this.Te)&&(this.Te=this.Mt.on("eventCaptured",(t=>{try{if("$pageview"===t.event){var e=null!=t&&t.properties.$current_url?this.We(null==t?void 0:t.properties.$current_url):"";if(!e)return;this.De("$pageview",{href:e})}}catch(t){Ad.error("Could not add $pageview to rrweb session",t)}}))),this.Me||(this.Me=this.ne.onSessionId(((t,e,i)=>{var r,n,o,s;i&&(this.De("$session_id_change",{sessionId:t,windowId:e,changeReason:i}),null==(r=this.Mt)||null==(n=r.persistence)||n.unregister(mn),null==(o=this.Mt)||null==(s=o.persistence)||s.unregister(gn))})))):this.stopRecording()}stopRecording(){var t,e,i,r;this.re&&this.qe&&(this.qe(),this.qe=void 0,this.re=!1,null==$i||$i.removeEventListener("beforeunload",this.Oe),null==$i||$i.removeEventListener("offline",this.Le),null==$i||$i.removeEventListener("online",this.Be),null==$i||$i.removeEventListener("visibilitychange",this.$e),this.Ve(),clearInterval(this.ze),null==(t=this.Te)||t.call(this),this.Te=void 0,null==(e=this.Fe)||e.call(this),this.Fe=void 0,null==(i=this.Me)||i.call(this),this.Me=void 0,null==(r=this.Re)||r.call(this),this.Re=void 0,Ad.info("stopped"))}Ue(){var t;null==(t=this.Mt.persistence)||t.unregister(pn)}Xe(t){var e,i=this.Ce!==t,r=this.fe;if(yr(r)){var n=this.ae,o=i||!_r(n),s=o?kd(t,r):n;o&&(s?this.Je("sampled"):Ad.warn("Sample rate ("+r+") has determined that this sessionId ("+t+") will not be sent to the server."),this.De("samplingDecisionMade",{sampleRate:r,isSampled:s})),null==(e=this.Mt.persistence)||e.register({[pn]:s})}else this.Ue()}onRemoteConfig(t){var e,i,r,n,o,s;(this.De("$remote_config_received",t),this.Ke(t),this.be=(null==(e=t.sessionRecording)?void 0:e.linkedFlag)||null,null!=(i=t.sessionRecording)&&i.endpoint)&&(this.Ze=null==(s=t.sessionRecording)?void 0:s.endpoint);if(this.Ye(),!br(this.be)&&!this.ye){var a=pr(this.be)?this.be:this.be.flag,l=pr(this.be)?null:this.be.variant;this.Mt.onFeatureFlags(((t,e)=>{var i=dr(e)&&a in e,r=l?e[a]===l:i;r&&this.Je("linked_flag_matched",{linkedFlag:a,linkedVariant:l}),this.ye=r}))}null!=(r=t.sessionRecording)&&r.urlTriggers&&(this.we=t.sessionRecording.urlTriggers),null!=(n=t.sessionRecording)&&n.urlBlocklist&&(this.Ee=t.sessionRecording.urlBlocklist),null!=(o=t.sessionRecording)&&o.eventTriggers&&(this.Se=t.sessionRecording.eventTriggers),this.ge=!0,this.startIfEnabledOrStop()}Ye(){yr(this.fe)&&br(this.Re)&&(this.Re=this.ne.onSessionId((t=>{this.Xe(t)})))}Ke(t){if(this.Mt.persistence){var e,r=this.Mt.persistence,n=()=>{var e,n,o,s,a,l,u,h,c,d=null==(e=t.sessionRecording)?void 0:e.sampleRate,v=br(d)?null:parseFloat(d);br(v)&&this.Ue();var f=null==(n=t.sessionRecording)?void 0:n.minimumDurationMilliseconds;r.register({[sn]:!!t.sessionRecording,[an]:null==(o=t.sessionRecording)?void 0:o.consoleLogRecordingEnabled,[ln]:i({capturePerformance:t.capturePerformance},null==(s=t.sessionRecording)?void 0:s.networkPayloadCapture),[un]:null==(a=t.sessionRecording)?void 0:a.masking,[hn]:{enabled:null==(l=t.sessionRecording)?void 0:l.recordCanvas,fps:null==(u=t.sessionRecording)?void 0:u.canvasFps,quality:null==(h=t.sessionRecording)?void 0:h.canvasQuality},[cn]:v,[dn]:fr(f)?null:f,[vn]:null==(c=t.sessionRecording)?void 0:c.scriptConfig})};n(),null==(e=this.Ne)||e.call(this),this.Ne=this.ne.onSessionId(n)}}log(t,e){var i;void 0===e&&(e="log"),null==(i=this.Mt.sessionRecording)||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:e,trace:[],payload:[JSON.stringify(t)]}},timestamp:Date.now()})}je(t){if(!fr(Object.assign)&&!fr(Array.from)&&!(this.re||this.Mt.config.disable_session_recording||this.Mt.consent.isOptedOut())){var e;if(this.re=!0,this.ne.checkAndGetSessionAndWindowId(),Td())this.Qe();else null==(e=Ji.__PosthogExtensions__)||null==e.loadExternalDependency||e.loadExternalDependency(this.Mt,this.ti,(t=>{if(t)return Ad.error("could not load recorder",t);this.Qe()}));Ad.info("starting"),"active"===this.status&&this.Je(t||"recording_initialized")}}get ti(){var t,e,i;return(null==(t=this.Mt)||null==(e=t.persistence)||null==(i=e.get_property(vn))?void 0:i.script)||"recorder"}ei(t){var e;return 3===t.type&&-1!==Nd.indexOf(null==(e=t.data)?void 0:e.source)}ii(t){var e=this.ei(t);e||this.xe||t.timestamp-this.Ae>this.ie&&(this.xe=!0,clearInterval(this.ze),this.De("sessionIdle",{eventTimestamp:t.timestamp,lastActivityTimestamp:this.Ae,threshold:this.ie,bufferLength:this.wt.data.length,bufferSize:this.wt.size}),this.Pe());var i=!1;if(e&&(this.Ae=t.timestamp,this.xe)){var r="unknown"===this.xe;this.xe=!1,r||(this.De("sessionNoLongerIdle",{reason:"user activity",type:t.type}),i=!0)}if(!this.xe){var{windowId:n,sessionId:o}=this.ne.checkAndGetSessionAndWindowId(!e,t.timestamp),s=this.Ce!==o,a=this.He!==n;this.He=n,this.Ce=o,s||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.ri()}}ni(t){try{return t.rrwebMethod(),!0}catch(e){return this.ke.length<10?this.ke.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):Ad.warn("could not emit queued rrweb event.",e,t),!1}}De(t,e){return this.ni(Rd((()=>Td().addCustomEvent(t,e))))}oi(){return this.ni(Rd((()=>Td().takeFullSnapshot())))}Qe(){var t,e,r,n,o={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},s=this.Mt.config.session_recording;for(var[a,l]of Object.entries(s||{}))a in o&&("maskInputOptions"===a?o.maskInputOptions=i({password:!0},l):o[a]=l);(this.ce&&this.ce.enabled&&(o.recordCanvas=!0,o.sampling={canvas:this.ce.fps},o.dataURLOptions={type:"image/webp",quality:this.ce.quality}),this.ve)&&(o.maskAllInputs=null===(e=this.ve.maskAllInputs)||void 0===e||e,o.maskTextSelector=null!==(r=this.ve.maskTextSelector)&&void 0!==r?r:void 0,o.blockSelector=null!==(n=this.ve.blockSelector)&&void 0!==n?n:void 0);var u=Td();if(u){this.si=null!==(t=this.si)&&void 0!==t?t:new Zc(u,{refillRate:this.Mt.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.Mt.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(t,e)=>{var i="Too many mutations on node '"+t+"'. Rate limiting. This could be due to SVG animations or something similar";Ad.info(i,{node:e}),this.log(xd+" "+i,"warn")}});var h=this.ai();this.qe=u(i({emit:t=>{this.onRRwebEmit(t)},plugins:h},o)),this.Ae=Date.now(),this.xe=_r(this.xe)?this.xe:"unknown",this.De("$session_options",{sessionRecordingOptions:o,activePlugins:h.map((t=>null==t?void 0:t.name))}),this.De("$posthog_config",{config:this.Mt.config})}else Ad.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}ri(){if(this.ze&&clearInterval(this.ze),!0!==this.xe){var t=this.oe;t&&(this.ze=setInterval((()=>{this.oi()}),t))}}ai(){var t,e,i,r,n=[],o=null==(t=Ji.__PosthogExtensions__)||null==(e=t.rrwebPlugins)?void 0:e.getRecordConsolePlugin;o&&this.he&&n.push(o());var s=null==(i=Ji.__PosthogExtensions__)||null==(r=i.rrwebPlugins)?void 0:r.getRecordNetworkPlugin;this.de&&ur(s)&&(!Hr.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?n.push(s(yo(this.Mt.config,this.de))):Ad.info("NetworkCapture not started because we are on localhost."));return n}onRRwebEmit(t){var e;if(this.li(),t&&dr(t)){if(t.type===Dc.Meta){var r=this.We(t.data.href);if(this.ui=r,!r)return;t.data.href=r}else this.hi();if(this.ci(),!this.me||function(t){return t.type===Dc.Custom&&"recording paused"===t.data.tag}(t)){t.type===Dc.FullSnapshot&&this.ri(),t.type===Dc.FullSnapshot&&"trigger_pending"===this.se&&this.Ve();var n=this.si?this.si.throttleMutations(t):t;if(n){var o=function(t){var e=t;if(e&&dr(e)&&6===e.type&&dr(e.data)&&"rrweb/console@1"===e.data.plugin){e.data.payload.payload.length>10&&(e.data.payload.payload=e.data.payload.payload.slice(0,10),e.data.payload.payload.push("...[truncated]"));for(var i=[],r=0;r<e.data.payload.payload.length;r++)e.data.payload.payload[r]&&e.data.payload.payload[r].length>2e3?i.push(e.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):i.push(e.data.payload.payload[r]);return e.data.payload.payload=i,t}return t}(n);if(this.ii(o),!0!==this.xe||Fd(o)){if(Fd(o)){var s=o.data.payload;if(s){var a=s.lastActivityTimestamp,l=s.threshold;o.timestamp=a+l}}var u=null===(e=this.Mt.config.session_recording.compress_events)||void 0===e||e?function(t){if(Pc(t)<1024)return t;try{if(t.type===Dc.FullSnapshot)return i({},t,{data:Ed(t.data),cv:"2024-10"});if(t.type===Dc.IncrementalSnapshot&&t.data.source===Bc.Mutation)return i({},t,{cv:"2024-10",data:i({},t.data,{texts:Ed(t.data.texts),attributes:Ed(t.data.attributes),removes:Ed(t.data.removes),adds:Ed(t.data.adds)})});if(t.type===Dc.IncrementalSnapshot&&t.data.source===Bc.StyleSheetRule)return i({},t,{cv:"2024-10",data:i({},t.data,{adds:t.data.adds?Ed(t.data.adds):void 0,removes:t.data.removes?Ed(t.data.removes):void 0})})}catch(t){Ad.error("could not compress event - will use uncompressed event",t)}return t}(o):o,h={$snapshot_bytes:Pc(u),$snapshot_data:u,$session_id:this.Ce,$window_id:this.He};"disabled"!==this.status?this.di(h):this.Ve()}}}}}hi(){if(!this.Mt.config.capture_pageview&&$i){var t=this.We($i.location.href);this.ui!==t&&(this.De("$url_changed",{href:t}),this.ui=t)}}li(){if(this.ke.length){var t=[...this.ke];this.ke=[],t.forEach((t=>{Date.now()-t.enqueuedAt<=2e3&&this.ni(t)}))}}We(t){var e=this.Mt.config.session_recording;if(e.maskNetworkRequestFn){var i,r={url:t};return null==(i=r=e.maskNetworkRequestFn(r))?void 0:i.url}return t}Ve(){return this.wt={size:0,data:[],sessionId:this.Ce,windowId:this.He},this.wt}Pe(){this.vi&&(clearTimeout(this.vi),this.vi=void 0);var t=this.pe,e=this.le,i=yr(e)&&e>=0,r=yr(t)&&i&&e<t;if("buffering"===this.status||"paused"===this.status||"disabled"===this.status||r)return this.vi=setTimeout((()=>{this.Pe()}),2e3),this.wt;this.wt.data.length>0&&Lc(this.wt).forEach((t=>{this.fi({$snapshot_bytes:t.size,$snapshot_data:t.data,$session_id:t.sessionId,$window_id:t.windowId,$lib:"web",$lib_version:Sr.LIB_VERSION})}));return this.Ve()}di(t){var e,i=2+((null==(e=this.wt)?void 0:e.data.length)||0);!this.xe&&(this.wt.size+t.$snapshot_bytes+i>943718.4||this.wt.sessionId!==this.Ce)&&(this.wt=this.Pe()),this.wt.size+=t.$snapshot_bytes,this.wt.data.push(t.$snapshot_data),this.vi||this.xe||(this.vi=setTimeout((()=>{this.Pe()}),2e3))}fi(t){this.Mt.capture("$snapshot",t,{_url:this.Mt.requestRouter.endpointFor("api",this.Ze),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}ci(){if(void 0!==$i&&$i.location.href){var t=$i.location.href,e=this.me,i=Od(t,this.Ee);i&&!e?this.pi():!i&&e&&this.gi(),Od(t,this.we)&&this.mi("url")}}mi(t){var e,i;"trigger_pending"===this.se&&(null==(e=this.Mt)||null==(i=e.persistence)||i.register({["url"===t?gn:mn]:this.Ce}),this.Pe(),this.Je(t+"_trigger_matched"))}pi(){this.me||(this.me=!0,clearInterval(this.ze),Ad.info("recording paused due to URL blocker"),this.De("recording paused",{reason:"url blocker"}))}gi(){this.me&&(this.me=!1,this.oi(),this.ri(),this.De("recording resumed",{reason:"left blocked url"}),Ad.info("recording resumed"))}Ge(){0!==this.Se.length&&br(this.Fe)&&(this.Fe=this.Mt.on("eventCaptured",(t=>{try{this.Se.includes(t.event)&&this.mi("event")}catch(t){Ad.error("Could not activate event trigger",t)}})))}overrideLinkedFlag(){this.ye=!0,this.oi(),this.Je("linked_flag_overridden")}overrideSampling(){var t;null==(t=this.Mt.persistence)||t.register({[pn]:!0}),this.oi(),this.Je("sampling_overridden")}overrideTrigger(t){this.mi(t)}Je(t,e){this.Mt.register_for_session({$session_recording_start_reason:t}),Ad.info(t.replace("_"," "),e),er(["recording_initialized","session_id_changed"],t)||this.De(t,e)}get sdkDebugProperties(){var{sessionStartTimestamp:t}=this.ne.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.wt.data.length,$sdk_debug_replay_internal_buffer_size:this.wt.size,$sdk_debug_current_session_duration:this.le,$sdk_debug_session_start:t}}}var Ld=Ar("[SegmentIntegration]");function Dd(t,e){var i=t.config.segment;if(!i)return e();!function(t,e){var i=t.config.segment;if(!i)return e();var r=i=>{var r=()=>i.anonymousId()||cc();t.config.get_device_id=r,i.id()&&(t.register({distinct_id:i.id(),$device_id:r()}),t.persistence.set_property(xn,"identified")),e()},n=i.user();"then"in n&&ur(n.then)?n.then((t=>r(t))):r(n)}(t,(()=>{i.register((t=>{Promise&&Promise.resolve||Ld.warn("This browser does not have Promise support, and can not use the segment integration");var e=(e,i)=>{var r;if(!i)return e;e.event.userId||e.event.anonymousId===t.get_distinct_id()||(Ld.info("No userId set, resetting PostHog"),t.reset()),e.event.userId&&e.event.userId!==t.get_distinct_id()&&(Ld.info("UserId set, identifying with PostHog"),t.identify(e.event.userId));var n=t.bi(i,null!==(r=e.event.properties)&&void 0!==r?r:{},new Date);return e.event.properties=Object.assign({},n,e.event.properties),e};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:t=>e(t,t.event.event),page:t=>e(t,"$pageview"),identify:t=>e(t,"$identify"),screen:t=>e(t,"$screen")}})(t)).then((()=>{e()}))}))}var Bd="posthog-js";function $d(t,e){var{organization:r,projectId:n,prefix:o,severityAllowList:s=["error"]}=void 0===e?{}:e;return e=>{var a,l,u,h,c;if(!("*"===s||s.includes(e.level))||!t.__loaded)return e;e.tags||(e.tags={});var d=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());e.tags["PostHog Person URL"]=d,t.sessionRecordingStarted()&&(e.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var v=(null==(a=e.exception)?void 0:a.values)||[],f=v.map((t=>i({},t,{stacktrace:t.stacktrace?i({},t.stacktrace,{type:"raw",frames:(t.stacktrace.frames||[]).map((t=>i({},t,{platform:"web:javascript"})))}):void 0}))),p={$exception_message:(null==(l=v[0])?void 0:l.value)||e.message,$exception_type:null==(u=v[0])?void 0:u.type,$exception_personURL:d,$exception_level:e.level,$exception_list:f,$sentry_event_id:e.event_id,$sentry_exception:e.exception,$sentry_exception_message:(null==(h=v[0])?void 0:h.value)||e.message,$sentry_exception_type:null==(c=v[0])?void 0:c.type,$sentry_tags:e.tags};return r&&n&&(p.$sentry_url=(o||"https://sentry.io/organizations/")+r+"/issues/?project="+n+"&query="+e.event_id),t.exceptions.sendExceptionEvent(p),e}}class Zd{constructor(t,e,i,r,n){this.name=Bd,this.setupOnce=function(o){o($d(t,{organization:e,projectId:i,prefix:r,severityAllowList:n}))}}}var qd,Hd=null!=$i&&$i.location?Wr($i.location.hash,"__posthog")||Wr(location.hash,"state"):null,Vd="_postHogToolbarParams",jd=Ar("[Toolbar]");!function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(qd||(qd={}));class Yd{constructor(t){this.instance=t}yi(t){Ji.ph_toolbar_state=t}wi(){var t;return null!==(t=Ji.ph_toolbar_state)&&void 0!==t?t:qd.UNINITIALIZED}maybeLoadToolbar(t,e,i){var r,n;if(void 0===t&&(t=void 0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),!$i||!Yi)return!1;t=null!==(r=t)&&void 0!==r?r:$i.location,i=null!==(n=i)&&void 0!==n?n:$i.history;try{if(!e){try{$i.localStorage.setItem("test","test"),$i.localStorage.removeItem("test")}catch(t){return!1}e=null==$i?void 0:$i.localStorage}var o,s=Hd||Wr(t.hash,"__posthog")||Wr(t.hash,"state"),a=s?Or((()=>JSON.parse(atob(decodeURIComponent(s)))))||Or((()=>JSON.parse(decodeURIComponent(s)))):null;return a&&"ph_authorize"===a.action?((o=a).source="url",o&&Object.keys(o).length>0&&(a.desiredHash?t.hash=a.desiredHash:i?i.replaceState(i.state,"",t.pathname+t.search):t.hash="")):((o=JSON.parse(e.getItem(Vd)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch(t){return!1}}Ci(t){var e=Ji.ph_load_toolbar||Ji.ph_load_editor;!br(e)&&ur(e)?e(t,this.instance):jd.warn("No toolbar load function found")}loadToolbar(t){var e=!(null==Yi||!Yi.getElementById(Fn));if(!$i||e)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,n=i({token:this.instance.config.token},t,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if($i.localStorage.setItem(Vd,JSON.stringify(i({},n,{source:void 0}))),this.wi()===qd.LOADED)this.Ci(n);else if(this.wi()===qd.UNINITIALIZED){var o;this.yi(qd.LOADING),null==(o=Ji.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this.instance,"toolbar",(t=>{if(t)return jd.error("[Toolbar] Failed to load",t),void this.yi(qd.UNINITIALIZED);this.yi(qd.LOADED),this.Ci(n)})),qr($i,"turbolinks:load",(()=>{this.yi(qd.UNINITIALIZED),this.loadToolbar(n)}))}return!0}Ii(t){return this.loadToolbar(t)}maybeLoadEditor(t,e,i){return void 0===t&&(t=void 0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),this.maybeLoadToolbar(t,e,i)}}var Gd=Ar("[TracingHeaders]");class Wd{constructor(t){this.Si=void 0,this.ki=void 0,this.Bt=()=>{var t,e,i,r;fr(this.Si)&&(null==(t=Ji.__PosthogExtensions__)||null==(e=t.tracingHeadersPatchFns)||e._patchXHR(this.Mt.sessionManager));fr(this.ki)&&(null==(i=Ji.__PosthogExtensions__)||null==(r=i.tracingHeadersPatchFns)||r._patchFetch(this.Mt.sessionManager))},this.Mt=t}Lt(t){var e,i;null!=(e=Ji.__PosthogExtensions__)&&e.tracingHeadersPatchFns&&t(),null==(i=Ji.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.Mt,"tracing-headers",(e=>{if(e)return Gd.error("failed to load script",e);t()}))}startIfEnabledOrStop(){var t,e;this.Mt.config.__add_tracing_headers?this.Lt(this.Bt):(null==(t=this.Si)||t.call(this),null==(e=this.ki)||e.call(this),this.Si=void 0,this.ki=void 0)}}var zd=Ar("[Web Vitals]"),Ud=9e5;class Xd{constructor(t){var e;this.xi=!1,this.q=!1,this.wt={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Ai=()=>{clearTimeout(this.Ti),0!==this.wt.metrics.length&&(this.Mt.capture("$web_vitals",this.wt.metrics.reduce(((t,e)=>i({},t,{["$web_vitals_"+e.name+"_event"]:i({},e),["$web_vitals_"+e.name+"_value"]:e.value})),{})),this.wt={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Mi=t=>{var e,r=null==(e=this.Mt.sessionManager)?void 0:e.checkAndGetSessionAndWindowId(!0);if(fr(r))zd.error("Could not read session ID. Dropping metrics!");else{this.wt=this.wt||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var n=this.Ni();if(!fr(n))if(br(null==t?void 0:t.name)||br(null==t?void 0:t.value))zd.error("Invalid metric received",t);else if(this.Ri&&t.value>=this.Ri)zd.error("Ignoring metric with value >= "+this.Ri,t);else this.wt.url!==n&&(this.Ai(),this.Ti=setTimeout(this.Ai,this.flushToCaptureTimeoutMs)),fr(this.wt.url)&&(this.wt.url=n),this.wt.firstMetricTimestamp=fr(this.wt.firstMetricTimestamp)?Date.now():this.wt.firstMetricTimestamp,t.attribution&&t.attribution.interactionTargetElement&&(t.attribution.interactionTargetElement=void 0),this.wt.metrics.push(i({},t,{$current_url:n,$session_id:r.sessionId,$window_id:r.windowId,timestamp:Date.now()})),this.wt.metrics.length===this.allowedMetrics.length&&this.Ai()}},this.Bt=()=>{var t,e,i,r,n=Ji.__PosthogExtensions__;fr(n)||fr(n.postHogWebVitalsCallbacks)||({onLCP:t,onCLS:e,onFCP:i,onINP:r}=n.postHogWebVitalsCallbacks),t&&e&&i&&r?(this.allowedMetrics.indexOf("LCP")>-1&&t(this.Mi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&e(this.Mi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.Mi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this.Mi.bind(this)),this.q=!0):zd.error("web vitals callbacks not loaded - not starting")},this.Mt=t,this.xi=!(null==(e=this.Mt.persistence)||!e.props[rn]),this.startIfEnabled()}get allowedMetrics(){var t,e,i=dr(this.Mt.config.capture_performance)?null==(t=this.Mt.config.capture_performance)?void 0:t.web_vitals_allowed_metrics:void 0;return fr(i)?(null==(e=this.Mt.persistence)?void 0:e.props[on])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(dr(this.Mt.config.capture_performance)?this.Mt.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Ri(){var t=dr(this.Mt.config.capture_performance)&&yr(this.Mt.config.capture_performance.__web_vitals_max_value)?this.Mt.config.capture_performance.__web_vitals_max_value:Ud;return 0<t&&t<=6e4?Ud:t}get isEnabled(){var t=null==Gi?void 0:Gi.protocol;if("http:"!==t&&"https:"!==t)return zd.info("Web Vitals are disabled on non-http/https protocols"),!1;var e=dr(this.Mt.config.capture_performance)?this.Mt.config.capture_performance.web_vitals:_r(this.Mt.config.capture_performance)?this.Mt.config.capture_performance:void 0;return _r(e)?e:this.xi}startIfEnabled(){this.isEnabled&&!this.q&&(zd.info("enabled, starting..."),this.Lt(this.Bt))}onRemoteConfig(t){var e=dr(t.capturePerformance)&&!!t.capturePerformance.web_vitals,i=dr(t.capturePerformance)?t.capturePerformance.web_vitals_allowed_metrics:void 0;this.Mt.persistence&&(this.Mt.persistence.register({[rn]:e}),this.Mt.persistence.register({[on]:i})),this.xi=e,this.startIfEnabled()}Lt(t){var e,i;null!=(e=Ji.__PosthogExtensions__)&&e.postHogWebVitalsCallbacks&&t(),null==(i=Ji.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.Mt,"web-vitals",(e=>{e?zd.error("failed to load script",e):t()}))}Ni(){var t=$i?$i.location.href:void 0;return t||zd.error("Could not determine current URL"),t}}var Jd=Ar("[Heatmaps]");function Kd(t){return dr(t)&&"clientX"in t&&"clientY"in t&&yr(t.clientX)&&yr(t.clientY)}class Qd{constructor(t){var e;this.rageclicks=new Gh,this.xi=!1,this.q=!1,this.Ei=null,this.instance=t,this.xi=!(null==(e=this.instance.persistence)||!e.props[tn])}get flushIntervalMilliseconds(){var t=5e3;return dr(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}get isEnabled(){return fr(this.instance.config.capture_heatmaps)?fr(this.instance.config.enable_heatmaps)?this.xi:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this.q)return;Jd.info("starting..."),this.Fi(),this.Ei=setInterval(this.Oi.bind(this),this.flushIntervalMilliseconds)}else{var t,e;clearInterval(null!==(t=this.Ei)&&void 0!==t?t:void 0),null==(e=this.Pi)||e.stop(),this.getAndClearBuffer()}}onRemoteConfig(t){var e=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register({[tn]:e}),this.xi=e,this.startIfEnabled()}getAndClearBuffer(){var t=this.wt;return this.wt=void 0,t}Li(t){this.tt(t.originalEvent,"deadclick")}Fi(){$i&&Yi&&(qr($i,"beforeunload",this.Oi.bind(this)),qr(Yi,"click",(t=>this.tt(t||(null==$i?void 0:$i.event))),{capture:!0}),qr(Yi,"mousemove",(t=>this.Di(t||(null==$i?void 0:$i.event))),{capture:!0}),this.Pi=new Rc(this.instance,Mc,this.Li.bind(this)),this.Pi.startIfEnabled(),this.q=!0)}Bi(t,e){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),n=this.instance.scrollManager.scrollElement(),o=function(t,e,i){for(var r=t;r&&Dn(r)&&!Bn(r,"body");){if(r===i)return!1;if(er(e,null==$i?void 0:$i.getComputedStyle(r).position))return!0;r=zn(r)}return!1}(Gn(t),["fixed","sticky"],n);return{x:t.clientX+(o?0:r),y:t.clientY+(o?0:i),target_fixed:o,type:e}}tt(t,e){var r;if(void 0===e&&(e="click"),!Ln(t.target)&&Kd(t)){var n=this.Bi(t,e);null!=(r=this.rageclicks)&&r.isRageClick(t.clientX,t.clientY,(new Date).getTime())&&this.$i(i({},n,{type:"rageclick"})),this.$i(n)}}Di(t){!Ln(t.target)&&Kd(t)&&(clearTimeout(this.Zi),this.Zi=setTimeout((()=>{this.$i(this.Bi(t,"mousemove"))}),500))}$i(t){if($i){var e=$i.location.href;this.wt=this.wt||{},this.wt[e]||(this.wt[e]=[]),this.wt[e].push(t)}}Oi(){this.wt&&!vr(this.wt)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class tv{constructor(t){this.Mt=t}doPageView(t,e){var i,r=this.qi(t,e);return this.Hi={pathname:null!==(i=null==$i?void 0:$i.location.pathname)&&void 0!==i?i:"",pageViewId:e,timestamp:t},this.Mt.scrollManager.resetContext(),r}doPageLeave(t){var e;return this.qi(t,null==(e=this.Hi)?void 0:e.pageViewId)}doEvent(){var t;return{$pageview_id:null==(t=this.Hi)?void 0:t.pageViewId}}qi(t,e){var i=this.Hi;if(!i)return{$pageview_id:e};var r={$pageview_id:e,$prev_pageview_id:i.pageViewId},n=this.Mt.scrollManager.getContext();if(n&&!this.Mt.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:s,maxScrollY:a,maxContentHeight:l,lastContentY:u,maxContentY:h}=n;if(!(fr(o)||fr(s)||fr(a)||fr(l)||fr(u)||fr(h))){o=Math.ceil(o),s=Math.ceil(s),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),h=Math.ceil(h);var c=o<=1?1:$c(s/o,0,1),d=o<=1?1:$c(a/o,0,1),v=l<=1?1:$c(u/l,0,1),f=l<=1?1:$c(h/l,0,1);r=Rr(r,{$prev_pageview_last_scroll:s,$prev_pageview_last_scroll_percentage:c,$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:d,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:v,$prev_pageview_max_content:h,$prev_pageview_max_content_percentage:f})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(t.getTime()-i.timestamp.getTime())/1e3),r}}class ev{constructor(t){this.Mt=t}sendExceptionEvent(t){this.Mt.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var iv="https?://(.*)",rv=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],nv=Er(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],rv),ov="<masked>";function sv(t,e,i){if(!Yi)return{};var r=e?Er([],rv,i||[]):[];return av(Gr(Yi.URL,r,ov),t)}function av(t,e){var i=nv.concat(e||[]),r={};return Nr(i,(function(e){var i=Yr(t,e);r[e]=i||null})),r}function lv(t){var e=function(t){return t?0===t.search(iv+"google.([^/?]*)")?"google":0===t.search(iv+"bing.com")?"bing":0===t.search(iv+"yahoo.com")?"yahoo":0===t.search(iv+"duckduckgo.com")?"duckduckgo":null:null}(t),i="yahoo"!=e?"q":"p",r={};if(!mr(e)){r.$search_engine=e;var n=Yi?Yr(Yi.referrer,i):"";n.length&&(r.ph_keyword=n)}return r}function uv(){return navigator.language||navigator.userLanguage}function hv(){return(null==Yi?void 0:Yi.referrer)||"$direct"}function cv(t,e){var i=t?Er([],rv,e||[]):[],r=null==Gi?void 0:Gi.href.substring(0,1e3);return{r:hv().substring(0,1e3),u:r?Gr(r,i,ov):void 0}}function dv(t){var e,{r:i,u:r}=t,n={$referrer:i,$referring_domain:null==i?void 0:"$direct"==i?"$direct":null==(e=Vr(i))?void 0:e.host};if(r){n.$current_url=r;var o=Vr(r);n.$host=null==o?void 0:o.host,n.$pathname=null==o?void 0:o.pathname;var s=av(r);Rr(n,s)}if(i){var a=lv(i);Rr(n,a)}return n}function vv(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){return}}function fv(){try{return(new Date).getTimezoneOffset()}catch(t){return}}function pv(t,e){if(!Xi)return{};var i,r=t?Er([],rv,e||[]):[],[n,o]=function(t){for(var e=0;e<Qa.length;e++){var[i,r]=Qa[e],n=i.exec(t),o=n&&(ur(r)?r(n,t):r);if(o)return o}return["",""]}(Xi);return Rr(Lr({$os:n,$os_version:o,$browser:Xa(Xi,navigator.vendor),$device:tl(Xi),$device_type:el(Xi),$timezone:vv(),$timezone_offset:fv()}),{$current_url:Gr(null==Gi?void 0:Gi.href,r,ov),$host:null==Gi?void 0:Gi.host,$pathname:null==Gi?void 0:Gi.pathname,$raw_user_agent:Xi.length>1e3?Xi.substring(0,997)+"...":Xi,$browser_version:Ka(Xi,navigator.vendor),$browser_language:uv(),$browser_language_prefix:(i=uv(),"string"==typeof i?i.split("-")[0]:void 0),$screen_height:null==$i?void 0:$i.screen.height,$screen_width:null==$i?void 0:$i.screen.width,$viewport_height:null==$i?void 0:$i.innerHeight,$viewport_width:null==$i?void 0:$i.innerWidth,$lib:"web",$lib_version:Sr.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var gv,mv=Ar("[FeatureFlags]"),bv="$active_feature_flags",yv="$override_feature_flags",_v="$feature_flag_payloads",wv="$override_feature_flag_payloads",Cv="$feature_flag_request_id",Iv=t=>{var e={};for(var[i,r]of Fr(t||{}))r&&(e[i]=r);return e},Sv=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map((t=>{var i;return[t,null!==(i=e[t].variant)&&void 0!==i?i:e[t].enabled]}))),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter((t=>e[t].enabled)).filter((t=>{var i;return null==(i=e[t].metadata)?void 0:i.payload})).map((t=>{var i;return[t,null==(i=e[t].metadata)?void 0:i.payload]})))):mv.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t};!function(t){t.FeatureFlags="feature_flags",t.Recordings="recordings"}(gv||(gv={}));class kv{constructor(t){this.Vi=!1,this.ji=!1,this.Yi=!1,this.Gi=!1,this.Wi=!1,this.zi=!1,this.Ui=!1,this.Mt=t,this.featureFlagEventHandlers=[]}decide(){if(this.Mt.config.__preview_remote_config)this.zi=!0;else{var t=!this.Xi&&(this.Mt.config.advanced_disable_feature_flags||this.Mt.config.advanced_disable_feature_flags_on_first_load);this.Ji({disableFlags:t})}}get hasLoadedFlags(){return this.ji}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var t=this.Mt.get_property(_n),e=this.Mt.get_property(yv),r=this.Mt.get_property(wv);if(!r&&!e)return t||{};var n=Rr({},t||{}),o=[...new Set([...Object.keys(r||{}),...Object.keys(e||{})])];for(var s of o){var a,l,u=n[s],h=null==e?void 0:e[s],c=fr(h)?null!==(a=null==u?void 0:u.enabled)&&void 0!==a&&a:!!h,d=fr(h)?u.variant:"string"==typeof h?h:void 0,v=null==r?void 0:r[s],f=i({},u,{enabled:c,variant:c?null!=d?d:null==u?void 0:u.variant:void 0});if(c!==(null==u?void 0:u.enabled)&&(f.original_enabled=null==u?void 0:u.enabled),d!==(null==u?void 0:u.variant)&&(f.original_variant=null==u?void 0:u.variant),v)f.metadata=i({},null==u?void 0:u.metadata,{payload:v,original_payload:null==u||null==(l=u.metadata)?void 0:l.payload});n[s]=f}return this.Vi||(mv.warn(" Overriding feature flag details!",{flagDetails:t,overriddenPayloads:r,finalDetails:n}),this.Vi=!0),n}getFlagVariants(){var t=this.Mt.get_property(bn),e=this.Mt.get_property(yv);if(!e)return t||{};for(var i=Rr({},t),r=Object.keys(e),n=0;n<r.length;n++)i[r[n]]=e[r[n]];return this.Vi||(mv.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:e,finalFlags:i}),this.Vi=!0),i}getFlagPayloads(){var t=this.Mt.get_property(_v),e=this.Mt.get_property(wv);if(!e)return t||{};for(var i=Rr({},t||{}),r=Object.keys(e),n=0;n<r.length;n++)i[r[n]]=e[r[n]];return this.Vi||(mv.warn(" Overriding feature flag payloads!",{flagPayloads:t,overriddenPayloads:e,finalPayloads:i}),this.Vi=!0),i}reloadFeatureFlags(){this.Gi||this.Mt.config.advanced_disable_feature_flags||this.Xi||(this.Xi=setTimeout((()=>{this.Ji()}),5))}Ki(){clearTimeout(this.Xi),this.Xi=void 0}ensureFlagsLoaded(){this.ji||this.Yi||this.Xi||this.reloadFeatureFlags()}setAnonymousDistinctId(t){this.$anon_distinct_id=t}setReloadingPaused(t){this.Gi=t}Ji(t){var e;if(this.Ki(),!this.Mt.config.advanced_disable_decide)if(this.Yi)this.Wi=!0;else{var r={token:this.Mt.config.token,distinct_id:this.Mt.get_distinct_id(),groups:this.Mt.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:i({},(null==(e=this.Mt.persistence)?void 0:e.get_initial_props())||{},this.Mt.get_property(wn)||{}),group_properties:this.Mt.get_property(Cn)};(null!=t&&t.disableFlags||this.Mt.config.advanced_disable_feature_flags)&&(r.disable_flags=!0);var n=this.Mt.config.__preview_flags_v2&&this.Mt.config.__preview_remote_config;n&&(r.timezone=vv()),this.Yi=!0,this.Mt.Qi({method:"POST",url:this.Mt.requestRouter.endpointFor("api",n?"/flags/?v=2":"/decide/?v=4"),data:r,compression:this.Mt.config.disable_compression?void 0:Di.Base64,timeout:this.Mt.config.feature_flag_request_timeout_ms,callback:t=>{var e,i,n,o=!0;(200===t.statusCode&&(this.Wi||(this.$anon_distinct_id=void 0),o=!1),this.Yi=!1,this.zi)||(this.zi=!0,this.Mt.tr(null!==(n=t.json)&&void 0!==n?n:{}));r.disable_flags&&!this.Wi||(this.Ui=!o,t.json&&null!=(e=t.json.quotaLimited)&&e.includes(gv.FeatureFlags)?mv.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(this.receivedFeatureFlags(null!==(i=t.json)&&void 0!==i?i:{},o),this.Wi&&(this.Wi=!1,this.Ji())))}})}}getFeatureFlag(t,e){if(void 0===e&&(e={}),this.ji||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[t],r=""+i,n=this.Mt.get_property(Cv)||void 0,o=this.Mt.get_property(kn)||{};if((e.send_event||!("send_event"in e))&&(!(t in o)||!o[t].includes(r))){var s,a,l,u,h,c,d,v,f,p,g;lr(o[t])?o[t].push(r):o[t]=[r],null==(s=this.Mt.persistence)||s.register({[kn]:o});var m=this.getFeatureFlagDetails(t),b={$feature_flag:t,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(t)||null,$feature_flag_request_id:n,$feature_flag_bootstrapped_response:(null==(a=this.Mt.config.bootstrap)||null==(l=a.featureFlags)?void 0:l[t])||null,$feature_flag_bootstrapped_payload:(null==(u=this.Mt.config.bootstrap)||null==(h=u.featureFlagPayloads)?void 0:h[t])||null,$used_bootstrap_value:!this.Ui};fr(null==m||null==(c=m.metadata)?void 0:c.version)||(b.$feature_flag_version=m.metadata.version);var y,_=null!==(d=null==m||null==(v=m.reason)?void 0:v.description)&&void 0!==d?d:null==m||null==(f=m.reason)?void 0:f.code;if(_&&(b.$feature_flag_reason=_),null!=m&&null!=(p=m.metadata)&&p.id&&(b.$feature_flag_id=m.metadata.id),fr(null==m?void 0:m.original_variant)&&fr(null==m?void 0:m.original_enabled)||(b.$feature_flag_original_response=fr(m.original_variant)?m.original_enabled:m.original_variant),null!=m&&null!=(g=m.metadata)&&g.original_payload)b.$feature_flag_original_payload=null==m||null==(y=m.metadata)?void 0:y.original_payload;this.Mt.capture("$feature_flag_called",b)}return i}mv.warn('getFeatureFlag for key "'+t+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(t){return this.getFlagsWithDetails()[t]}getFeatureFlagPayload(t){return this.getFlagPayloads()[t]}getRemoteConfigPayload(t,e){var i=this.Mt.config.token;this.Mt.Qi({method:"POST",url:this.Mt.requestRouter.endpointFor("api","/decide/?v=4"),data:{distinct_id:this.Mt.get_distinct_id(),token:i},compression:this.Mt.config.disable_compression?void 0:Di.Base64,timeout:this.Mt.config.feature_flag_request_timeout_ms,callback:i=>{var r,n=null==(r=i.json)?void 0:r.featureFlagPayloads;e((null==n?void 0:n[t])||void 0)}})}isFeatureEnabled(t,e){if(void 0===e&&(e={}),this.ji||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,e);mv.warn('isFeatureEnabled for key "'+t+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(t){this.featureFlagEventHandlers.push(t)}removeFeatureFlagsHandler(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((e=>e!==t))}receivedFeatureFlags(t,e){if(this.Mt.persistence){this.ji=!0;var r=this.getFlagVariants(),n=this.getFlagPayloads(),o=this.getFlagsWithDetails();!function(t,e,r,n,o){void 0===r&&(r={}),void 0===n&&(n={}),void 0===o&&(o={});var s=Sv(t),a=s.flags,l=s.featureFlags,u=s.featureFlagPayloads;if(l){var h=t.requestId;if(lr(l)){mv.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var c={};if(l)for(var d=0;d<l.length;d++)c[l[d]]=!0;e&&e.register({[bv]:l,[bn]:c})}else{var v=l,f=u,p=a;t.errorsWhileComputingFlags&&(v=i({},r,v),f=i({},n,f),p=i({},o,p)),e&&e.register(i({[bv]:Object.keys(Iv(v)),[bn]:v||{},[_v]:f||{},[_n]:p||{}},h?{[Cv]:h}:{}))}}}(t,this.Mt.persistence,r,n,o),this.er(e)}}override(t,e){void 0===e&&(e=!1),mv.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:t,suppressWarning:e})}overrideFeatureFlags(t){if(!this.Mt.__loaded||!this.Mt.persistence)return mv.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===t)return this.Mt.persistence.unregister(yv),this.Mt.persistence.unregister(wv),void this.er();if(t&&"object"==typeof t&&("flags"in t||"payloads"in t)){var e,i=t;if(this.Vi=Boolean(null!==(e=i.suppressWarning)&&void 0!==e&&e),"flags"in i)if(!1===i.flags)this.Mt.persistence.unregister(yv);else if(i.flags)if(lr(i.flags)){for(var r={},n=0;n<i.flags.length;n++)r[i.flags[n]]=!0;this.Mt.persistence.register({[yv]:r})}else this.Mt.persistence.register({[yv]:i.flags});return"payloads"in i&&(!1===i.payloads?this.Mt.persistence.unregister(wv):i.payloads&&this.Mt.persistence.register({[wv]:i.payloads})),void this.er()}this.er()}onFeatureFlags(t){if(this.addFeatureFlagsHandler(t),this.ji){var{flags:e,flagVariants:i}=this.ir();t(e,i)}return()=>this.removeFeatureFlagsHandler(t)}updateEarlyAccessFeatureEnrollment(t,e){var r,n=(this.Mt.get_property(yn)||[]).find((e=>e.flagKey===t)),o={["$feature_enrollment/"+t]:e},s={$feature_flag:t,$feature_enrollment:e,$set:o};n&&(s.$early_access_feature_name=n.name),this.Mt.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(o,!1);var a=i({},this.getFlagVariants(),{[t]:e});null==(r=this.Mt.persistence)||r.register({[bv]:Object.keys(Iv(a)),[bn]:a}),this.er()}getEarlyAccessFeatures(t,e,i){void 0===e&&(e=!1);var r=this.Mt.get_property(yn),n=i?"&"+i.map((t=>"stage="+t)).join("&"):"";if(r&&!e)return t(r);this.Mt.Qi({url:this.Mt.requestRouter.endpointFor("api","/api/early_access_features/?token="+this.Mt.config.token+n),method:"GET",callback:e=>{var i;if(e.json){var r=e.json.earlyAccessFeatures;return null==(i=this.Mt.persistence)||i.register({[yn]:r}),t(r)}}})}ir(){var t=this.getFlags(),e=this.getFlagVariants();return{flags:t.filter((t=>e[t])),flagVariants:Object.keys(e).filter((t=>e[t])).reduce(((t,i)=>(t[i]=e[i],t)),{})}}er(t){var{flags:e,flagVariants:i}=this.ir();this.featureFlagEventHandlers.forEach((r=>r(e,i,{errorsLoading:t})))}setPersonPropertiesForFlags(t,e){void 0===e&&(e=!0);var r=this.Mt.get_property(wn)||{};this.Mt.register({[wn]:i({},r,t)}),e&&this.Mt.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.Mt.unregister(wn)}setGroupPropertiesForFlags(t,e){void 0===e&&(e=!0);var r=this.Mt.get_property(Cn)||{};0!==Object.keys(r).length&&Object.keys(r).forEach((e=>{r[e]=i({},r[e],t[e]),delete t[e]})),this.Mt.register({[Cn]:i({},r,t)}),e&&this.Mt.reloadFeatureFlags()}resetGroupPropertiesForFlags(t){if(t){var e=this.Mt.get_property(Cn)||{};this.Mt.register({[Cn]:i({},e,{[t]:{}})})}else this.Mt.unregister(Cn)}}var xv=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Av{constructor(t){this.Y=t,this.props={},this.rr=!1,this.nr=(t=>{var e="";return t.token&&(e=t.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),t.persistence_name?"ph_"+t.persistence_name:"ph_"+e+"_posthog"})(t),this.Et=this.sr(t),this.load(),t.debug&&xr.info("Persistence loaded",t.persistence,i({},this.props)),this.update_config(t,t),this.save()}sr(t){-1===xv.indexOf(t.persistence.toLowerCase())&&(xr.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var e=t.persistence.toLowerCase();return"localstorage"===e&&_c.It()?_c:"localstorage+cookie"===e&&Cc.It()?Cc:"sessionstorage"===e&&xc.It()?xc:"memory"===e?Sc:"cookie"===e?bc:Cc.It()?Cc:bc}properties(){var t={};return Nr(this.props,(function(e,i){if(i===bn&&dr(e))for(var r=Object.keys(e),n=0;n<r.length;n++)t["$feature/"+r[n]]=e[r[n]];else s=i,a=!1,(mr(o=Pn)?a:Vi&&o.indexOf===Vi?-1!=o.indexOf(s):(Nr(o,(function(t){if(a||(a=t===s))return Tr})),a))||(t[i]=e);var o,s,a})),t}load(){if(!this.ar){var t=this.Et.xt(this.nr);t&&(this.props=Rr({},t))}}save(){this.ar||this.Et.At(this.nr,this.props,this.lr,this.ur,this.hr,this.Y.debug)}remove(){this.Et.Tt(this.nr,!1),this.Et.Tt(this.nr,!0)}clear(){this.remove(),this.props={}}register_once(t,e,i){if(dr(t)){fr(e)&&(e="None"),this.lr=fr(i)?this.cr:i;var r=!1;if(Nr(t,((t,i)=>{this.props.hasOwnProperty(i)&&this.props[i]!==e||(this.props[i]=t,r=!0)})),r)return this.save(),!0}return!1}register(t,e){if(dr(t)){this.lr=fr(e)?this.cr:e;var i=!1;if(Nr(t,((e,r)=>{t.hasOwnProperty(r)&&this.props[r]!==e&&(this.props[r]=e,i=!0)})),i)return this.save(),!0}return!1}unregister(t){t in this.props&&(delete this.props[t],this.save())}update_campaign_params(){if(!this.rr){var t=sv(this.Y.custom_campaign_params,this.Y.mask_personal_data_properties,this.Y.custom_personal_data_properties);vr(Lr(t))||this.register(t),this.rr=!0}}update_search_keyword(){var t;this.register((t=null==Yi?void 0:Yi.referrer)?lv(t):{})}update_referrer_info(){var t;this.register_once({$referrer:hv(),$referring_domain:null!=Yi&&Yi.referrer&&(null==(t=Vr(Yi.referrer))?void 0:t.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Mn]||this.props[Nn]||this.register_once({[Rn]:cv(this.Y.mask_personal_data_properties,this.Y.custom_personal_data_properties)},void 0)}get_initial_props(){var t={};Nr([Nn,Mn],(e=>{var i=this.props[e];i&&Nr(i,(function(e,i){t["$initial_"+rr(i)]=e}))}));var e,i,r=this.props[Rn];if(r){var n=(e=dv(r),i={},Nr(e,(function(t,e){i["$initial_"+rr(e)]=t})),i);Rr(t,n)}return t}safe_merge(t){return Nr(this.props,(function(e,i){i in t||(t[i]=e)})),t}update_config(t,e){if(this.cr=this.lr=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==e.persistence){var i=this.sr(t),r=this.props;this.clear(),this.Et=i,this.props=r,this.save()}}set_disabled(t){this.ar=t,this.ar?this.remove():this.save()}set_cross_subdomain(t){t!==this.ur&&(this.ur=t,this.remove(),this.save())}set_secure(t){t!==this.hr&&(this.hr=t,this.remove(),this.save())}set_event_timer(t,e){var i=this.props[Kr]||{};i[t]=e,this.props[Kr]=i,this.save()}remove_event_timer(t){var e=(this.props[Kr]||{})[t];return fr(e)||(delete this.props[Kr][t],this.save()),e}get_property(t){return this.props[t]}set_property(t,e){this.props[t]=e,this.save()}}class Tv{constructor(){this.dr={},this.dr={}}on(t,e){return this.dr[t]||(this.dr[t]=[]),this.dr[t].push(e),()=>{this.dr[t]=this.dr[t].filter((t=>t!==e))}}emit(t,e){for(var i of this.dr[t]||[])i(e);for(var r of this.dr["*"]||[])r(t,e)}}class Mv{constructor(t){this.vr=new Tv,this.pr=(t,e)=>this.gr(t,e)&&this.mr(t,e)&&this.br(t,e),this.gr=(t,e)=>null==e||!e.event||(null==t?void 0:t.event)===(null==e?void 0:e.event),this.Mt=t,this.yr=new Set,this._r=new Set}init(){var t;if(!fr(null==(t=this.Mt)?void 0:t.wr)){var e;null==(e=this.Mt)||e.wr(((t,e)=>{this.on(t,e)}))}}register(t){var e,i;if(!fr(null==(e=this.Mt)?void 0:e.wr)&&(t.forEach((t=>{var e,i;null==(e=this._r)||e.add(t),null==(i=t.steps)||i.forEach((t=>{var e;null==(e=this.yr)||e.add((null==t?void 0:t.event)||"")}))})),null!=(i=this.Mt)&&i.autocapture)){var r,n=new Set;t.forEach((t=>{var e;null==(e=t.steps)||e.forEach((t=>{null!=t&&t.selector&&n.add(null==t?void 0:t.selector)}))})),null==(r=this.Mt)||r.autocapture.setElementSelectors(n)}}on(t,e){var i;null!=e&&0!=t.length&&(this.yr.has(t)||this.yr.has(null==e?void 0:e.event))&&this._r&&(null==(i=this._r)?void 0:i.size)>0&&this._r.forEach((t=>{this.Cr(e,t)&&this.vr.emit("actionCaptured",t.name)}))}Ir(t){this.onAction("actionCaptured",(e=>t(e)))}Cr(t,e){if(null==(null==e?void 0:e.steps))return!1;for(var i of e.steps)if(this.pr(t,i))return!0;return!1}onAction(t,e){return this.vr.on(t,e)}mr(t,e){if(null!=e&&e.url){var i,r=null==t||null==(i=t.properties)?void 0:i.$current_url;if(!r||"string"!=typeof r)return!1;if(!Mv.Sr(r,null==e?void 0:e.url,(null==e?void 0:e.url_matching)||"contains"))return!1}return!0}static Sr(t,e,i){switch(i){case"regex":return!!$i&&na(t,e);case"exact":return e===t;case"contains":var r=Mv.kr(e).replace(/_/g,".").replace(/%/g,".*");return na(t,r);default:return!1}}static kr(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}br(t,e){if((null!=e&&e.href||null!=e&&e.tag_name||null!=e&&e.text)&&!this.Ar(t).some((t=>!(null!=e&&e.href&&!Mv.Sr(t.href||"",null==e?void 0:e.href,(null==e?void 0:e.href_matching)||"exact"))&&((null==e||!e.tag_name||t.tag_name===(null==e?void 0:e.tag_name))&&!(null!=e&&e.text&&!Mv.Sr(t.text||"",null==e?void 0:e.text,(null==e?void 0:e.text_matching)||"exact")&&!Mv.Sr(t.$el_text||"",null==e?void 0:e.text,(null==e?void 0:e.text_matching)||"exact"))))))return!1;if(null!=e&&e.selector){var i,r=null==t||null==(i=t.properties)?void 0:i.$element_selectors;if(!r)return!1;if(!r.includes(null==e?void 0:e.selector))return!1}return!0}Ar(t){return null==(null==t?void 0:t.properties.$elements)?[]:null==t?void 0:t.properties.$elements}}class Nv{constructor(t){this.Mt=t,this.Tr=new Map,this.Mr=new Map}register(t){var e;fr(null==(e=this.Mt)?void 0:e.wr)||(this.Nr(t),this.Rr(t))}Rr(t){var e=t.filter((t=>{var e,i,r,n;return(null==(e=t.conditions)?void 0:e.actions)&&(null==(i=t.conditions)||null==(r=i.actions)||null==(n=r.values)?void 0:n.length)>0}));if(0!==e.length){if(null==this.Er){this.Er=new Mv(this.Mt),this.Er.init();this.Er.Ir((t=>{this.onAction(t)}))}e.forEach((t=>{var e,i,r,n,o,s,a,l,u,h;t.conditions&&null!=(e=t.conditions)&&e.actions&&null!=(i=t.conditions)&&null!=(r=i.actions)&&r.values&&(null==(n=t.conditions)||null==(o=n.actions)||null==(s=o.values)?void 0:s.length)>0&&(null==(a=this.Er)||a.register(t.conditions.actions.values),null==(l=t.conditions)||null==(u=l.actions)||null==(h=u.values)||h.forEach((e=>{if(e&&e.name){var i=this.Mr.get(e.name);i&&i.push(t.id),this.Mr.set(e.name,i||[t.id])}})))}))}}Nr(t){var e;if(0!==t.filter((t=>{var e,i,r,n;return(null==(e=t.conditions)?void 0:e.events)&&(null==(i=t.conditions)||null==(r=i.events)||null==(n=r.values)?void 0:n.length)>0})).length){null==(e=this.Mt)||e.wr(((t,e)=>{this.onEvent(t,e)})),t.forEach((t=>{var e,i,r;null==(e=t.conditions)||null==(i=e.events)||null==(r=i.values)||r.forEach((e=>{if(e&&e.name){var i=this.Tr.get(e.name);i&&i.push(t.id),this.Tr.set(e.name,i||[t.id])}}))}))}}onEvent(t,e){var i,r,n=(null==(i=this.Mt)||null==(r=i.persistence)?void 0:r.props[Sn])||[];if("survey shown"===t&&e&&n.length>0){var o;Js.info("survey event matched, removing survey from activated surveys",{event:t,eventPayload:e,existingActivatedSurveys:n});var s=null==e||null==(o=e.properties)?void 0:o.$survey_id;if(s){var a=n.indexOf(s);a>=0&&(n.splice(a,1),this.Fr(n))}}else this.Tr.has(t)&&(Js.info("survey event matched, updating activated surveys",{event:t,surveys:this.Tr.get(t)}),this.Fr(n.concat(this.Tr.get(t)||[])))}onAction(t){var e,i,r=(null==(e=this.Mt)||null==(i=e.persistence)?void 0:i.props[Sn])||[];this.Mr.has(t)&&this.Fr(r.concat(this.Mr.get(t)||[]))}Fr(t){var e,i;null==(e=this.Mt)||null==(i=e.persistence)||i.register({[Sn]:[...new Set(t)]})}getSurveys(){var t,e,i=null==(t=this.Mt)||null==(e=t.persistence)?void 0:e.props[Sn];return i||[]}getEventToSurveys(){return this.Tr}Or(){return this.Er}}class Rv{constructor(t){this.Pr=null,this.Lr=!1,this.Dr=!1,this.Br=[],this.Mt=t,this.Z=null}onRemoteConfig(t){var e=t.surveys;if(br(e))return Js.warn("Decide not loaded yet. Not loading surveys.");var i=lr(e);this.$r=i?e.length>0:e,Js.info("decide response received, hasSurveys: "+this.$r),this.$r&&this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var t=[],e=0;e<localStorage.length;e++){var i=localStorage.key(e);null!=i&&i.startsWith(ea)&&t.push(i)}t.forEach((t=>localStorage.removeItem(t)))}loadIfEnabled(){if(!this.Pr)if(this.Dr)Js.info("Already initializing surveys, skipping...");else if(this.Mt.config.disable_surveys)Js.info("Disabled. Not loading surveys.");else if(this.$r){var t=null==Ji?void 0:Ji.__PosthogExtensions__;if(t){this.Dr=!0;try{var e=t.generateSurveys;if(e)return void this.Zr(e);var i=t.loadExternalDependency;if(!i)return void this.qr("PostHog loadExternalDependency extension not found.");i(this.Mt,"surveys",(e=>{e||!t.generateSurveys?this.qr("Could not load surveys script",e):this.Zr(t.generateSurveys)}))}catch(t){throw this.qr("Error initializing surveys",t),t}finally{this.Dr=!1}}else Js.error("PostHog Extensions not found.")}else Js.info("No surveys to load.")}Zr(t){this.Pr=t(this.Mt),this.Z=new Nv(this.Mt),Js.info("Surveys loaded successfully"),this.Hr({isLoaded:!0})}qr(t,e){Js.error(t,e),this.Hr({isLoaded:!1,error:t})}onSurveysLoaded(t){return this.Br.push(t),this.Pr&&this.Hr({isLoaded:!0}),()=>{this.Br=this.Br.filter((e=>e!==t))}}getSurveys(t,e){if(void 0===e&&(e=!1),this.Mt.config.disable_surveys)return Js.info("Disabled. Not loading surveys."),t([]);var i=this.Mt.get_property(In);if(i&&!e)return t(i,{isLoaded:!0});if(this.Lr)return t([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Lr=!0,this.Mt.Qi({url:this.Mt.requestRouter.endpointFor("api","/api/surveys/?token="+this.Mt.config.token),method:"GET",timeout:this.Mt.config.surveys_request_timeout_ms,callback:e=>{var i;this.Lr=!1;var r=e.statusCode;if(200!==r||!e.json){var n="Surveys API could not be loaded, status: "+r;return Js.error(n),t([],{isLoaded:!1,error:n})}var o,s=e.json.surveys||[],a=s.filter((t=>Ks(t)&&(Qs(t)||ta(t))));a.length>0&&(null==(o=this.Z)||o.register(a));return null==(i=this.Mt.persistence)||i.register({[In]:s}),t(s,{isLoaded:!0})}})}catch(t){throw this.Lr=!1,t}}Hr(t){for(var e of this.Br)try{t.isLoaded?this.getSurveys(e):e([],t)}catch(t){Js.error("Error in survey callback",t)}}getActiveMatchingSurveys(t,e){if(void 0===e&&(e=!1),!br(this.Pr))return this.Pr.getActiveMatchingSurveys(t,e);Js.warn("init was not called")}Vr(t){var e=null;return this.getSurveys((i=>{var r;e=null!==(r=i.find((e=>e.id===t)))&&void 0!==r?r:null})),e}jr(t){if(br(this.Pr))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var e="string"==typeof t?this.Vr(t):t;return e?this.Pr.checkSurveyEligibility(e):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(t){if(!br(this.Pr))return Js.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var e=this.jr(t);return{visible:e.eligible,disabledReason:e.reason}}canRenderSurveyAsync(t,e){return br(this.Pr)?(Js.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((i=>{this.getSurveys((e=>{var r,n=null!==(r=e.find((e=>e.id===t)))&&void 0!==r?r:null;if(n){var o=this.jr(n);i({visible:o.eligible,disabledReason:o.reason})}else i({visible:!1,disabledReason:"Survey not found"})}),e)}))}renderSurvey(t,e){if(br(this.Pr))Js.warn("init was not called");else{var i=this.Vr(t),r=null==Yi?void 0:Yi.querySelector(e);i?r?this.Pr.renderSurvey(i,r):Js.warn("Survey element not found"):Js.warn("Survey not found")}}}var Ev=Ar("[RateLimiter]");class Fv{constructor(t){var e,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=t=>{var e=t.text;if(e&&e.length)try{(JSON.parse(e).quota_limited||[]).forEach((t=>{Ev.info((t||"events")+" is quota limited."),this.serverLimits[t]=(new Date).getTime()+6e4}))}catch(t){return void Ev.warn('could not rate limit - continuing. Error: "'+(null==t?void 0:t.message)+'"',{text:e})}},this.instance=t,this.captureEventsPerSecond=(null==(e=t.config.rate_limiting)?void 0:e.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(i=t.config.rate_limiting)?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(t){var e,i,r;void 0===t&&(t=!1);var n=(new Date).getTime(),o=null!==(e=null==(i=this.instance.persistence)?void 0:i.get_property(Tn))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:n};o.tokens+=(n-o.last)/1e3*this.captureEventsPerSecond,o.last=n,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var s=o.tokens<1;return s||t||(o.tokens=Math.max(0,o.tokens-1)),!s||this.lastEventRateLimited||t||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=s,null==(r=this.instance.persistence)||r.set_property(Tn,o),{isRateLimited:s,remainingTokens:o.tokens}}isServerRateLimited(t){var e=this.serverLimits[t||"events"]||!1;return!1!==e&&(new Date).getTime()<e}}var Ov=Ar("[RemoteConfig]");class Pv{constructor(t){this.Mt=t}get remoteConfig(){var t,e;return null==(t=Ji._POSTHOG_REMOTE_CONFIG)||null==(e=t[this.Mt.config.token])?void 0:e.config}Yr(t){var e,i;null!=(e=Ji.__PosthogExtensions__)&&e.loadExternalDependency?null==(i=Ji.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.Mt,"remote-config",(()=>t(this.remoteConfig))):(Ov.error("PostHog Extensions not found. Cannot load remote config."),t())}Gr(t){this.Mt.Qi({method:"GET",url:this.Mt.requestRouter.endpointFor("assets","/array/"+this.Mt.config.token+"/config"),callback:e=>{t(e.json)}})}load(){try{if(this.remoteConfig)return Ov.info("Using preloaded remote config",this.remoteConfig),void this.tr(this.remoteConfig);if(this.Mt.config.advanced_disable_decide)return void Ov.warn("Remote config is disabled. Falling back to local config.");this.Yr((t=>{if(!t)return Ov.info("No config found after loading remote JS config. Falling back to JSON."),void this.Gr((t=>{this.tr(t)}));this.tr(t)}))}catch(t){Ov.error("Error loading remote config",t)}}tr(t){t?this.Mt.config.__preview_remote_config?(this.Mt.tr(t),!1!==t.hasFeatureFlags&&this.Mt.featureFlags.ensureFlagsLoaded()):Ov.info("__preview_remote_config is disabled. Logging config instead",t):Ov.error("Failed to fetch remote config from PostHog.")}}var Lv=function(t){var e,i,r,n,o="";for(e=i=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,n=0;n<r;n++){var s=t.charCodeAt(n),a=null;s<128?i++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),mr(a)||(i>e&&(o+=t.substring(e,i)),o+=a,e=i=n+1)}return i>e&&(o+=t.substring(e,t.length)),o},Dv=!!zi||!!Wi,Bv="text/plain",$v=(t,e)=>{var[r,n]=t.split("?"),o=i({},e);null==n||n.split("&").forEach((t=>{var[e]=t.split("=");delete o[e]}));var s=jr(o);return r+"?"+(s=s?(n?n+"&":"")+s:n)},Zv=(t,e)=>JSON.stringify(t,((t,e)=>"bigint"==typeof e?e.toString():e),e),qv=t=>{var{data:e,compression:i}=t;if(e){if(i===Di.GZipJS){var r=Id(Sd(Zv(e)),{mtime:0}),n=new Blob([r],{type:Bv});return{contentType:Bv,body:n,estimatedSize:n.size}}if(i===Di.Base64){var o=function(t){var e,i,r,n,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,u="",h=[];if(!t)return t;t=Lv(t);do{e=(o=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,i=o>>12&63,r=o>>6&63,n=63&o,h[l++]=s.charAt(e)+s.charAt(i)+s.charAt(r)+s.charAt(n)}while(a<t.length);switch(u=h.join(""),t.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}(Zv(e)),s=(t=>"data="+encodeURIComponent("string"==typeof t?t:Zv(t)))(o);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var a=Zv(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Hv=[];Wi&&Hv.push({transport:"fetch",method:t=>{var e,r,{contentType:n,body:o,estimatedSize:s}=null!==(e=qv(t))&&void 0!==e?e:{},a=new Headers;Nr(t.headers,(function(t,e){a.append(e,t)})),n&&a.append("Content-Type",n);var l=t.url,u=null;if(Ui){var h=new Ui;u={signal:h.signal,timeout:setTimeout((()=>h.abort()),t.timeout)}}Wi(l,i({method:(null==t?void 0:t.method)||"GET",headers:a,keepalive:"POST"===t.method&&(s||0)<52428.8,body:o,signal:null==(r=u)?void 0:r.signal},t.fetchOptions)).then((e=>e.text().then((i=>{var r={statusCode:e.status,text:i};if(200===e.status)try{r.json=JSON.parse(i)}catch(t){xr.error(t)}null==t.callback||t.callback(r)})))).catch((e=>{xr.error(e),null==t.callback||t.callback({statusCode:0,text:e})})).finally((()=>u?clearTimeout(u.timeout):null))}}),zi&&Hv.push({transport:"XHR",method:t=>{var e,i=new zi;i.open(t.method||"GET",t.url,!0);var{contentType:r,body:n}=null!==(e=qv(t))&&void 0!==e?e:{};Nr(t.headers,(function(t,e){i.setRequestHeader(e,t)})),r&&i.setRequestHeader("Content-Type",r),t.timeout&&(i.timeout=t.timeout),i.withCredentials=!0,i.onreadystatechange=()=>{if(4===i.readyState){var e={statusCode:i.status,text:i.responseText};if(200===i.status)try{e.json=JSON.parse(i.responseText)}catch(t){}null==t.callback||t.callback(e)}},i.send(n)}}),null!=ji&&ji.sendBeacon&&Hv.push({transport:"sendBeacon",method:t=>{var e=$v(t.url,{beacon:"1"});try{var i,{contentType:r,body:n}=null!==(i=qv(t))&&void 0!==i?i:{},o="string"==typeof n?new Blob([n],{type:r}):n;ji.sendBeacon(e,o)}catch(t){}}});var Vv=3e3;class jv{constructor(t,e){this.Wr=!0,this.zr=[],this.Ur=$c((null==e?void 0:e.flush_interval_ms)||Vv,250,5e3,"flush interval",Vv),this.Xr=t}enqueue(t){this.zr.push(t),this.Jr||this.Kr()}unload(){this.Qr();var t=this.zr.length>0?this.tn():{},e=Object.values(t),r=[...e.filter((t=>0===t.url.indexOf("/e"))),...e.filter((t=>0!==t.url.indexOf("/e")))];r.map((t=>{this.Xr(i({},t,{transport:"sendBeacon"}))}))}enable(){this.Wr=!1,this.Kr()}Kr(){var t=this;this.Wr||(this.Jr=setTimeout((()=>{if(this.Qr(),this.zr.length>0){var e=this.tn(),i=function(i){var r=e[i],n=(new Date).getTime();r.data&&lr(r.data)&&Nr(r.data,(t=>{t.offset=Math.abs(t.timestamp-n),delete t.timestamp})),t.Xr(r)};for(var r in e)i(r)}}),this.Ur))}Qr(){clearTimeout(this.Jr),this.Jr=void 0}tn(){var t={};return Nr(this.zr,(e=>{var r,n=e,o=(n?n.batchKey:null)||n.url;fr(t[o])&&(t[o]=i({},n,{data:[]})),null==(r=t[o].data)||r.push(n.data)})),this.zr=[],t}}var Yv=["retriesPerformedSoFar"];class Gv{constructor(t){this.en=!1,this.rn=3e3,this.zr=[],this.Mt=t,this.zr=[],this.nn=!0,!fr($i)&&"onLine"in $i.navigator&&(this.nn=$i.navigator.onLine,qr($i,"online",(()=>{this.nn=!0,this.Oi()})),qr($i,"offline",(()=>{this.nn=!1})))}get length(){return this.zr.length}retriableRequest(t){var{retriesPerformedSoFar:e}=t,n=r(t,Yv);yr(e)&&e>0&&(n.url=$v(n.url,{retry_count:e})),this.Mt.Qi(i({},n,{callback:t=>{200!==t.statusCode&&(t.statusCode<400||t.statusCode>=500)&&(null!=e?e:0)<10?this.sn(i({retriesPerformedSoFar:e},n)):null==n.callback||n.callback(t)}}))}sn(t){var e=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=e+1;var i=function(t){var e=3e3*Math.pow(2,t),i=e/2,r=Math.min(18e5,e),n=(Math.random()-.5)*(r-i);return Math.ceil(r+n)}(e),r=Date.now()+i;this.zr.push({retryAt:r,requestOptions:t});var n="Enqueued failed request for retry in "+i;navigator.onLine||(n+=" (Browser is offline)"),xr.warn(n),this.en||(this.en=!0,this.an())}an(){this.ln&&clearTimeout(this.ln),this.ln=setTimeout((()=>{this.nn&&this.zr.length>0&&this.Oi(),this.an()}),this.rn)}Oi(){var t=Date.now(),e=[],i=this.zr.filter((i=>i.retryAt<t||(e.push(i),!1)));if(this.zr=e,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:t}of(this.ln&&(clearTimeout(this.ln),this.ln=void 0),this.zr))try{this.Mt.Qi(i({},t,{transport:"sendBeacon"}))}catch(t){xr.error(t)}this.zr=[]}}class Wv{constructor(t){this.un=()=>{var t,e,i,r;this.hn||(this.hn={});var n=this.scrollElement(),o=this.scrollY(),s=n?Math.max(0,n.scrollHeight-n.clientHeight):0,a=o+((null==n?void 0:n.clientHeight)||0),l=(null==n?void 0:n.scrollHeight)||0;this.hn.lastScrollY=Math.ceil(o),this.hn.maxScrollY=Math.max(o,null!==(t=this.hn.maxScrollY)&&void 0!==t?t:0),this.hn.maxScrollHeight=Math.max(s,null!==(e=this.hn.maxScrollHeight)&&void 0!==e?e:0),this.hn.lastContentY=a,this.hn.maxContentY=Math.max(a,null!==(i=this.hn.maxContentY)&&void 0!==i?i:0),this.hn.maxContentHeight=Math.max(l,null!==(r=this.hn.maxContentHeight)&&void 0!==r?r:0)},this.Mt=t}getContext(){return this.hn}resetContext(){var t=this.hn;return setTimeout(this.un,0),t}startMeasuringScrollPosition(){qr($i,"scroll",this.un,{capture:!0}),qr($i,"scrollend",this.un,{capture:!0}),qr($i,"resize",this.un)}scrollElement(){if(!this.Mt.config.scroll_root_selector)return null==$i?void 0:$i.document.documentElement;var t=lr(this.Mt.config.scroll_root_selector)?this.Mt.config.scroll_root_selector:[this.Mt.config.scroll_root_selector];for(var e of t){var i=null==$i?void 0:$i.document.querySelector(e);if(i)return i}}scrollY(){if(this.Mt.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return $i&&($i.scrollY||$i.pageYOffset||$i.document.documentElement.scrollTop)||0}scrollX(){if(this.Mt.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return $i&&($i.scrollX||$i.pageXOffset||$i.document.documentElement.scrollLeft)||0}}var zv=t=>cv(null==t?void 0:t.config.mask_personal_data_properties,null==t?void 0:t.config.custom_personal_data_properties);class Uv{constructor(t,e,i,r){this.cn=t=>{var e=this.dn();if(!e||e.sessionId!==t){var i={sessionId:t,props:this.vn(this.Mt)};this.fn.register({[An]:i})}},this.Mt=t,this.pn=e,this.fn=i,this.vn=r||zv,this.pn.onSessionId(this.cn)}dn(){return this.fn.props[An]}getSetOnceProps(){var t,e=null==(t=this.dn())?void 0:t.props;return e?"r"in e?dv(e):{$referring_domain:e.referringDomain,$pathname:e.initialPathName,utm_source:e.utm_source,utm_campaign:e.utm_campaign,utm_medium:e.utm_medium,utm_content:e.utm_content,utm_term:e.utm_term}:{}}getSessionProps(){var t={};return Nr(Lr(this.getSetOnceProps()),((e,i)=>{"$current_url"===i&&(i="url"),t["$session_entry_"+rr(i)]=e})),t}}var Xv=Ar("[SessionId]");class Jv{constructor(t,e,i){var r;if(this.gn=[],!t.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(t.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.Y=t.config,this.fn=t.persistence,this.He=void 0,this.Ce=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.mn=e||cc,this.bn=i||cc;var n=this.Y.persistence_name||this.Y.token,o=this.Y.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*$c(o,60,36e3,"session_idle_timeout_seconds",1800),t.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.yn(),this._n="ph_"+n+"_window_id",this.wn="ph_"+n+"_primary_window_exists",this.Cn()){var s=xc.xt(this._n),a=xc.xt(this.wn);s&&!a?this.He=s:xc.Tt(this._n),xc.At(this.wn,!0)}if(null!=(r=this.Y.bootstrap)&&r.sessionID)try{var l=(t=>{var e=t.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})(this.Y.bootstrap.sessionID);this.In(this.Y.bootstrap.sessionID,(new Date).getTime(),l)}catch(t){Xv.error("Invalid sessionID in bootstrap",t)}this.Sn()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(t){return fr(this.gn)&&(this.gn=[]),this.gn.push(t),this.Ce&&t(this.Ce,this.He),()=>{this.gn=this.gn.filter((e=>e!==t))}}Cn(){return"memory"!==this.Y.persistence&&!this.fn.ar&&xc.It()}kn(t){t!==this.He&&(this.He=t,this.Cn()&&xc.At(this._n,t))}xn(){return this.He?this.He:this.Cn()?xc.xt(this._n):null}In(t,e,i){t===this.Ce&&e===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=e,this.Ce=t,this.fn.register({[fn]:[e,t,i]}))}An(){if(this.Ce&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ce,this._sessionStartTimestamp];var t=this.fn.props[fn];return lr(t)&&2===t.length&&t.push(t[0]),t||[0,null,0]}resetSessionId(){this.In(null,null,null)}Sn(){qr($i,"beforeunload",(()=>{this.Cn()&&xc.Tt(this.wn)}),{capture:!1})}checkAndGetSessionAndWindowId(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=null),this.Y.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=e||(new Date).getTime(),[r,n,o]=this.An(),s=this.xn(),a=yr(o)&&o>0&&Math.abs(i-o)>864e5,l=!1,u=!n,h=!t&&Math.abs(i-r)>this.sessionTimeoutMs;u||h||a?(n=this.mn(),s=this.bn(),Xv.info("new session ID generated",{sessionId:n,windowId:s,changeReason:{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:a}}),o=i,l=!0):s||(s=this.bn(),l=!0);var c=0===r||!t||a?i:r,d=0===o?(new Date).getTime():o;return this.kn(s),this.In(n,c,d),t||this.yn(),l&&this.gn.forEach((t=>t(n,s,l?{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:a}:void 0))),{sessionId:n,windowId:s,sessionStartTimestamp:d,changeReason:l?{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:r}}yn(){clearTimeout(this.Tn),this.Tn=setTimeout((()=>{this.resetSessionId()}),1.1*this.sessionTimeoutMs)}}var Kv=["$set_once","$set"],Qv=Ar("[SiteApps]");class tf{constructor(t){this.Mt=t,this.Mn=[],this.apps={}}get isEnabled(){return!!this.Mt.config.opt_in_site_apps}Nn(t,e){if(e){var i=this.globalsForEvent(e);this.Mn.push(i),this.Mn.length>1e3&&(this.Mn=this.Mn.slice(10))}}get siteAppLoaders(){var t,e;return null==(t=Ji._POSTHOG_REMOTE_CONFIG)||null==(e=t[this.Mt.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var t=this.Mt.wr(this.Nn.bind(this));this.Rn=()=>{t(),this.Mn=[],this.Rn=void 0}}}globalsForEvent(t){var e,n,o,s,a,l,u;if(!t)throw new Error("Event payload is required");var h={},c=this.Mt.get_property("$groups")||[],d=this.Mt.get_property("$stored_group_properties")||{};for(var[v,f]of Object.entries(d))h[v]={id:c[v],type:v,properties:f};var{$set_once:p,$set:g}=t;return{event:i({},r(t,Kv),{properties:i({},t.properties,g?{$set:i({},null!==(e=null==(n=t.properties)?void 0:n.$set)&&void 0!==e?e:{},g)}:{},p?{$set_once:i({},null!==(o=null==(s=t.properties)?void 0:s.$set_once)&&void 0!==o?o:{},p)}:{}),elements_chain:null!==(a=null==(l=t.properties)?void 0:l.$elements_chain)&&void 0!==a?a:"",distinct_id:null==(u=t.properties)?void 0:u.distinct_id}),person:{properties:this.Mt.get_property("$stored_person_properties")},groups:h}}setupSiteApp(t){var e=this.apps[t.id],i=()=>{var i;(!e.errored&&this.Mn.length&&(Qv.info("Processing "+this.Mn.length+" events for site app with id "+t.id),this.Mn.forEach((t=>null==e.processEvent?void 0:e.processEvent(t))),e.processedBuffer=!0),Object.values(this.apps).every((t=>t.processedBuffer||t.errored)))&&(null==(i=this.Rn)||i.call(this))},r=!1,n=n=>{e.errored=!n,e.loaded=!0,Qv.info("Site app with id "+t.id+" "+(n?"loaded":"errored")),r&&i()};try{var{processEvent:o}=t.init({posthog:this.Mt,callback:t=>{n(t)}});o&&(e.processEvent=o),r=!0}catch(e){Qv.error("Error while initializing PostHog app with config id "+t.id,e),n(!1)}if(r&&e.loaded)try{i()}catch(i){Qv.error("Error while processing buffered events PostHog app with config id "+t.id,i),e.errored=!0}}En(){var t=this.siteAppLoaders||[];for(var e of t)this.apps[e.id]={id:e.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of t)this.setupSiteApp(i)}Fn(t){if(0!==Object.keys(this.apps).length){var e=this.globalsForEvent(t);for(var i of Object.values(this.apps))try{null==i.processEvent||i.processEvent(e)}catch(e){Qv.error("Error while processing event "+t.event+" for site app "+i.id,e)}}}onRemoteConfig(t){var e,i,r,n=this;if(null!=(e=this.siteAppLoaders)&&e.length)return this.isEnabled?(this.En(),void this.Mt.on("eventCaptured",(t=>this.Fn(t)))):void Qv.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(i=this.Rn)||i.call(this),null!=(r=t.siteApps)&&r.length)if(this.isEnabled){var o=function(t,e){var i;Ji["__$$ph_site_app_"+t]=n.Mt,null==(i=Ji.__PosthogExtensions__)||null==i.loadSiteApp||i.loadSiteApp(n.Mt,e,(e=>{if(e)return Qv.error("Error while initializing PostHog app with config id "+t,e)}))};for(var{id:s,url:a}of t.siteApps)o(s,a)}else Qv.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var ef,rf=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","bytespider"],nf=function(t,e){if(!t)return!1;var i=t.toLowerCase();return rf.concat(e||[]).some((t=>{var e=t.toLowerCase();return-1!==i.indexOf(e)}))},of=function(t,e){if(!t)return!1;var i=t.userAgent;if(i&&nf(i,e))return!0;try{var r=null==t?void 0:t.userAgentData;if(null!=r&&r.brands&&r.brands.some((t=>nf(null==t?void 0:t.brand,e))))return!0}catch(t){}return!!t.webdriver};function sf(t,e,i){return Zv({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:i})}!function(t){t.US="us",t.EU="eu",t.CUSTOM="custom"}(ef||(ef={}));var af="i.posthog.com";class lf{constructor(t){this.On={},this.instance=t}get apiHost(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===t?"https://us.i.posthog.com":t}get uiHost(){var t,e=null==(t=this.instance.config.ui_host)?void 0:t.replace(/\/$/,"");return e||(e=this.apiHost.replace("."+af,".posthog.com")),"https://app.posthog.com"===e?"https://us.posthog.com":e}get region(){return this.On[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.On[this.apiHost]=ef.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.On[this.apiHost]=ef.EU:this.On[this.apiHost]=ef.CUSTOM),this.On[this.apiHost]}endpointFor(t,e){if(void 0===e&&(e=""),e&&(e="/"===e[0]?e:"/"+e),"ui"===t)return this.uiHost+e;if(this.region===ef.CUSTOM)return this.apiHost+e;var i=af+e;switch(t){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var uf={icontains:(t,e)=>!!$i&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!$i&&-1===e.href.toLowerCase().indexOf(t.toLowerCase()),regex:(t,e)=>!!$i&&na(e.href,t),not_regex:(t,e)=>!!$i&&!na(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class hf{constructor(t){var e=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(t){void 0===t&&(t=!1),e.getWebExperiments((t=>{hf.Pn("retrieved web experiments from the server"),e.Ln=new Map,t.forEach((t=>{if(t.feature_flag_key){var i;if(e.Ln)hf.Pn("setting flag key ",t.feature_flag_key," to web experiment ",t),null==(i=e.Ln)||i.set(t.feature_flag_key,t);var r=e.Mt.getFeatureFlag(t.feature_flag_key);pr(r)&&t.variants[r]&&e.Dn(t.name,r,t.variants[r].transforms)}else if(t.variants)for(var n in t.variants){var o=t.variants[n];hf.Bn(o)&&e.Dn(t.name,n,o.transforms)}}))}),t)},this.Mt=t,this.Mt.onFeatureFlags((t=>{this.onFeatureFlags(t)}))}onFeatureFlags(t){if(this._is_bot())hf.Pn("Refusing to render web experiment since the viewer is a likely bot");else if(!this.Mt.config.disable_web_experiments){if(br(this.Ln))return this.Ln=new Map,this.loadIfEnabled(),void this.previewWebExperiment();hf.Pn("applying feature flags",t),t.forEach((t=>{var e;if(this.Ln&&null!=(e=this.Ln)&&e.has(t)){var i,r=this.Mt.getFeatureFlag(t),n=null==(i=this.Ln)?void 0:i.get(t);r&&null!=n&&n.variants[r]&&this.Dn(n.name,r,n.variants[r].transforms)}}))}}previewWebExperiment(){var t=hf.getWindowLocation();if(null!=t&&t.search){var e=Yr(null==t?void 0:t.search,"__experiment_id"),i=Yr(null==t?void 0:t.search,"__experiment_variant");e&&i&&(hf.Pn("previewing web experiments "+e+" && "+i),this.getWebExperiments((t=>{this.$n(parseInt(e),i,t)}),!1,!0))}}loadIfEnabled(){this.Mt.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(t,e,i){if(this.Mt.config.disable_web_experiments&&!i)return t([]);var r=this.Mt.get_property("$web_experiments");if(r&&!e)return t(r);this.Mt.Qi({url:this.Mt.requestRouter.endpointFor("api","/api/web_experiments/?token="+this.Mt.config.token),method:"GET",callback:e=>{if(200!==e.statusCode||!e.json)return t([]);var i=e.json.experiments||[];return t(i)}})}$n(t,e,i){var r=i.filter((e=>e.id===t));r&&r.length>0&&(hf.Pn("Previewing web experiment ["+r[0].name+"] with variant ["+e+"]"),this.Dn(r[0].name,e,r[0].variants[e].transforms))}static Bn(t){return!br(t.conditions)&&(hf.Zn(t)&&hf.qn(t))}static Zn(t){var e;if(br(t.conditions)||br(null==(e=t.conditions)?void 0:e.url))return!0;var i,r,n,o=hf.getWindowLocation();return!!o&&(null==(i=t.conditions)||!i.url||uf[null!==(r=null==(n=t.conditions)?void 0:n.urlMatchType)&&void 0!==r?r:"icontains"](t.conditions.url,o))}static getWindowLocation(){return null==$i?void 0:$i.location}static qn(t){var e;if(br(t.conditions)||br(null==(e=t.conditions)?void 0:e.utm))return!0;var i=sv();if(i.utm_source){var r,n,o,s,a,l,u,h,c,d,v,f,p,g,m,b,y=null==(r=t.conditions)||null==(n=r.utm)||!n.utm_campaign||(null==(o=t.conditions)||null==(s=o.utm)?void 0:s.utm_campaign)==i.utm_campaign,_=null==(a=t.conditions)||null==(l=a.utm)||!l.utm_source||(null==(u=t.conditions)||null==(h=u.utm)?void 0:h.utm_source)==i.utm_source,w=null==(c=t.conditions)||null==(d=c.utm)||!d.utm_medium||(null==(v=t.conditions)||null==(f=v.utm)?void 0:f.utm_medium)==i.utm_medium,C=null==(p=t.conditions)||null==(g=p.utm)||!g.utm_term||(null==(m=t.conditions)||null==(b=m.utm)?void 0:b.utm_term)==i.utm_term;return y&&w&&C&&_}return!1}static Pn(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];xr.info("[WebExperiments] "+t,i)}Dn(t,e,i){this._is_bot()?hf.Pn("Refusing to render web experiment since the viewer is a likely bot"):"control"!==e?i.forEach((i=>{if(i.selector){var r;hf.Pn("applying transform of variant "+e+" for experiment "+t+" ",i);var n=null==(r=document)?void 0:r.querySelectorAll(i.selector);null==n||n.forEach((t=>{var e=t;i.html&&(e.innerHTML=i.html),i.css&&e.setAttribute("style",i.css)}))}})):hf.Pn("Control variants leave the page unmodified.")}_is_bot(){return ji&&this.Mt?of(ji,this.Mt.config.custom_blocked_useragents):void 0}}var cf={},df=()=>{},vf="posthog",ff=!Dv&&-1===(null==Xi?void 0:Xi.indexOf("MSIE"))&&-1===(null==Xi?void 0:Xi.indexOf("Mozilla")),pf=()=>{var t;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:$r(null==Yi?void 0:Yi.location),persistence:"localStorage+cookie",persistence_name:"",loaded:df,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Gi&&pr(null==Gi?void 0:Gi.search)&&-1!==Gi.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==$i||null==(t=$i.location)?void 0:t.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var e="Bad HTTP status: "+t.statusCode+" "+t.text;xr.error(e)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Vv},_onCapture:df}},gf=t=>{var e={};fr(t.process_person)||(e.person_profiles=t.process_person),fr(t.xhr_headers)||(e.request_headers=t.xhr_headers),fr(t.cookie_name)||(e.persistence_name=t.cookie_name),fr(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),fr(t.store_google)||(e.save_campaign_params=t.store_google),fr(t.verbose)||(e.debug=t.verbose);var i=Rr({},e,t);return lr(t.property_blacklist)&&(fr(t.property_denylist)?i.property_denylist=t.property_blacklist:lr(t.property_denylist)?i.property_denylist=[...t.property_blacklist,...t.property_denylist]:xr.error("Invalid value for property_denylist config: "+t.property_denylist)),i};class mf{constructor(){this.__forceAllowLocalhost=!1}get Hn(){return this.__forceAllowLocalhost}set Hn(t){xr.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}class bf{get decideEndpointWasHit(){var t,e;return null!==(t=null==(e=this.featureFlags)?void 0:e.hasLoadedFlags)&&void 0!==t&&t}constructor(){this.webPerformance=new mf,this.Vn=!1,this.version=Sr.LIB_VERSION,this.jn=new Tv,this.config=pf(),this.SentryIntegration=Zd,this.sentryIntegration=t=>function(t,e){var i=$d(t,e);return{name:Bd,processEvent:t=>i(t)}}(this,t),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Yn=!1,this.Gn=null,this.Wn=null,this.featureFlags=new kv(this),this.toolbar=new Yd(this),this.scrollManager=new Wv(this),this.pageViewManager=new tv(this),this.surveys=new Rv(this),this.experiments=new hf(this),this.exceptions=new ev(this),this.rateLimiter=new Fv(this),this.requestRouter=new lf(this),this.consent=new Ac(this),this.people={set:(t,e,i)=>{var r=pr(t)?{[t]:e}:t;this.setPersonProperties(r),null==i||i({})},set_once:(t,e,i)=>{var r=pr(t)?{[t]:e}:t;this.setPersonProperties(void 0,r),null==i||i({})}},this.on("eventCaptured",(t=>xr.info('send "'+(null==t?void 0:t.event)+'"',t)))}init(t,e,i){if(i&&i!==vf){var r,n=null!==(r=cf[i])&&void 0!==r?r:new bf;return n._init(t,e,i),cf[i]=n,cf[vf][i]=n,n}return this._init(t,e,i)}_init(t,e,r){var n,o;if(void 0===e&&(e={}),fr(t)||gr(t))return xr.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return xr.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.zn=[],e.person_profiles&&(this.Gn=e.person_profiles),this.set_config(Rr({},pf(),gf(e),{name:r,token:t})),this.config.on_xhr_error&&xr.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=e.disable_compression?void 0:Di.GZipJS,this.persistence=new Av(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Av(i({},this.config,{persistence:"sessionStorage"}));var s=i({},this.persistence.props),a=i({},this.sessionPersistence.props);if(this.Un=new jv((t=>this.Xn(t)),this.config.request_queue_config),this.Jn=new Gv(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new Jv(this),this.sessionPropsManager=new Uv(this,this.sessionManager,this.persistence)),new Wd(this).startIfEnabledOrStop(),this.siteApps=new tf(this),null==(n=this.siteApps)||n.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Pd(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new Kh(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Qd(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new Xd(this),this.exceptionObserver=new Fc(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new Rc(this,Nc),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new Oc(this),this.historyAutocapture.startIfEnabled(),Sr.DEBUG=Sr.DEBUG||this.config.debug,Sr.DEBUG&&xr.info("Starting in debug mode",{this:this,config:e,thisC:i({},this.config),p:s,s:a}),this.Kn(),void 0!==(null==(o=e.bootstrap)?void 0:o.distinctID)){var l,u,h=this.config.get_device_id(cc()),c=null!=(l=e.bootstrap)&&l.isIdentifiedID?h:e.bootstrap.distinctID;this.persistence.set_property(xn,null!=(u=e.bootstrap)&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:e.bootstrap.distinctID,$device_id:c})}if(this.Qn()){var d,v,f=Object.keys((null==(d=e.bootstrap)?void 0:d.featureFlags)||{}).filter((t=>{var i,r;return!(null==(i=e.bootstrap)||null==(r=i.featureFlags)||!r[t])})).reduce(((t,i)=>{var r,n;return t[i]=(null==(r=e.bootstrap)||null==(n=r.featureFlags)?void 0:n[i])||!1,t}),{}),p=Object.keys((null==(v=e.bootstrap)?void 0:v.featureFlagPayloads)||{}).filter((t=>f[t])).reduce(((t,i)=>{var r,n,o,s;null!=(r=e.bootstrap)&&null!=(n=r.featureFlagPayloads)&&n[i]&&(t[i]=null==(o=e.bootstrap)||null==(s=o.featureFlagPayloads)?void 0:s[i]);return t}),{});this.featureFlags.receivedFeatureFlags({featureFlags:f,featureFlagPayloads:p})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:On,$device_id:null},"");else if(!this.get_distinct_id()){var g=this.config.get_device_id(cc());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(xn,"anonymous")}return qr($i,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),e.segment?Dd(this,(()=>this.eo())):this.eo(),ur(this.config._onCapture)&&this.config._onCapture!==df&&(xr.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(t=>this.config._onCapture(t.event,t)))),this}tr(t){var e,i,r,n,o,s,a,l;if(!Yi||!Yi.body)return xr.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.tr(t)}),500);this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=er(t.supportedCompression,Di.GZipJS)?Di.GZipJS:er(t.supportedCompression,Di.Base64)?Di.Base64:void 0),null!=(e=t.analytics)&&e.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),this.set_config({person_profiles:this.Gn?this.Gn:"identified_only"}),null==(i=this.siteApps)||i.onRemoteConfig(t),null==(r=this.sessionRecording)||r.onRemoteConfig(t),null==(n=this.autocapture)||n.onRemoteConfig(t),null==(o=this.heatmaps)||o.onRemoteConfig(t),this.surveys.onRemoteConfig(t),null==(s=this.webVitalsAutocapture)||s.onRemoteConfig(t),null==(a=this.exceptionObserver)||a.onRemoteConfig(t),null==(l=this.deadClicksAutocapture)||l.onRemoteConfig(t)}eo(){try{this.config.loaded(this)}catch(t){xr.critical("`loaded` function failed",t)}this.io(),this.config.capture_pageview&&setTimeout((()=>{this.consent.isOptedIn()&&this.ro()}),1),new Pv(this).load(),this.featureFlags.decide()}io(){var t;this.has_opted_out_capturing()||this.config.request_batching&&(null==(t=this.Un)||t.enable())}_dom_loaded(){this.has_opted_out_capturing()||Mr(this.__request_queue,(t=>this.Xn(t))),this.__request_queue=[],this.io()}_handle_unload(){var t,e;this.config.request_batching?(this.no()&&this.capture("$pageleave"),null==(t=this.Un)||t.unload(),null==(e=this.Jn)||e.unload()):this.no()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Qi(t){this.__loaded&&(ff?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=$v(t.url,{ip:this.config.ip?1:0}),t.headers=i({},this.config.request_headers),t.compression="best-available"===t.compression?this.compression:t.compression,t.fetchOptions=t.fetchOptions||this.config.fetch_options,(t=>{var e,r,n,o=i({},t);o.timeout=o.timeout||6e4,o.url=$v(o.url,{_:(new Date).getTime().toString(),ver:Sr.LIB_VERSION,compression:o.compression});var s=null!==(e=o.transport)&&void 0!==e?e:"fetch",a=null!==(r=null==(n=Zr(Hv,(t=>t.transport===s)))?void 0:n.method)&&void 0!==r?r:Hv[0].method;if(!a)throw new Error("No available transport method");a(o)})(i({},t,{callback:e=>{var i,r;(this.rateLimiter.checkForLimiting(e),e.statusCode>=400)&&(null==(i=(r=this.config).on_request_error)||i.call(r,e));null==t.callback||t.callback(e)}}))))}Xn(t){this.Jn?this.Jn.retriableRequest(t):this.Qi(t)}_execute_array(t){var e,i=[],r=[],n=[];Mr(t,(t=>{t&&(e=t[0],lr(e)?n.push(t):ur(t)?t.call(this):lr(t)&&"alias"===e?i.push(t):lr(t)&&-1!==e.indexOf("capture")&&ur(this[e])?n.push(t):r.push(t))}));var o=function(t,e){Mr(t,(function(t){if(lr(t[0])){var i=e;Nr(t,(function(t){i=i[t[0]].apply(i,t.slice(1))}))}else this[t[0]].apply(this,t.slice(1))}),e)};o(i,this),o(r,this),o(n,this)}Qn(){var t,e;return(null==(t=this.config.bootstrap)?void 0:t.featureFlags)&&Object.keys(null==(e=this.config.bootstrap)?void 0:e.featureFlags).length>0||!1}push(t){this._execute_array([t])}capture(t,e,r){var n;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Un){if(!this.consent.isOptedOut())if(!fr(t)&&pr(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=null!=r&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==o||!o.isRateLimited){null!=e&&e.$current_url&&!pr(null==e?void 0:e.$current_url)&&(xr.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==e||delete e.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=(null==r?void 0:r.timestamp)||s,l=cc(),u={uuid:l,event:t,properties:this.bi(t,e||{},a,l)};o&&(u.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),(null==r?void 0:r.$set)&&(u.$set=null==r?void 0:r.$set);var h=this.oo(null==r?void 0:r.$set_once);h&&(u.$set_once=h),(u=Dr(u,null!=r&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,fr(null==r?void 0:r.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=s);var c=i({},u.properties.$set,u.$set);if(vr(c)||this.setPersonPropertiesForFlags(c),!br(this.config.before_send)){var d=this.so(u);if(!d)return;u=d}this.jn.emit("eventCaptured",u);var v={method:"POST",url:null!==(n=null==r?void 0:r._url)&&void 0!==n?n:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:null==r?void 0:r._batchKey};return!this.config.request_batching||r&&(null==r||!r._batchKey)||null!=r&&r.send_instantly?this.Xn(v):this.Un.enqueue(v),u}xr.critical("This capture call is ignored due to client rate limiting.")}}else xr.error("No event name provided to posthog.capture")}else xr.uninitializedWarning("posthog.capture")}wr(t){return this.on("eventCaptured",(e=>t(e.event,e)))}bi(t,e,r,n){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return e;var o=this.persistence.remove_event_timer(t),s=i({},e);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),"$snapshot"===t){var a=i({},this.persistence.properties(),this.sessionPersistence.properties());return s.distinct_id=a.distinct_id,(!pr(s.distinct_id)&&!yr(s.distinct_id)||gr(s.distinct_id))&&xr.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var l,u=pv(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:h,windowId:c}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=h,s.$window_id=c}this.sessionPropsManager&&Rr(s,this.sessionPropsManager.getSessionProps());try{var d;this.sessionRecording&&Rr(s,this.sessionRecording.sdkDebugProperties),s.$sdk_debug_retry_queue_size=null==(d=this.Jn)?void 0:d.length}catch(t){s.$sdk_debug_error_capturing_properties=String(t)}if(this.requestRouter.region===ef.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),l="$pageview"===t?this.pageViewManager.doPageView(r,n):"$pageleave"===t?this.pageViewManager.doPageLeave(r):this.pageViewManager.doEvent(),s=Rr(s,l),"$pageview"===t&&Yi&&(s.title=Yi.title),!fr(o)){var v=r.getTime()-o;s.$duration=parseFloat((v/1e3).toFixed(3))}Xi&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Rr({},u,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),lr(this.config.property_denylist)?Nr(this.config.property_denylist,(function(t){delete s[t]})):xr.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(xr.error("sanitize_properties is deprecated. Use before_send instead"),s=f(s,t));var p=this.ao();return s.$process_person_profile=p,p&&this.lo("_calculate_event_properties"),s}oo(t){var e;if(!this.persistence||!this.ao())return t;if(this.Vn)return t;var i=this.persistence.get_initial_props(),r=null==(e=this.sessionPropsManager)?void 0:e.getSetOnceProps(),n=Rr({},i,r||{},t||{}),o=this.config.sanitize_properties;return o&&(xr.error("sanitize_properties is deprecated. Use before_send instead"),n=o(n,"$set_once")),this.Vn=!0,vr(n)?void 0:n}register(t,e){var i;null==(i=this.persistence)||i.register(t,e)}register_once(t,e,i){var r;null==(r=this.persistence)||r.register_once(t,e,i)}register_for_session(t){var e;null==(e=this.sessionPersistence)||e.register(t)}unregister(t){var e;null==(e=this.persistence)||e.unregister(t)}unregister_for_session(t){var e;null==(e=this.sessionPersistence)||e.unregister(t)}uo(t,e){this.register({[t]:e})}getFeatureFlag(t,e){return this.featureFlags.getFeatureFlag(t,e)}getFeatureFlagPayload(t){var e=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(e)}catch(t){return e}}isFeatureEnabled(t,e){return this.featureFlags.isFeatureEnabled(t,e)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(t,e){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,e)}getEarlyAccessFeatures(t,e,i){return void 0===e&&(e=!1),this.featureFlags.getEarlyAccessFeatures(t,e,i)}on(t,e){return this.jn.on(t,e)}onFeatureFlags(t){return this.featureFlags.onFeatureFlags(t)}onSurveysLoaded(t){return this.surveys.onSurveysLoaded(t)}onSessionId(t){var e,i;return null!==(e=null==(i=this.sessionManager)?void 0:i.onSessionId(t))&&void 0!==e?e:()=>{}}getSurveys(t,e){void 0===e&&(e=!1),this.surveys.getSurveys(t,e)}getActiveMatchingSurveys(t,e){void 0===e&&(e=!1),this.surveys.getActiveMatchingSurveys(t,e)}renderSurvey(t,e){this.surveys.renderSurvey(t,e)}canRenderSurvey(t){return this.surveys.canRenderSurvey(t)}canRenderSurveyAsync(t,e){return void 0===e&&(e=!1),this.surveys.canRenderSurveyAsync(t,e)}identify(t,e,r){if(!this.__loaded||!this.persistence)return xr.uninitializedWarning("posthog.identify");if(yr(t)&&(t=t.toString(),xr.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))xr.critical('The string "'+t+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(this.lo("posthog.identify")){var n=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var o=n;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}t!==n&&t!==this.get_property(Jr)&&(this.unregister(Jr),this.register({distinct_id:t}));var s="anonymous"===(this.persistence.get_property(xn)||"anonymous");t!==n&&s?(this.persistence.set_property(xn,"identified"),this.setPersonPropertiesForFlags(i({},r||{},e||{}),!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:n},{$set:e||{},$set_once:r||{}}),this.Wn=sf(t,e,r),this.featureFlags.setAnonymousDistinctId(n)):(e||r)&&this.setPersonProperties(e,r),t!==n&&(this.reloadFeatureFlags(),this.unregister(kn))}}else xr.error("Unique user id has not been set in posthog.identify")}setPersonProperties(t,e){if((t||e)&&this.lo("posthog.setPersonProperties")){var r=sf(this.get_distinct_id(),t,e);this.Wn!==r?(this.setPersonPropertiesForFlags(i({},e||{},t||{})),this.capture("$set",{$set:t||{},$set_once:e||{}}),this.Wn=r):xr.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(t,e,r){if(t&&e){if(this.lo("posthog.group")){var n=this.getGroups();n[t]!==e&&this.resetGroupPropertiesForFlags(t),this.register({$groups:i({},n,{[t]:e})}),r&&(this.capture("$groupidentify",{$group_type:t,$group_key:e,$group_set:r}),this.setGroupPropertiesForFlags({[t]:r})),n[t]===e||r||this.reloadFeatureFlags()}}else xr.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(t,e){void 0===e&&(e=!0),this.featureFlags.setPersonPropertiesForFlags(t,e)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(t,e){void 0===e&&(e=!0),this.lo("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,e)}resetGroupPropertiesForFlags(t){this.featureFlags.resetGroupPropertiesForFlags(t)}reset(t){var e,i,r,n;if(xr.info("reset"),!this.__loaded)return xr.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),null==(e=this.persistence)||e.clear(),null==(i=this.sessionPersistence)||i.clear(),this.surveys.reset(),null==(r=this.persistence)||r.set_property(xn,"anonymous"),null==(n=this.sessionManager)||n.resetSessionId(),this.Wn=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:On,$device_id:null},"");else{var s=this.config.get_device_id(cc());this.register_once({distinct_id:s,$device_id:t?s:o},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var t,e;return null!==(t=null==(e=this.sessionManager)?void 0:e.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==t?t:""}get_session_replay_url(t){if(!this.sessionManager)return"";var{sessionId:e,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+e);if(null!=t&&t.withTimestamp&&i){var n,o=null!==(n=t.timestampLookBack)&&void 0!==n?n:10;if(!i)return r;r+="?t="+Math.max(Math.floor(((new Date).getTime()-i)/1e3)-o,0)}return r}alias(t,e){return t===this.get_property(Xr)?(xr.critical("Attempting to create alias for existing People user - aborting."),-2):this.lo("posthog.alias")?(fr(e)&&(e=this.get_distinct_id()),t!==e?(this.uo(Jr,t),this.capture("$create_alias",{alias:t,distinct_id:e})):(xr.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}set_config(t){var e,r,n,o,s=i({},this.config);dr(t)&&(Rr(this.config,gf(t)),null==(e=this.persistence)||e.update_config(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Av(i({},this.config,{persistence:"sessionStorage"})),_c.It()&&"true"===_c.kt("ph_debug")&&(this.config.debug=!0),this.config.debug&&(Sr.DEBUG=!0,xr.info("set_config",JSON.stringify({config:t,oldConfig:s,newConfig:i({},this.config)},null,2))),null==(r=this.sessionRecording)||r.startIfEnabledOrStop(),null==(n=this.autocapture)||n.startIfEnabled(),null==(o=this.heatmaps)||o.startIfEnabled(),this.surveys.loadIfEnabled(),this.Kn())}startSessionRecording(t){var e=!0===t,i={sampling:e||!(null==t||!t.sampling),linked_flag:e||!(null==t||!t.linked_flag),url_trigger:e||!(null==t||!t.url_trigger),event_trigger:e||!(null==t||!t.event_trigger)};if(Object.values(i).some(Boolean)){var r,n,o,s,a;if(null==(r=this.sessionManager)||r.checkAndGetSessionAndWindowId(),i.sampling)null==(n=this.sessionRecording)||n.overrideSampling();if(i.linked_flag)null==(o=this.sessionRecording)||o.overrideLinkedFlag();if(i.url_trigger)null==(s=this.sessionRecording)||s.overrideTrigger("url");if(i.event_trigger)null==(a=this.sessionRecording)||a.overrideTrigger("event")}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var t;return!(null==(t=this.sessionRecording)||!t.started)}captureException(t,e){var r=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(i({},qu((t=>t instanceof Error)(t)?{error:t,event:t.message}:{event:t},{syntheticException:r}),e))}loadToolbar(t){return this.toolbar.loadToolbar(t)}get_property(t){var e;return null==(e=this.persistence)?void 0:e.props[t]}getSessionProperty(t){var e;return null==(e=this.sessionPersistence)?void 0:e.props[t]}toString(){var t,e=null!==(t=this.config.name)&&void 0!==t?t:vf;return e!==vf&&(e=vf+"."+e),e}_isIdentified(){var t,e;return"identified"===(null==(t=this.persistence)?void 0:t.get_property(xn))||"identified"===(null==(e=this.sessionPersistence)?void 0:e.get_property(xn))}ao(){var t,e,i,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&vr(this.getGroups())&&(null==(t=this.persistence)||null==(e=t.props)||!e[Jr])&&(null==(i=this.persistence)||null==(r=i.props)||!r[En]))}no(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.ao()||this.lo("posthog.createPersonProfile")&&this.setPersonProperties({},{})}lo(t){return"never"===this.config.person_profiles?(xr.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.uo(En,!0),!0)}Kn(){var t,e,i,r,n=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,s=this.config.disable_persistence||n&&!!o;(null==(t=this.persistence)?void 0:t.ar)!==s&&(null==(i=this.persistence)||i.set_disabled(s));(null==(e=this.sessionPersistence)?void 0:e.ar)!==s&&(null==(r=this.sessionPersistence)||r.set_disabled(s))}opt_in_capturing(t){var e;(this.consent.optInOut(!0),this.Kn(),fr(null==t?void 0:t.captureEventName)||null!=t&&t.captureEventName)&&this.capture(null!==(e=null==t?void 0:t.captureEventName)&&void 0!==e?e:"$opt_in",null==t?void 0:t.captureProperties,{send_instantly:!0});this.config.capture_pageview&&this.ro()}opt_out_capturing(){this.consent.optInOut(!1),this.Kn()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Kn()}_is_bot(){return ji?of(ji,this.config.custom_blocked_useragents):void 0}ro(){Yi&&!this.Yn&&(this.Yn=!0,this.capture("$pageview",{title:Yi.title},{send_instantly:!0}))}debug(t){!1===t?(null==$i||$i.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==$i||$i.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}so(t){if(br(this.config.before_send))return t;var e=lr(this.config.before_send)?this.config.before_send:[this.config.before_send],i=t;for(var r of e){if(i=r(i),br(i)){var n="Event '"+t.event+"' was rejected in beforeSend function";return Ir(t.event)?xr.warn(n+". This can cause unexpected behavior."):xr.info(n),null}i.properties&&!vr(i.properties)||xr.warn("Event '"+t.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var t;return null==(t=this.pageViewManager.Hi)?void 0:t.pageViewId}captureTraceFeedback(t,e){this.capture("$ai_feedback",{$ai_trace_id:String(t),$ai_feedback_text:e})}captureTraceMetric(t,e,i){this.capture("$ai_metric",{$ai_trace_id:String(t),$ai_metric_name:e,$ai_metric_value:String(i)})}}!function(t,e){for(var i=0;i<e.length;i++)t.prototype[e[i]]=Pr(t.prototype[e[i]])}(bf,["identify"]);var yf,_f=(yf=cf[vf]=new bf,function(){function t(){t.done||(t.done=!0,ff=!1,Nr(cf,(function(t){t._dom_loaded()})))}null!=Yi&&Yi.addEventListener?"complete"===Yi.readyState?t():qr(Yi,"DOMContentLoaded",t,{capture:!1}):$i&&xr.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),yf);export{Ki as COPY_AUTOCAPTURE_EVENT,Di as Compression,bf as PostHog,$o as SurveyPosition,Ho as SurveyQuestionBranchingType,qo as SurveyQuestionType,Vo as SurveySchedule,Zo as SurveyType,Bo as SurveyWidgetType,_f as default,Qi as knownUnsafeEditableEvent,_f as posthog,tr as severityLevels};
//# sourceMappingURL=module.full.js.map
