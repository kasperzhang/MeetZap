"use strict";(self["webpackChunkschej"]=self["webpackChunkschej"]||[]).push([[521],{3521:function(t,e,i){i.r(e),i.d(e,{default:function(){return kt}});var s=i(3740),a=i(3698),n=i(2938),l=i(3180),o=i(1289),r=i(6930),c=i(1034),d=function(){var t=this,e=t._self._c;return t.event?e("div",{staticClass:"tw-mt-8 tw-h-full"},[e("MarkAvailabilityDialog",{attrs:{initialState:t.linkApple?"create_account_apple":"choices"},on:{signInLinkApple:t.signInLinkApple,allowGoogleCalendar:()=>t.setAvailabilityAutomatically(t.calendarTypes.GOOGLE),allowOutlookCalendar:()=>t.setAvailabilityAutomatically(t.calendarTypes.OUTLOOK),setAvailabilityManually:t.setAvailabilityManually,addedAppleCalendar:t.addedAppleCalendar},model:{value:t.choiceDialog,callback:function(e){t.choiceDialog=e},expression:"choiceDialog"}}),e("SignInNotSupportedDialog",{model:{value:t.webviewDialog,callback:function(e){t.webviewDialog=e},expression:"webviewDialog"}}),e("GuestDialog",{attrs:{event:t.event,respondents:Object.keys(t.event.responses)},on:{submit:t.handleGuestDialogSubmit},model:{value:t.guestDialog,callback:function(e){t.guestDialog=e},expression:"guestDialog"}}),t.currSignUpBlock?e("SignUpForSlotDialog",{attrs:{signUpBlock:t.currSignUpBlock,event:t.event},on:{submit:t.signUpForBlock},model:{value:t.signUpForSlotDialog,callback:function(e){t.signUpForSlotDialog=e},expression:"signUpForSlotDialog"}}):t._e(),e("NewDialog",{attrs:{type:t.eventType,event:t.event,contactsPayload:t.contactsPayload,edit:"","no-tabs":""},model:{value:t.editEventDialog,callback:function(e){t.editEventDialog=e},expression:"editEventDialog"}}),t.isGroup?e("InvitationDialog",{attrs:{group:t.event,calendarPermissionGranted:t.calendarPermissionGranted},on:{refreshEvent:t.refreshEvent,setAvailabilityAutomatically:t.setAvailabilityAutomatically},model:{value:t.invitationDialog,callback:function(e){t.invitationDialog=e},expression:"invitationDialog"}}):t._e(),e(o.A,{attrs:{"max-width":"400","content-class":"tw-m-0"},model:{value:t.pagesNotVisitedDialog,callback:function(e){t.pagesNotVisitedDialog=e},expression:"pagesNotVisitedDialog"}},[e(a.A,[e(n.ri,[t._v("请确认操作")]),e(n.OQ,[e("span",{staticClass:"tw-font-medium"},[t._v("您即将提交您的可用时间，但尚未填写所有页面。")]),t._v(" 请点击顶部的左右箭头切换页面。")]),e(n.SL,[e(c.A),e(s.A,{attrs:{text:""},on:{click:function(e){t.pagesNotVisitedDialog=!1}}},[t._v("取消")]),e(s.A,{attrs:{text:"",color:"primary"},on:{click:()=>{t.saveChanges(!0),this.pagesNotVisitedDialog=!1}}},[t._v("提交")])],1)],1)],1),e("div",{staticClass:"tw-mx-auto tw-mt-4 tw-max-w-5xl"},[t.isSettingSpecificTimes?t._e():e("div",{staticClass:"tw-mx-4"},[e("div",{staticClass:"tw-flex tw-items-center tw-text-black"},[e("div",[e("div",{staticClass:"sm:mb-2 tw-flex tw-flex-wrap tw-items-center tw-gap-x-4 tw-gap-y-2"},[e("div",{staticClass:"tw-text-xl sm:tw-text-3xl"},[t._v(t._s(t.event.name))]),t.event.when2meetHref?.length>0?e(l.A,{staticClass:"tw-cursor-pointer tw-select-none tw-rounded tw-bg-light-gray tw-px-2 tw-font-medium sm:tw-px-3",attrs:{href:`https://when2meet.com${t.event.when2meetHref}`,small:t.isPhone}},[t._v("来自when2meet的导入")]):t._e(),t.isGroup?[e("div",{},[e(l.A,{staticClass:"tw-cursor-pointer tw-select-none tw-rounded tw-bg-light-gray tw-px-2 tw-font-medium sm:tw-px-3",attrs:{small:t.isPhone},on:{click:function(e){t.helpDialog=!0}}},[t._v("可用性分组")])],1),e("HelpDialog",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v("可用性分组")]},proxy:!0}],null,!1,629676448),model:{value:t.helpDialog,callback:function(e){t.helpDialog=e},expression:"helpDialog"}},[e("div",{staticClass:"mb-4"},[t._v(" 使用可用性分组可查看组员每周的Google日历空闲时间。您的实际日历事件对他人不可见。 ")])])]:t._e()],2),e("div",{staticClass:"tw-flex tw-items-baseline tw-gap-1"},[e("div",{staticClass:"tw-text-sm tw-font-normal tw-text-very-dark-gray sm:tw-text-base"},[t._v(" "+t._s(t.dateString)+" ")]),t.canEdit?[e(s.A,{staticClass:"tw-px-2 tw-text-sm tw-text-green",attrs:{id:"edit-event-btn",text:""},on:{click:t.editEvent}},[t._v(" 编辑"+t._s(t.isGroup?"分组":"活动")+" ")])]:t._e()],2)]),e(c.A),e("div",{staticClass:"tw-flex tw-flex-row tw-items-center tw-gap-2.5"},[t.isGroup?e("div",[(t.event.startOnMonday?1!=t.weekOffset:0!=t.weekOffset)?e(s.A,{staticClass:"tw-mr-1 tw-text-very-dark-gray sm:tw-mr-2.5",attrs:{icon:t.isPhone,text:""},on:{click:t.resetWeekOffset}},[e(r.A,{staticClass:"sm:tw-mr-2"},[t._v("mdi-calendar-today")]),t.isPhone?t._e():e("span",[t._v("今天")])],1):t._e(),e(s.A,{staticClass:"tw-text-green",attrs:{icon:t.isPhone,outlined:!t.isPhone,loading:t.loading},on:{click:t.refreshCalendar}},[t.isPhone?t._e():e(r.A,{staticClass:"tw-mr-1"},[t._v("mdi-refresh")]),t.isPhone?e(r.A,{staticClass:"tw-text-green"},[t._v("mdi-refresh")]):e("span",{staticClass:"tw-mr-2"},[t._v("刷新")])],1)],1):e("div",[e(s.A,{staticClass:"tw-text-green",attrs:{icon:t.isPhone,outlined:!t.isPhone},on:{click:t.copyLink}},[t.isPhone?t._e():e("span",{staticClass:"tw-mr-2 tw-text-green"},[t._v("复制链接")]),t.isPhone?e(r.A,{staticClass:"tw-text-green"},[t._v("mdi-share")]):e(r.A,{staticClass:"tw-text-green"},[t._v("mdi-content-copy")])],1)],1),t.isPhone||t.isSignUp&&!t.canEdit?t._e():e("div",{staticClass:"tw-flex tw-w-40"},[t.isEditing?[e(s.A,{staticClass:"tw-mr-1 tw-w-20 tw-text-red",attrs:{outlined:""},on:{click:t.cancelEditing}},[t._v(" 取消 ")]),e(s.A,{staticClass:"tw-w-20 tw-text-white",class:"tw-bg-green",on:{click:()=>t.saveChanges()}},[t._v(" 保存 ")])]:[t.isGroup||t.authUser||!t.selectedGuestRespondent?e(s.A,{staticClass:"tw-text-white tw-transition-opacity",class:"tw-bg-green",style:{opacity:t.availabilityBtnOpacity},attrs:{width:"10.25rem",disabled:t.loading&&!t.userHasResponded},on:{click:()=>t.addAvailability()}},[t._v(" "+t._s(t.actionButtonText)+" ")]):e(s.A,{staticClass:"tw-bg-green tw-text-white tw-transition-opacity",style:{opacity:t.availabilityBtnOpacity},attrs:{"min-width":"10.25rem"},on:{click:t.editGuestAvailability}},[t._v(" "+t._s(t.event.blindAvailabilityEnabled?"编辑可用时间":`编辑${t.selectedGuestRespondent}的可用时间`)+" ")])]],2)])],1),e("EventDescription",{attrs:{event:t.event,canEdit:0!=t.event.ownerId&&t.canEdit},on:{"update:event":function(e){t.event=e}}})],1),e("ScheduleOverlap",{ref:"scheduleOverlap",attrs:{event:t.event,fromEditEvent:t.fromEditEvent,loadingCalendarEvents:t.loading,calendarEventsMap:t.calendarEventsMap,calendarPermissionGranted:t.calendarPermissionGranted,"calendar-availabilities":t.calendarAvailabilities,weekOffset:t.weekOffset,curGuestId:t.curGuestId,"initial-timezone":t.initialTimezone,addingAvailabilityAsGuest:t.addingAvailabilityAsGuest},on:{"update:weekOffset":function(e){t.weekOffset=e},"update:week-offset":function(e){t.weekOffset=e},addAvailability:t.addAvailability,addAvailabilityAsGuest:t.addAvailabilityAsGuest,refreshEvent:t.refreshEvent,highlightAvailabilityBtn:t.highlightAvailabilityBtn,deleteAvailability:t.deleteAvailability,setCurGuestId:e=>t.curGuestId=e,signUpForBlock:t.initiateSignUpFlow}})],1),t.showFeedbackBtn?[e("div",{staticClass:"tw-w-full tw-border-t tw-border-solid tw-border-gray"}),t.showFeedbackBtn?e("div",{staticClass:"tw-flex tw-flex-col tw-items-center"},[e(s.A,{staticClass:"tw-h-16",attrs:{block:"",id:"feedback-btn",text:"",href:"https://forms.gle/9AgRy4PQfWfVuBnw8",target:"_blank"}},[t._v(" 意见反馈 ")]),e("div",{staticClass:"tw-w-full tw-border-t tw-border-solid tw-border-gray"}),e(s.A,{staticClass:"tw-h-16",attrs:{block:"",text:"",href:"https://www.paypal.com/donate/?hosted_button_id=KWCH6LGJCP6E6",target:"_blank"}},[t._v(" 支持我们 ")]),e("div",{staticClass:"tw-w-full tw-border-t tw-border-solid tw-border-gray"}),e(s.A,{staticClass:"tw-h-16",attrs:{block:"",text:"",to:{name:"privacy-policy"}}},[t._v(" 隐私政策 ")])],1):t._e()]:t._e(),e("div",{staticClass:"tw-mb-16 tw-hidden tw-flex-col tw-items-center tw-justify-between sm:tw-flex"},[e("router-link",{staticClass:"tw-text-xs tw-font-medium tw-text-gray",attrs:{to:{name:"privacy-policy"}}},[t._v(" 隐私政策 ")])],1),e("div",{staticClass:"tw-h-8"}),t.isSettingSpecificTimes||!t.isPhone||t.isSignUp&&!t.canEdit?t._e():e("div",{staticClass:"tw-fixed tw-bottom-0 tw-z-20 tw-flex tw-h-16 tw-w-full tw-items-center tw-px-4",class:`${t.isIOS?"tw-pb-2":""} ${t.isScheduling?"tw-bg-blue":"tw-bg-green"}`},[t.isEditing||t.isScheduling?t.isEditing?[e(s.A,{staticClass:"tw-text-white",attrs:{text:""},on:{click:t.cancelEditing}},[t._v(" 取消 ")]),e(c.A),e(s.A,{staticClass:"tw-bg-white tw-text-green",on:{click:()=>t.saveChanges()}},[t._v(" 保存 ")])]:t.isScheduling?[e(s.A,{staticClass:"tw-text-white",attrs:{text:""},on:{click:t.cancelScheduleEvent}},[t._v(" 取消 ")]),e(c.A),e(s.A,{staticClass:"tw-bg-white tw-text-blue",attrs:{disabled:!t.allowScheduleEvent},on:{click:t.confirmScheduleEvent}},[t._v(" 安排 ")])]:t._e():[!t.event.daysOnly&&t.numResponses>0?e(s.A,{staticClass:"tw-text-white",attrs:{text:""},on:{click:t.scheduleEvent}},[t._v("Schedule")]):t._e(),e(c.A),t.isGroup||t.authUser||!t.selectedGuestRespondent?e(s.A,{staticClass:"tw-bg-white tw-text-green tw-transition-opacity",style:{opacity:t.availabilityBtnOpacity},attrs:{disabled:t.loading&&!t.userHasResponded},on:{click:()=>t.addAvailability()}},[t._v(" "+t._s(t.mobileActionButtonText)+" ")]):e(s.A,{staticClass:"tw-bg-white tw-text-green tw-transition-opacity",style:{opacity:t.availabilityBtnOpacity},on:{click:t.editGuestAvailability}},[t._v(" "+t._s(t.mobileGuestActionButtonText)+" ")])]],2)],2):t._e()},u=[],h=(i(4114),i(5985)),p=i(5353),v=i(2083),w=i(3208),m=i(174),g=i(7112),f=function(){var t=this,e=t._self._c;return e(o.A,{attrs:{value:t.value,width:"400","content-class":"tw-m-0"},on:{input:e=>t.$emit("input",e)}},[e(a.A,[e(n.ri,{staticClass:"tw-flex"},[e("div",[t._v("Continue as guest")]),e(c.A),e(s.A,{attrs:{icon:""},on:{click:function(e){return t.$emit("input",!1)}}},[e(r.A,[t._v("mdi-close")])],1)],1),e(n.OQ,[e(m.A,{ref:"form",staticClass:"tw-flex tw-flex-col tw-gap-y-4",attrs:{"lazy-validation":"",onsubmit:"return false;"},model:{value:t.formValid,callback:function(e){t.formValid=e},expression:"formValid"}},[e(g.A,{attrs:{rules:t.nameRules,placeholder:"Enter your name...",autofocus:"","hide-details":"auto",autocomplete:"off",solo:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t.event.collectEmails?e(g.A,{attrs:{rules:t.emailRules,placeholder:"Enter your email...",hint:"The event creator is collecting emails. We will never share your email with anyone or contact you in any way.","persistent-hint":"",solo:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}):t._e(),e("div",{staticClass:"tw-flex"},[e(c.A),e(s.A,{staticClass:"tw-bg-green",attrs:{dark:t.formValid,disabled:!t.formValid},on:{click:t.submit}},[t._v(" Continue ")])],1)],1)],1)],1)],1)},A=[],y={name:"GuestDialog",emits:["input","submit"],props:{value:{type:Boolean,required:!0},event:{type:Object,required:!0},respondents:{type:Array,required:!0}},data(){return{formValid:!1,name:"",email:"",nameRules:[],emailRules:[]}},computed:{isPhone(){return(0,h.tp)(this.$vuetify)}},methods:{submit(){this.nameRules=[t=>!!t||"Name is required",t=>!this.respondents.includes(t)||"Name already taken"],this.emailRules=[t=>!!t||"Email is required",t=>!!(0,h.DT)(t)||"Invalid email"],this.$nextTick((()=>{this.$refs.form.validate()&&this.$emit("submit",{name:this.name,email:this.email})}))}},watch:{value(){this.value&&(this.name="",this.email="",this.nameRules=[],this.emailRules=[],this.$refs.form?.resetValidation())},name(){this.nameRules=[t=>!this.respondents.includes(t)||"Name already taken"]},email(){this.emailRules=[]}}},C=y,b=i(1656),x=(0,b.A)(C,f,A,!1,null,null,null),k=x.exports,_=function(){var t=this,e=t._self._c;return e(o.A,{attrs:{value:t.value,width:"400","content-class":"tw-m-0"},on:{input:e=>t.$emit("input",e)}},[e(a.A,[e(n.ri,{staticClass:"tw-flex"},[e("div",[t._v("Join slot "),t.authUser?t._e():e("span",[t._v("as")])]),e(c.A),e(s.A,{attrs:{icon:""},on:{click:function(e){return t.$emit("input",!1)}}},[e(r.A,[t._v("mdi-close")])],1)],1),e(n.OQ,[e("div",{staticClass:"mb-2"},[e("SignUpBlock",{attrs:{signUpBlock:t.signUpBlock,infoOnly:""}})],1),e(m.A,{ref:"form",staticClass:"tw-flex tw-flex-col tw-gap-y-4",attrs:{"lazy-validation":"",onsubmit:"return false;"},model:{value:t.formValid,callback:function(e){t.formValid=e},expression:"formValid"}},[t.authUser?t._e():e("div",{staticClass:"tw-flex tw-flex-col tw-gap-y-4"},[e(g.A,{attrs:{rules:t.nameRules,placeholder:"Enter your name...",autofocus:"","hide-details":"auto",autocomplete:"off",solo:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t.event.collectEmails?e(g.A,{attrs:{rules:t.emailRules,placeholder:"Enter your email...",hint:"The event creator is collecting emails. We will never share your email with anyone or contact you in any way.","persistent-hint":"",solo:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}):t._e()],1),e("div",[t._v(" NOTE: After joining a slot, "),e("span",{staticClass:"tw-font-bold"},[t._v("you will need to contact the sign up creator in order to edit your slot.")])]),t.event.blindAvailabilityEnabled?e("div",[t._v(" The sign up creator has hidden attendees from each other. "),e("span",{staticClass:"tw-font-bold"},[t._v("Your name will only be visible to you.")])]):t._e(),e("div",{staticClass:"tw-flex"},[e(c.A),e(s.A,{staticClass:"tw-bg-green",attrs:{dark:t.formValid,disabled:!t.formValid},on:{click:t.submit}},[t._v(" Join slot ")])],1)])],1)],1)],1)},E=[],O=i(6155),S={name:"SignUpForSlotDialog",emits:["input","submit"],components:{SignUpBlock:O.A},props:{value:{type:Boolean,required:!0},event:{type:Object,required:!0},signUpBlock:{type:Object,required:!0}},data(){return{formValid:!1,name:"",email:"",nameRules:[],emailRules:[]}},computed:{...(0,p.aH)(["authUser"]),isPhone(){return(0,h.tp)(this.$vuetify)}},methods:{submit(){console.log(this.signUpBlock),this.nameRules=[t=>!!t||"Name is required"],this.emailRules=[t=>!!t||"Email is required",t=>!!(0,h.DT)(t)||"Invalid email"],this.$nextTick((()=>{this.$refs.form.validate()&&this.$emit("submit",{name:this.name,email:this.email})}))}},watch:{value(){this.value&&(this.name="",this.email="",this.nameRules=[],this.emailRules=[],this.$refs.form?.resetValidation())},name(){this.nameRules=[]},email(){this.emailRules=[]}}},D=S,I=(0,b.A)(D,_,E,!1,null,null,null),G=I.exports,U=i(6638),P=i(3540),T=i.n(P),B=i(156),$=i(9483),R=i(5961),L=i(5420),N=function(){var t=this,e=t._self._c;return e(o.A,{attrs:{value:t.value,width:"400","content-class":"tw-m-0"},on:{input:e=>t.$emit("input",e)}},[e(a.A,{staticClass:"tw-p-4 sm:tw-p-6"},[e(R.Qo,[e("div",{directives:[{name:"show",rawName:"v-show",value:t.state===t.states.CHOICES,expression:"state === states.CHOICES"}]},[e("div",{staticClass:"tw-text-md mb-1 tw-text-center"},[t._v(" 您可以手动填写您的空余时间或者从日历中导入 "),e("br",{staticClass:"tw-block sm:tw-hidden"})]),e("div",{staticClass:"tw-pb-4 tw-text-center tw-text-xs tw-text-dark-gray"},[t._v(" 从日历导入后也可以继续手动修改哦 ")]),e("div",{staticClass:"tw-flex tw-flex-col tw-gap-2"},[e(s.A,{staticClass:"tw-bg-white",attrs:{block:""},on:{click:t.autofillWithGcal}},[e("div",{staticClass:"tw-flex tw-w-full tw-items-center tw-gap-2"},[e(L.A,{staticClass:"tw-flex-initial",attrs:{width:"20",height:"20",src:i(8575)}}),e(c.A),t._v(" 导入 Google Calendar "),e(c.A)],1)]),e(s.A,{staticClass:"tw-bg-white",attrs:{block:""},on:{click:t.autofillWithApple}},[e("div",{staticClass:"tw-flex tw-w-full tw-items-center tw-gap-2"},[e(L.A,{staticClass:"tw-flex-initial",attrs:{width:"20",height:"20",src:i(1228)}}),e(c.A),t._v(" 导入 Apple Calendar "),e(c.A)],1)]),e(s.A,{staticClass:"tw-bg-white",attrs:{block:""},on:{click:t.autofillWithOutlook}},[e("div",{staticClass:"tw-flex tw-w-full tw-items-center tw-gap-2"},[e(L.A,{staticClass:"tw-flex-initial",attrs:{width:"20",height:"20",src:i(5155)}}),e(c.A),t._v(" 导入 Outlook Calendar "),e(c.A)],1)]),e("div",{staticClass:"tw-flex tw-items-center tw-gap-3"},[e($.A),e("div",{staticClass:"tw-text-center tw-text-xs tw-font-medium tw-text-dark-gray"},[t._v(" or ")]),e($.A)],1),e(s.A,{staticClass:"tw-text-white",attrs:{block:"",color:"success"},on:{click:t.setAvailabilityManually}},[t._v("手动填写")])],1)])]),e(R.Qo,[e("CalendarPermissionsCard",{directives:[{name:"show",rawName:"v-show",value:t.state===t.states.GCAL_PERMISSIONS,expression:"state === states.GCAL_PERMISSIONS"}],attrs:{cancelLabel:"Back"},on:{cancel:t.showChoices,allow:function(e){return t.$emit("allowGoogleCalendar")}}})],1),e(R.Qo,[t.state===t.states.CREATE_ACCOUNT_APPLE?e("CreateAccount",{on:{signInLinkApple:function(e){return t.$emit("signInLinkApple")},back:function(e){t.state=t.states.CHOICES},continue:function(e){t.state=t.states.APPLE_CREDENTIALS}}}):t._e()],1),e(R.Qo,[t.state===t.states.APPLE_CREDENTIALS?e("AppleCredentials",{on:{back:function(e){t.state=t.states.CHOICES},addedAppleCalendar:function(e){return t.$emit("addedAppleCalendar")}}}):t._e()],1)],1)],1)},H=[],M=i(1936),V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-flex tw-flex-col tw-gap-6"},[e("div",{staticClass:"tw-text-md tw-flex tw-flex-col tw-items-center tw-gap-2 tw-font-normal"},[t._v(" Create a Schej account to link your "),e("div",{staticClass:"tw-flex tw-items-center tw-gap-1"},[e(L.A,{staticClass:"-tw-mt-1 tw-flex-initial",attrs:{width:"15",height:"15",src:i(1228)}}),e("span",{staticClass:"tw-font-medium"},[t._v("Apple Calendar")])],1)]),t.authUser?e("div",[e("div",{staticClass:"tw-flex tw-items-center tw-justify-center tw-text-sm tw-text-dark-gray"},[e(r.A,{staticClass:"tw-mx-2 tw-text-green",attrs:{size:"16"}},[t._v("mdi-check-circle")]),t._v(" Schej account created ")],1)]):e("div",[e("SignInGoogleBtn",{staticClass:"tw-mb-3 tw-w-full",on:{click:function(e){return t.$emit("signInLinkApple")}}}),e("div",{staticClass:"tw-text-center tw-text-xs tw-text-dark-gray"},[t._v(" By continuing, you agree to our "),e("router-link",{staticClass:"tw-text-blue",attrs:{target:"_blank",to:{name:"privacy-policy"}}},[t._v("privacy policy")])],1)],1),e("div",{staticClass:"tw-flex tw-items-center tw-gap-2"},[e(s.A,{staticClass:"tw-grow",attrs:{text:""},on:{click:function(e){return t.$emit("back")}}},[t._v("Back")]),e(s.A,{staticClass:"tw-grow",attrs:{color:"primary",disabled:!t.authUser},on:{click:function(e){return t.$emit("continue")}}},[t._v("Continue")])],1)])},j=[],F=function(){var t=this,e=t._self._c;return e(s.A,{staticClass:"gsi-material-button",on:{click:e=>t.$emit("click",e)}},[e("div",{staticClass:"gsi-material-button-state"}),e("div",{staticClass:"gsi-material-button-content-wrapper"},[e("div",{staticClass:"gsi-material-button-icon"},[e("svg",{staticStyle:{display:"block"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("path",{attrs:{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}}),e("path",{attrs:{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}}),e("path",{attrs:{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}}),e("path",{attrs:{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}}),e("path",{attrs:{fill:"none",d:"M0 0h48v48H0z"}})])]),e("span",{staticClass:"gsi-material-button-contents"},[t._v(t._s(t.text))]),e("span",{staticStyle:{display:"none"}},[t._v(t._s(t.text))])])])},W=[],q={name:"SignInGoogleBtn",emits:["click"],props:{text:{type:String,default:"Continue with Google"}}},Q=q,z=(0,b.A)(Q,F,W,!1,null,"001cb6c2",null),J=z.exports,Y={name:"CreateAccount",components:{SignInGoogleBtn:J},computed:{...(0,p.aH)(["authUser"])}},K=Y,X=(0,b.A)(K,V,j,!1,null,null,null),Z=X.exports,tt=i(6007),et={name:"MarkAvailabilityDialog",props:{value:{type:Boolean,required:!0},initialState:{type:String,default:"choices"}},components:{CalendarPermissionsCard:M.A,CreateAccount:Z,AppleCredentials:tt.A},data(){return{states:{CHOICES:"choices",GCAL_PERMISSIONS:"gcal_permissions",CREATE_ACCOUNT_APPLE:"create_account_apple",APPLE_CREDENTIALS:"apple_credentials"},state:this.initialState}},computed:{...(0,p.aH)(["authUser"]),isPhone(){return(0,h.tp)(this.$vuetify)}},methods:{...(0,p.i0)(["showInfo"]),setAvailabilityManually(){this.$emit("setAvailabilityManually")},autofillWithGcal(){this.$posthog?.capture("autofill_with_gcal_clicked"),this.state=this.states.GCAL_PERMISSIONS},autofillWithApple(){this.$posthog?.capture("autofill_with_apple_clicked"),this.authUser?this.state=this.states.APPLE_CREDENTIALS:this.state=this.states.CREATE_ACCOUNT_APPLE},autofillWithOutlook(){this.$posthog?.capture("autofill_with_outlook_clicked"),this.$emit("allowOutlookCalendar")},showChoices(){this.state=this.states.CHOICES}},watch:{value(){this.value||setTimeout((()=>this.state=this.states.CHOICES),100)}}},it=et,st=(0,b.A)(it,N,H,!1,null,null,null),at=st.exports,nt=function(){var t=this,e=t._self._c;return e(o.A,{attrs:{value:t.value,"content-class":"tw-max-w-[35rem] tw-m-0 tw-max-h-full",transition:t.isPhone?"dialog-bottom-transition":"dialog-transition",persistent:""},on:{input:e=>t.$emit("input",e)}},[e(R.Qo,[e(a.A,{staticClass:"tw-overflow-none tw-relative tw-flex tw-flex-col tw-rounded-lg tw-px-2 tw-py-5 tw-transition-all"},[e(n.OQ,[e("div",{staticClass:"tw-mb-5 tw-text-wrap tw-text-xl tw-font-medium tw-text-black"},[t.isOwner?[t._v(" Share calendar availability ")]:[t._v(' Accept invitation to share your calendar availability with "'+t._s(t.group.name)+'"? ')]],2),e(R.Qo,[t.calendarPermissionGranted?e("div",[e("CalendarAccounts",{attrs:{"sync-with-backend":!1,"allow-add-calendar-account":!1,"toggle-state":!0,"fill-space":!0},on:{toggleCalendarAccount:t.toggleCalendarAccount,toggleSubCalendarAccount:t.toggleSubCalendarAccount}}),e("div",{staticClass:"tw-mt-5 tw-space-y-4"},[e("div",{staticClass:"tw-font-medium tw-text-black"},[t._v(" Your calendar availability from these calendars will be shared with: ")]),t.membersToShareWith.length>0?e("div",{staticClass:"tw-flex tw-flex-wrap tw-gap-1"},t._l(t.membersToShareWith,(function(t){return e("UserChip",{key:t.email,attrs:{user:t}})})),1):e("div",{staticClass:"tw-flex tw-items-center tw-italic"},[e("div",[t._v("No members added yet")])]),e("div",{staticClass:"tw-text-xs tw-text-dark-gray"},[t._v(" Your calendar events will NOT be visible to others ")])])],1):t._e()]),e(R.Qo,[t.calendarPermissionGranted?t._e():e("div",{staticClass:"tw-p-5 tw-text-black"},[e("CalendarPermissionsCard",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{cancelLabel:""},on:{allow:()=>{t.$emit("setAvailabilityAutomatically")}}})],1)])],1),t.isOwner?e(n.SL,[e(s.A,{staticClass:"tw-px-6",attrs:{text:""},on:{click:t.goHome}},[t._v("Back")]),e(c.A),e(s.A,{staticClass:"tw-px-6",attrs:{color:"primary",disabled:!t.calendarPermissionGranted},on:{click:t.acceptInvitation}},[t._v("Share")])],1):e(n.SL,[e(o.A,{attrs:{width:"400",persistent:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:a}){return[e(s.A,t._g(t._b({staticClass:"tw-text-dark-gray",attrs:{text:""}},"v-btn",a,!1),i),[t._v("Reject invitation")])]}}]),model:{value:t.rejectDialog,callback:function(e){t.rejectDialog=e},expression:"rejectDialog"}},[e(a.A,[e(n.ri,[t._v("Are you sure?")]),e(n.OQ,[t._v("Are you sure you want to reject this invite?")]),e(n.SL,[e(c.A),e(s.A,{staticClass:"tw-text-dark-gray",attrs:{text:""},on:{click:function(e){t.rejectDialog=!1}}},[t._v("Cancel")]),e(s.A,{attrs:{text:"",color:"error"},on:{click:t.rejectInvitation}},[t._v("I'm sure")])],1)],1)],1),e(c.A),e(s.A,{staticClass:"tw-bg-green tw-px-5 tw-text-white tw-transition-opacity",attrs:{disabled:!t.calendarPermissionGranted},on:{click:t.acceptInvitation}},[t._v("Accept Invitation")])],1)],1)],1)],1)},lt=[],ot=i(8058),rt=i(6920),ct={name:"InvitationDialog",emits:["input"],props:{value:{type:Boolean,required:!0},group:{type:Object},calendarPermissionGranted:{type:Boolean,required:!0}},components:{CalendarAccounts:ot.A,UserChip:rt.A,CalendarPermissionsCard:M.A},data:()=>({calendarAccounts:{},rejectDialog:!1}),mounted(){this.calendarAccounts=JSON.parse(JSON.stringify(this.authUser.calendarAccounts))},computed:{...(0,p.aH)(["authUser"]),isPhone(){return(0,h.tp)(this.$vuetify)},isOwner(){return this.authUser._id===this.group.ownerId},membersToShareWith(){return this.group.attendees?.filter((t=>!t.declined&&t.email!=this.authUser.email))}},methods:{goHome(){this.$router.push({name:"home"})},rejectInvitation(){(0,h.bE)(`/events/${this.group._id}/decline`).then((t=>{this.$router.replace({name:"home"})}))},acceptInvitation(){const t=(0,h.qW)(this.calendarAccounts);(0,h.bE)(`/events/${this.group._id}/response`,t).then((t=>{this.$emit("input",!1),this.$emit("refreshEvent")}))},toggleCalendarAccount(t){this.calendarAccounts[`${t.email}_${t.calendarType}`].enabled=t.enabled},toggleSubCalendarAccount(t){this.calendarAccounts[`${t.email}_${t.calendarType}`].subCalendars[t.subCalendarId].enabled=t.enabled}}},dt=ct,ut=(0,b.A)(dt,nt,lt,!1,null,null,null),ht=ut.exports,pt=i(9205),vt=i(6513),wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tw-mt-1 tw-max-w-full sm:tw-mt-2 sm:tw-max-w-[calc(100%-236px)]"},[t.showDescription?e("div",{staticClass:"tw-flex tw-w-full tw-cursor-pointer tw-items-center tw-gap-2 tw-rounded-md tw-border tw-border-light-gray-stroke tw-bg-light-gray tw-p-2 tw-text-xs tw-font-normal tw-text-very-dark-gray hover:tw-bg-[#eeeeee] sm:tw-text-sm"},[e("div",{staticClass:"tw-grow tw-space-y-1"},t._l(t.event.description.split("\n"),(function(i,s){return e("div",{key:s,staticClass:"tw-min-h-6 tw-leading-6"},[t._v(" "+t._s(i)+" ")])})),0),t.canEdit?e(s.A,{key:"edit-description-btn",staticClass:"-tw-my-1",attrs:{icon:"",small:""},on:{click:function(e){t.isEditing=!0}}},[e(r.A,{attrs:{small:""}},[t._v("mdi-pencil")])],1):t._e()],1):t.canEdit&&!t.isEditing?e(s.A,{staticClass:"-tw-ml-2 tw-mt-0 tw-w-min tw-px-2 tw-text-dark-gray",attrs:{text:""},on:{click:function(e){t.isEditing=!0}}},[t._v(" + Add description ")]):t._e(),e("div",{class:t.canEdit&&!t.showDescription&&t.isEditing?"":"tw-absolute tw-opacity-0"},[e("div",{staticClass:"-tw-mt-[6px] tw-flex tw-w-full tw-flex-grow tw-items-center tw-gap-2"},[e(vt.A,{staticClass:"tw-flex-grow tw-p-2 tw-text-xs sm:tw-text-sm",attrs:{placeholder:"Enter a description...",autofocus:"",rows:1,"auto-grow":"","hide-details":""},model:{value:t.newDescription,callback:function(e){t.newDescription=e},expression:"newDescription"}}),e(s.A,{attrs:{icon:"",small:t.isPhone},on:{click:function(e){t.newDescription=t.event.description,t.isEditing=!1}}},[e(r.A,[t._v("mdi-close")])],1),e(s.A,{attrs:{icon:"",small:t.isPhone,color:"primary"},on:{click:t.saveDescription}},[e(r.A,[t._v("mdi-check")])],1)],1)])],1)},mt=[],gt={name:"EventDescription",props:{event:{type:Object,required:!0},canEdit:{type:Boolean,required:!0}},data(){return{isEditing:!1,newDescription:this.event.description??"",lineHeight:28}},computed:{isPhone(){return(0,h.tp)(this.$vuetify)},showDescription(){return this.event.description&&!this.isEditing}},methods:{...(0,p.i0)(["showError"]),saveDescription(){const t={...this.event},e={...this.event,description:this.newDescription},i={name:this.event.name,duration:this.event.duration,dates:this.event.dates,type:this.event.type,description:this.newDescription};this.$emit("update:event",e),this.isEditing=!1,(0,h.yJ)(`/events/${this.event._id}`,i).catch((e=>{console.error(e),this.showError("Failed to save description! Please try again later."),this.$emit("update:event",{...t})}))}}},ft=gt,At=(0,b.A)(ft,wt,mt,!1,null,null,null),yt=At.exports,Ct={name:"Event",props:{eventId:{type:String,required:!0},fromSignIn:{type:Boolean,default:!1},editingMode:{type:Boolean,default:!1},linkApple:{type:Boolean,default:!1},initialTimezone:{type:Object,default:()=>({})},contactsPayload:{type:Object,default:()=>({})}},components:{GuestDialog:k,SignUpForSlotDialog:G,ScheduleOverlap:w.A,NewDialog:v.A,SignInNotSupportedDialog:B.A,MarkAvailabilityDialog:at,InvitationDialog:ht,HelpDialog:pt.A,EventDescription:yt},data:()=>({fromEditEvent:!1,choiceDialog:!1,webviewDialog:!1,guestDialog:!1,signUpForSlotDialog:!1,editEventDialog:!1,invitationDialog:!1,pagesNotVisitedDialog:!1,helpDialog:!1,loading:!0,calendarEventsMap:{},event:null,scheduleOverlapComponent:null,scheduleOverlapComponentLoaded:!1,curGuestId:"",calendarPermissionGranted:!0,addingAvailabilityAsGuest:!1,weekOffset:0,availabilityBtnOpacity:1,hasRefetchedAuthUserCalendarEvents:!1,calendarAvailabilities:{},currSignUpBlock:null}),mounted(){this.editEventDialog=Object.keys(this.contactsPayload).length>0,this.linkApple&&(this.choiceDialog=!0)},computed:{...(0,p.aH)(["authUser","events"]),allowScheduleEvent(){return this.scheduleOverlapComponent?.allowScheduleEvent},calendarTypes(){return U.MD},dateString(){return(0,h.Go)(this.event)},isEditing(){return this.scheduleOverlapComponent?.editing},isScheduling(){return this.scheduleOverlapComponent?.scheduling},canEdit(){return 0==this.event.ownerId||this.authUser?._id===this.event.ownerId},isPhone(){return(0,h.tp)(this.$vuetify)},isSpecificDates(){return this.event?.type===U.mu.SPECIFIC_DATES||!this.event?.type},isWeekly(){return this.event?.type===U.mu.DOW},isGroup(){return this.event?.type===U.mu.GROUP},isSignUp(){return this.event?.isSignUpForm},eventType(){return this.isGroup?"group":this.isSignUp?"signup":"event"},areUnsavedChanges(){return this.scheduleOverlapComponent?.unsavedChanges},userHasResponded(){return this.authUser?._id in this.event.responses},selectedGuestRespondent(){return this.scheduleOverlapComponent?.selectedGuestRespondent},showFeedbackBtn(){return this.isPhone},numResponses(){return this.scheduleOverlapComponent?.respondents.length},actionButtonText(){return this.isSignUp?"Edit slots":this.userHasResponded||this.isGroup?"Edit availability":"Add availability"},mobileGuestActionButtonText(){return this.event.blindAvailabilityEnabled?"Edit availability":`Edit ${this.selectedGuestRespondent}'s availability`},mobileActionButtonText(){return this.isSignUp?"Edit slots":this.userHasResponded?"Edit availability":"Add availability"},isIOS(){return(0,h.un)()},isSettingSpecificTimes(){return this.scheduleOverlapComponent?.state===this.scheduleOverlapComponent?.states.SET_SPECIFIC_TIMES}},methods:{...(0,p.i0)(["showError","showInfo","getEvents"]),...(0,p.PY)(["setAuthUser"]),addAvailability(){this.scheduleOverlapComponent&&(this.event?.daysOnly?this.scheduleOverlapComponent.startEditing():this.authUser&&this.calendarPermissionGranted||this.userHasResponded?(this.scheduleOverlapComponent.startEditing(),this.userHasResponded||this.isSignUp||this.scheduleOverlapComponent.setAvailabilityAutomatically()):this.choiceDialog=!0)},addAvailabilityAsGuest(){this.addingAvailabilityAsGuest=!0,this.setAvailabilityManually()},cancelEditing(){this.scheduleOverlapComponent&&(this.isSignUp?this.scheduleOverlapComponent.resetSignUpForm():this.scheduleOverlapComponent.resetCurUserAvailability(),this.scheduleOverlapComponent.stopEditing(),this.curGuestId="",this.addingAvailabilityAsGuest=!1)},copyLink(){navigator.clipboard.writeText(`${window.location.origin}/e/${this.event.shortId??this.event._id}`),this.showInfo("Link copied to clipboard!")},async deleteAvailability(){this.scheduleOverlapComponent&&(!this.authUser||this.addingAvailabilityAsGuest?this.curGuestId&&(await this.scheduleOverlapComponent.deleteAvailability(this.curGuestId),this.curGuestId=""):await this.scheduleOverlapComponent.deleteAvailability(),this.showInfo(this.isGroup?"Left group!":"Availability deleted!"),this.scheduleOverlapComponent.stopEditing())},editEvent(){this.editEventDialog=!0},async refreshEvent(){let t=this.eventId.replaceAll(".","");this.event=await(0,h.Jt)(`/events/${t}`),(0,h.QC)(this.event)},setAvailabilityAutomatically(t=U.MD.GOOGLE){if(T()(navigator.userAgent))this.webviewDialog=!0;else{let e;e=this.authUser?{state:{type:this.isGroup?U.QV.GROUP_ADD_AVAILABILITY:U.QV.EVENT_ADD_AVAILABILITY,eventId:this.eventId},selectAccount:!1,requestCalendarPermission:!0}:{state:{type:U.QV.EVENT_ADD_AVAILABILITY,eventId:this.eventId},selectAccount:!0,requestCalendarPermission:!0},t===U.MD.GOOGLE?(0,h.n3)(e):t===U.MD.OUTLOOK&&(0,h.WN)(e)}this.choiceDialog=!1},setAvailabilityManually(){this.scheduleOverlapComponent&&(this.$nextTick((()=>{this.scheduleOverlapComponent.startEditing()})),this.choiceDialog=!1)},editGuestAvailability(){this.scheduleOverlapComponent&&(this.curGuestId=this.selectedGuestRespondent,this.scheduleOverlapComponent.startEditing(),this.$nextTick((()=>{this.scheduleOverlapComponent.populateUserAvailability(this.selectedGuestRespondent)})))},async saveChanges(t=!1){if(!this.scheduleOverlapComponent)return;if(!this.userHasResponded&&0===this.curGuestId.length&&!this.scheduleOverlapComponent.pageHasChanged&&!t&&this.scheduleOverlapComponent.hasPages)return void(this.pagesNotVisitedDialog=!0);if(!this.authUser||this.addingAvailabilityAsGuest)return void(this.curGuestId?(this.saveChangesAsGuest({name:this.curGuestId,email:this.event.responses[this.curGuestId].email}),this.curGuestId="",this.addingAvailabilityAsGuest=!1):this.guestDialog=!0);let e=!0;this.isSignUp?e=await this.scheduleOverlapComponent.submitNewSignUpBlocks():await this.scheduleOverlapComponent.submitAvailability(),e&&(this.showInfo("Changes saved!"),this.scheduleOverlapComponent.stopEditing())},async saveChangesAsGuest(t){this.scheduleOverlapComponent&&t.name.length>0&&(await this.scheduleOverlapComponent.submitAvailability(t),this.showInfo("Changes saved!"),this.scheduleOverlapComponent.resetCurUserAvailability(),this.scheduleOverlapComponent.stopEditing(),this.guestDialog=!1,this.addingAvailabilityAsGuest=!1)},scheduleEvent(){this.scheduleOverlapComponent?.scheduleEvent()},cancelScheduleEvent(){this.scheduleOverlapComponent?.cancelScheduleEvent()},confirmScheduleEvent(){this.scheduleOverlapComponent?.confirmScheduleEvent()},highlightAvailabilityBtn(){this.isPhone||window.scrollTo({top:0,behavior:"instant"}),this.availabilityBtnOpacity=.1,setTimeout((()=>{this.availabilityBtnOpacity=1,setTimeout((()=>{this.availabilityBtnOpacity=.1,setTimeout((()=>{this.availabilityBtnOpacity=1}),100)}),100)}),100)},signInLinkApple(){T()(navigator.userAgent)?this.webviewDialog=!0:(0,h.n3)({state:{type:U.QV.EVENT_SIGN_IN_LINK_APPLE,eventId:this.eventId},selectAccount:!0})},addedAppleCalendar(){this.choiceDialog=!1,this.scheduleOverlapComponent?.startEditing(),this.scheduleOverlapComponent?.setAvailabilityAutomatically()},async fetchCalendarAvailabilities(){if(this.event.type!==U.mu.GROUP)return;const t=this.weekOffset;return(0,h.AU)(this.event,{weekOffset:t,eventId:this.event._id}).then((e=>{if(t===this.weekOffset){this.calendarAvailabilities=e;for(const t in this.calendarAvailabilities)for(const e in this.calendarAvailabilities[t]){const i=this.calendarAvailabilities[t][e],s=new Date(i.startDate),a=new Date(i.endDate);(0,h.MT)(s)||(s.setHours(s.getHours()-1),a.setHours(a.getHours()-1)),this.calendarAvailabilities[t][e].startDate=s.toISOString(),this.calendarAvailabilities[t][e].endDate=a.toISOString()}}})).catch((t=>{console.error(t)}))},async fetchAuthUserCalendarEvents(){if(!this.authUser)return void(this.calendarPermissionGranted=!1);const t=this.weekOffset;return(0,h.AU)(this.event,{weekOffset:t}).then((e=>{if(t===this.weekOffset){if(this.calendarEventsMap=e,this.event.type===U.mu.GROUP)for(const t in this.calendarEventsMap)for(const e in this.calendarEventsMap[t].calendarEvents){const i=this.calendarEventsMap[t].calendarEvents[e],s=new Date(i.startDate),a=new Date(i.endDate);(0,h.MT)(s)||(s.setHours(s.getHours()-1),a.setHours(a.getHours()-1)),this.calendarEventsMap[t].calendarEvents[e].startDate=s.toISOString(),this.calendarEventsMap[t].calendarEvents[e].endDate=a.toISOString()}if(this.authUser&&this.isEditing&&!this.userHasResponded&&!this.areUnsavedChanges&&this.scheduleOverlapComponent&&this.$nextTick((()=>{this.scheduleOverlapComponent?.setAvailabilityAutomatically()})),this.calendarPermissionGranted=!Object.values(this.calendarEventsMap).every((t=>Boolean(t.error))),!this.hasRefetchedAuthUserCalendarEvents){const t=Object.values(this.calendarEventsMap).some((t=>Boolean(t.error)));t&&(this.hasRefetchedAuthUserCalendarEvents=!0,setTimeout((()=>{this.fetchAuthUserCalendarEvents()}),1e3))}}})).catch((t=>{console.error(t),this.calendarPermissionGranted=!1}))},refreshCalendar(){const t=[];t.push(this.fetchCalendarAvailabilities()),t.push(this.fetchAuthUserCalendarEvents());const e=this.weekOffset;this.loading=!0,Promise.allSettled(t).then((()=>{e===this.weekOffset&&(this.loading=!1)}))},resetWeekOffset(){this.event&&this.event.startOnMonday?this.weekOffset=1:this.weekOffset=0},onBeforeUnload(t){if(this.areUnsavedChanges)return t.preventDefault(),void(t.returnValue="");delete t["returnValue"]},handleGuestDialogSubmit(t){this.saveChangesAsGuest(t)},initiateSignUpFlow(t){this.currSignUpBlock=t,this.signUpForSlotDialog=!0},async signUpForBlock(t){let e;e=this.authUser?{guest:!1,signUpBlockIds:[this.currSignUpBlock._id]}:{guest:!0,signUpBlockIds:[this.currSignUpBlock._id],...t},await(0,h.bE)(`/events/${this.event._id}/response`,e),await this.refreshEvent(),this.scheduleOverlapComponent.resetSignUpForm(),this.signUpForSlotDialog=!1}},async created(){window.addEventListener("beforeunload",this.onBeforeUnload);try{await this.refreshEvent(),this.event.type===U.mu.GROUP?"event"===this.$route.name&&this.$router.replace({name:"group",params:{groupId:this.eventId,initialTimezone:this.initialTimezone,fromSignIn:this.fromSignIn,contactsPayload:this.contactsPayload}}):"group"===this.$route.name&&this.$router.replace({name:"event",params:{eventId:this.eventId,initialTimezone:this.initialTimezone,fromSignIn:this.fromSignIn,contactsPayload:this.contactsPayload}});const t=localStorage.getItem(`from-edit-event-${this.event._id}`);t&&(localStorage.removeItem(`from-edit-event-${this.event._id}`),this.fromEditEvent=!0)}catch(e){switch(e.error){case U.sO.EventNotFound:return this.showError("The specified event does not exist!"),void this.$router.replace({name:"home"})}}const t=[];t.push(this.fetchCalendarAvailabilities()),t.push(this.fetchAuthUserCalendarEvents()),this.loading=!0,Promise.allSettled(t).then((()=>{this.loading=!1})),(0,h.Jt)("/user/profile").then((t=>{this.setAuthUser(t)})).catch((()=>{this.setAuthUser(null)}))},beforeDestroy(){window.removeEventListener("beforeunload",this.onBeforeUnload)},watch:{event(){this.event&&(this.resetWeekOffset(),this.$nextTick((()=>{this.scheduleOverlapComponent=this.$refs.scheduleOverlap})),document.title=`${this.event.name} - Schej`)},scheduleOverlapComponent(){this.scheduleOverlapComponentLoaded||(this.scheduleOverlapComponentLoaded=!0,!this.fromSignIn&&!this.editingMode||this.isGroup||this.scheduleOverlapComponent.startEditing(),this.isGroup&&!this.userHasResponded&&(this.invitationDialog=!0))},weekOffset(){this.refreshCalendar()},["authUser.calendarAccounts"](){this.fetchAuthUserCalendarEvents()}}},bt=Ct,xt=(0,b.A)(bt,d,u,!1,null,null,null),kt=xt.exports}}]);
//# sourceMappingURL=521.23c7d553.js.map