"use strict";(self["webpackChunkschej"]=self["webpackChunkschej"]||[]).push([[35],{1035:function(e,a,t){t.r(a),t.d(a,{default:function(){return d}});var r=function(){var e=this,a=e._self._c;return a("div")},s=[],n=t(5985),o=t(5353),c=t(6638),p={name:"Auth",methods:{...(0,o.PY)(["setAuthUser"])},async created(){let{error:e,code:a,scope:t,state:r}=this.$route.query;e&&this.$router.replace({name:"home"}),r&&(r=JSON.parse(decodeURIComponent(r)));try{if(r?.type===c.QV.ADD_CALENDAR_ACCOUNT||r?.type===c.QV.ADD_CALENDAR_ACCOUNT_FROM_EDIT)if(r.calendarType===c.MD.GOOGLE)await(0,n.bE)("/user/add-google-calendar-account",{code:a,scope:t});else{if(r.calendarType!==c.MD.OUTLOOK)throw new Error("Invalid calendar type");await(0,n.bE)("/user/add-outlook-calendar-account",{code:a,scope:r.scope})}else{const e=await(0,n.bE)("/auth/sign-in",{code:a,scope:t??r.scope,calendarType:r.calendarType,timezoneOffset:(new Date).getTimezoneOffset(),eventsToLink:(0,n.mb)()});(0,n.l4)(),this.setAuthUser(e),this.$posthog?.identify(e._id,{email:e.email,firstName:e.firstName,lastName:e.lastName})}if(r){let e;switch(r.type){case c.QV.EVENT_ADD_AVAILABILITY:this.$router.replace({name:"event",params:{eventId:r.eventId,fromSignIn:!0}});break;case c.QV.EVENT_SIGN_IN:this.$router.replace({name:"event",params:{eventId:r.eventId}});break;case c.QV.EVENT_SIGN_IN_LINK_APPLE:this.$router.replace({name:"event",params:{eventId:r.eventId,linkApple:!0}});break;case c.QV.GROUP_CREATE:this.$router.replace({name:"home",params:{openNewGroup:!0}});break;case c.QV.GROUP_SIGN_IN:this.$router.replace({name:"group",params:{groupId:r.groupId}});break;case c.QV.GROUP_ADD_AVAILABILITY:this.$router.replace({name:"group",params:{groupId:r.eventId,fromSignIn:!0}}),e=await(0,n.Jt)("/user/profile"),this.setAuthUser(e);break;case c.QV.ADD_CALENDAR_ACCOUNT:this.$router.replace({name:"settings"}),e=await(0,n.Jt)("/user/profile"),this.setAuthUser(e);break;case c.QV.ADD_CALENDAR_ACCOUNT_FROM_EDIT:this.$router.replace({name:"event",params:{eventId:r.eventId,fromSignIn:!0}}),e=await(0,n.Jt)("/user/profile"),this.setAuthUser(e);break;case c.QV.EVENT_CONTACTS:""==r.eventId?this.$router.replace({name:"home",params:{contactsPayload:r.payload,openNewGroup:r.openNewGroup}}):this.$router.replace({name:"event",params:{eventId:r.eventId,contactsPayload:r.payload}});break;default:this.$router.replace({name:"home"})}}else this.$router.replace({name:"home"})}catch(s){console.error(s)}}},i=p,l=t(1656),u=(0,l.A)(i,r,s,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=35.a2f81394.js.map